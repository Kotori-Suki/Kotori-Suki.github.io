<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/atom.xml"><link rel="alternate" type="application/json" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://kotori_suki.github.io/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/"><title>UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³• - UE4_C++ - UE4 | Afei's Blog = ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹ = Welcome to my blog !</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2021-11-11 18:32:17"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2021-11-11T18:32:17+08:00">2021-11-11</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Afei's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclwrdwyaj20zk0m8are.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicitf0kl1j20zk0m87fe.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicm0n457cj20zk0m8e81.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicliierfjj20zk0m8npd.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclhtuo6nj20zk0m8ttm.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giph4lm9i7j20zk0m84qp.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/UE4/" itemprop="item" rel="index" title="åˆ†ç±»äº UE4"><span itemprop="name">UE4</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/UE4/UE4CPP/" itemprop="item" rel="index" title="åˆ†ç±»äº UE4_C++"><span itemprop="name">UE4_C++</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://kotori_suki.github.io/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="-YIFEI-"><meta itemprop="description" content="Welcome to my blog !, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹"></span><div class="body md" itemprop="articleBody"><h1 id="ue4ä»£ç†çš„å®ç°ä¸ç”¨æ³•"><a class="anchor" href="#ue4ä»£ç†çš„å®ç°ä¸ç”¨æ³•">#</a> UE4 ä»£ç†çš„å®ç°ä¸ç”¨æ³•</h1><p>ç®€ä»‹ï¼šè¿™æ¬¡æ—…ç¨‹çš„é‡ç‚¹æ˜¯åˆ†æå¼•æ“æ€ä¹ˆå®ç°å„ç§ä»£ç†ï¼Œç”¨æ³•åªä¼šç¨å¾®æ€»ç»“ä¸€ä¸‹ã€‚è·Ÿåå°„ï¼ŒGC æ¯”èµ·æ¥ï¼Œè¿™æ¬¡çš„æ—…ç¨‹ä¼šç›¸å¯¹æ¯”è¾ƒè½»æ¾ï¼ˆå› ä¸ºä»£ç†çš„æ¨¡å—å†…å®¹æ¯”è¾ƒå°‘ï¼Œè€Œä¸”ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç‹¬ç«‹ï¼Œç†è§£èµ·æ¥ä¹Ÿä¼šç®€å•ä¸€ç‚¹ï¼‰ï¼Œå‡ºå‘ï¼ˆï¿£ï¸¶ï¿£ï¼‰â†—</p><p>é˜…è¯»æœ¬æ–‡å¯èƒ½éœ€è¦ä½ äº†è§£ï¼š</p><ul><li>æ¯”è¾ƒå¥½çš„ C++ åŸºç¡€</li><li>UE å…±äº«æŒ‡é’ˆçš„ä½œç”¨åŠä½¿ç”¨è§„åˆ™</li><li>UE ä»£ç†çš„åŸºæœ¬ä½¿ç”¨è§„åˆ™ï¼ˆåªæ€»ç»“</li><li>UE çš„ GC è§„åˆ™ï¼ˆä»£ç†ç»‘å®šå¯¹è±¡çš„ GC</li><li>åºåˆ—åŒ–çš„ç›¸å…³çŸ¥è¯†ï¼ˆåŠ¨æ€ä»£ç†åŸç†</li></ul><h2 id="ä»£ç†çš„ä½¿ç”¨æ€»ç»“"><a class="anchor" href="#ä»£ç†çš„ä½¿ç”¨æ€»ç»“">#</a> ä»£ç†çš„ä½¿ç”¨æ€»ç»“</h2><p>ä»£ç†çš„ä¸»è¦ä½œç”¨æ˜¯ï¼šè§£è€¦è§¦å‘è€…å’Œç›‘å¬è€…ä¹‹é—´çš„ç›´æ¥è”ç³»ï¼Œè®©è§¦å‘è€…å¯ä»¥åœ¨å®Œå…¨ä¸è®¤è¯†ç›‘å¬è€…çš„æƒ…å†µä¸‹ï¼Œè°ƒç”¨åˆ°å…¶å‡½æ•°ï¼Œå½“ç„¶è¿˜å¯ä»¥è§£ç»‘å’Œé‡æ–°ç»‘å®šï¼Œæé«˜ä»£ç çš„çµæ´»æ€§ã€‚</p><h3 id="ä»£ç†çš„ç±»å‹åŠè¯´æ˜"><a class="anchor" href="#ä»£ç†çš„ç±»å‹åŠè¯´æ˜">#</a> ä»£ç†çš„ç±»å‹åŠè¯´æ˜ï¼š</h3><table><thead><tr><th>ä»£ç†ç±»å‹</th><th>ç»‘å®šå‡½æ•°ä¸ªæ•°</th><th>æ˜¯å¦å¯ä»¥è¿”å›å€¼</th><th>æ˜¯å¦æ”¯æŒ payload</th><th>æ˜¯å¦å¯ä»¥ç»‘å®šè“å›¾å‡½æ•°</th></tr></thead><tbody><tr><td>å•æ’­ä»£ç†</td><td>1</td><td>æ˜¯</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>å¤šæ’­ä»£ç†</td><td>n</td><td>å¦</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>åŠ¨æ€å•æ’­ä»£ç†</td><td>1</td><td>æ˜¯</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>åŠ¨æ€å¤šæ’­ä»£ç†</td><td>n</td><td>å¦</td><td>å¦</td><td>æ˜¯</td></tr></tbody></table><p>Qï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¤šç±»å‹çš„ä»£ç†ï¼Ÿä¸èƒ½ä¸€ä¸ªæå®šå—ï¼Ÿ</p><ol><li>é¦–å…ˆä¸åŒä»£ç†çš„æ€§èƒ½æ¶ˆè€—æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä¸ºäº†ç»Ÿä¸€è€Œç‰ºç‰²å¤§é‡çš„æ€§èƒ½ï¼ˆä¸‹æ–‡ä¼šå¯¹ä¸åŒä»£ç†çš„æ€§èƒ½æ¶ˆè€—è¿›è¡Œåˆ†æï¼‰</li><li>å…¶æ¬¡ï¼Œä»è¡¨æ ¼ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä»£ç†èƒ½æ”¯æŒçš„åŠŸèƒ½éƒ½å®Œå…¨ä¸€è‡´ï¼Œæ‹†å¼€èƒ½è®©æˆ‘ä»¬çš„ä»£ç†æ›´çµæ´»ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæ›´ä¸ºå…·ä½“çš„åŠŸèƒ½</li><li>æœ€åï¼Œä½¿ç”¨è¿‡ä»£ç†çš„åŒå­¦ä¹ŸçŸ¥é“ï¼Œæœ‰ä¸€äº›ä»£ç†æ˜¯ç¡¬æ€§è¦æ±‚åªèƒ½ç»‘å®šä¸€ä¸ªå‡½æ•°çš„ï¼Œè€Œåˆæœ‰ä¸€äº›ä»£ç†æˆ‘ä»¬å¹¶ä¸æƒ³è®©è“å›¾è§¦ç¢°åˆ°ï¼Œå¦‚æœä¸æ‹†å¼€ï¼Œè¿™äº›éƒ½æ˜¯æ²¡åŠæ³•ä¿è¯çš„ï¼Œç¨‹åºçš„å¥å£®æ€§ä¼šé™ä½</li></ol><h3 id="ä»£ç†çš„å£°æ˜"><a class="anchor" href="#ä»£ç†çš„å£°æ˜">#</a> ä»£ç†çš„å£°æ˜</h3><table><thead><tr><th>ä»£ç†ç±»å‹</th><th>å®å£°æ˜</th></tr></thead><tbody><tr><td>å•æ’­ä»£ç†</td><td>DECLARE_DELEGATE_* / DECLARE_DELEGATE_RetVal_*</td></tr><tr><td>å¤šæ’­ä»£ç†</td><td>DECLARE_MULTICAST_DELEGATE_*</td></tr><tr><td>åŠ¨æ€å•æ’­ä»£ç†</td><td>DECLARE_DYNAMIC_DELEGATE_* / DECLARE_DYNAMIC_DELEGATE_RetVal_*</td></tr><tr><td>åŠ¨æ€å¤šæ’­ä»£ç†</td><td>DECLARE_DYNAMIC_MULTICAST_DELEGATE_*</td></tr></tbody></table><p>æ³¨ï¼š* è¡¨ç¤ºä¸åŒå‚æ•°ä¸ªæ•°</p><h3 id="ä»£ç†çš„ç»‘å®š"><a class="anchor" href="#ä»£ç†çš„ç»‘å®š">#</a> ä»£ç†çš„ç»‘å®š</h3><ul><li><p><strong>å•æ’­ä»£ç†ï¼š</strong></p><table><thead><tr><th>ç»‘å®šå‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>BindStatic</td><td>ç»‘å®š C++ çš„ Static å‡½æ•°</td></tr><tr><td>BindRaw</td><td>ç»‘å®š C++ å¯¹è±¡çš„æˆå‘˜å‡½æ•°</td></tr><tr><td>BindLambda</td><td>ç»‘å®š Lambda å‡½æ•°ï¼ˆå¯¹ Lambda æ‰€å±å¯¹è±¡æŒæœ‰å¼±å¼•ç”¨</td></tr><tr><td>BindWeakLambda</td><td>ç»‘å®š UObject çš„ Lambda å‡½æ•°ï¼ˆå¯¹ Lambda æ‰€å±å¯¹è±¡æŒæœ‰å¼±å¼•ç”¨</td></tr><tr><td>BindSP</td><td>ç»‘å®šå…±äº«æŒ‡é’ˆæŒ‡å‘çš„ C++ å¯¹è±¡çš„æˆå‘˜å‡½æ•°</td></tr><tr><td>BindThreadSafeSP</td><td>ç»‘å®šçº¿ç¨‹å®‰å…¨çš„å…±äº«æŒ‡é’ˆæŒ‡å‘çš„ C++ å¯¹è±¡çš„æˆå‘˜å‡½æ•°</td></tr><tr><td>BindUObject</td><td>ç»‘å®š UObject å¯¹è±¡çš„æˆå‘˜å‡½æ•°ï¼ˆå¯¹è¯¥ UObject æŒæœ‰å¼±å¼•ç”¨</td></tr><tr><td>BindUFunction</td><td>ç»‘å®š UObject å¯¹è±¡çš„ UFunction å‡½æ•°ï¼ˆå¯¹è¯¥ UObject æŒæœ‰å¼±å¼•ç”¨</td></tr></tbody></table></li><li><p><strong>å¤šæ’­ä»£ç†ï¼š</strong></p><table><thead><tr><th>ç»‘å®šå‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>AddStatic</td><td>AddStatic(FuncPtr, Vars...)</td></tr><tr><td>AddRaw</td><td>AddRaw(UObject*, FuncAddress)</td></tr><tr><td>AddLambda</td><td>AddLambda(Functor, Vars...)</td></tr><tr><td>AddWeakLambda</td><td>AddWeakLambda(UObject*, Functor, Vars...)</td></tr><tr><td>AddSP</td><td>AddSP(TSharedRef, FuncAddress)</td></tr><tr><td>AddThreadSafeSP</td><td>AddThreadSafeSP(TSharedRef, FuncAddress)</td></tr><tr><td>AddUObject</td><td>AddUObject(UObject*, FuncAddress)</td></tr><tr><td>AddUFunction</td><td>AddUFunction(UObject*,STATIC_FUNCTION_FNAME(TEXT(&quot;UClassName::FuncName&quot;)))</td></tr></tbody></table></li><li><p><strong>åŠ¨æ€å•æ’­ä»£ç†ï¼š</strong></p><table><thead><tr><th>ç»‘å®šå‡½æ•° / å®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>BindUFunction</td><td>BindUFunction(UObject*,STATIC_FUNCTION_FNAME(TEXT(&quot;UClassName::FuncName&quot;)))</td></tr><tr><td>BindDynamic</td><td>BindDynamic(UObject*, FuncPtr)</td></tr></tbody></table></li><li><p><strong>åŠ¨æ€å¤šæ’­ä»£ç†ï¼š</strong></p><table><thead><tr><th>ç»‘å®šå‡½æ•°</th><th></th></tr></thead><tbody><tr><td>Add</td><td>Add(FScriptDelegate)ï¼ŒFScriptDelegate.BindUFunction(UObject*, FuncPtr)</td></tr><tr><td>AddUnique</td><td>åŒä¸Šï¼Œé‡å¤æ·»åŠ ä¼šæŠ¥é”™</td></tr><tr><td>AddDynamic</td><td>å¯ä»¥ä¸å€ŸåŠ© &quot;FScriptDelegate&quot; ç›´æ¥ç»‘å®šï¼ŒAddDynamic (UObject*, FuncPtr)</td></tr><tr><td>AddUniqueDynamic</td><td>åŒä¸Šï¼Œé‡å¤æ·»åŠ ä¼šæŠ¥é”™</td></tr></tbody></table><p>ä¸çŸ¥é“è¯»è€…ä»¬ä¼šä¸ä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¤šç»‘å®šå‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç»Ÿä¸€æˆä¸€ä¸ªæ¥å£ï¼Ÿå…¶å®æ˜¯å› ä¸ºç»‘å®šä¸åŒç±»å‹å‡½æ•°éœ€è¦å¯¹ç»‘å®šçš„ &quot;FDelegate&quot; åšä¸åŒçš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•é€šè¿‡åˆ¤æ–­ä¼ è¿›æ¥çš„å‡½æ•°æŒ‡é’ˆæ¥åˆ¤æ–­æ˜¯ä»€ä¹ˆç±»å‹çš„å‡½æ•°ï¼Œæœ‰çš„è¯»è€…å°±ä¼šè¯´äº†ï¼šåŠ ä¸ª Enum æ¥è¡¨ç¤ºå‡½æ•°ç±»å‹ä¸è¡Œå—ï¼Ÿç¡®å®å¯ä»¥ï¼Œä½†æ¯ç§ç±»å‹çš„å‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå¦‚æœå¼ºè¡Œç»Ÿä¸€ï¼Œä¼šå¯¼è‡´å‚æ•°çš„å†—ä½™ã€‚è€Œä¸”æˆ‘ä¸ªäººè®¤ä¸ºæ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºæ‹†å¼€å¯ä»¥è®©ä»£ç æ›´ç›´è§‚æ›´æ˜“äºç†è§£ã€‚</p></li></ul><h3 id="ä»£ç†çš„è§¦å‘"><a class="anchor" href="#ä»£ç†çš„è§¦å‘">#</a> ä»£ç†çš„è§¦å‘</h3><table><thead><tr><th>ä»£ç†ç±»å‹</th><th>è§¦å‘å‡½æ•°</th></tr></thead><tbody><tr><td>å•æ’­ä»£ç†</td><td>Execute / ExecuteIfBound | Execute (æœ‰è¿”å›å€¼)</td></tr><tr><td>å¤šæ’­ä»£ç†</td><td>Broadcastï¼ˆä¸ä¸€å®šæŒ‰ç»‘å®šé¡ºåºæ‰§è¡Œ</td></tr><tr><td>åŠ¨æ€å•æ’­ä»£ç†</td><td>åŒå•æ’­</td></tr><tr><td>åŠ¨æ€å¤šæ’­ä»£ç†</td><td>åŒå¤šæ’­</td></tr></tbody></table><h3 id="ä»£ç†çš„è§£ç»‘"><a class="anchor" href="#ä»£ç†çš„è§£ç»‘">#</a> ä»£ç†çš„è§£ç»‘</h3><table><thead><tr><th>ä»£ç†ç±»å‹</th><th>è§£ç»‘å‡½æ•°</th></tr></thead><tbody><tr><td>å•æ’­ä»£ç†</td><td>UnBind() / Clear()</td></tr><tr><td>å¤šæ’­ä»£ç†</td><td>Remove(Handle) / RemoveAll(Object) / Clear()</td></tr><tr><td>åŠ¨æ€å•æ’­ä»£ç†</td><td>åŒå•æ’­</td></tr><tr><td>åŠ¨æ€å¤šæ’­ä»£ç†</td><td>åŒå¤šæ’­ (Handle -&gt; FScriptDelegate) + RemoveDynamic (UObject* , FunctionPtr)</td></tr></tbody></table><p>ä»£ç†çš„ä½¿ç”¨ç¯‡åˆ°æ­¤ç»“æŸï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›å…¶ä»–å®ç”¨æ€§æ¯”è¾ƒå¼ºçš„å‡½æ•°ï¼Œæ¯”å¦‚ &quot;IsBound&quot; ç­‰ã€‚è¯»è€…å¯ä»¥è‡ªè¡Œåˆ°å®˜æ–¹æ–‡æ¡£ä¸­äº†è§£</p><hr><h2 id="ä»£ç†åœ¨æºç ä¸­çš„å®ç°"><a class="anchor" href="#ä»£ç†åœ¨æºç ä¸­çš„å®ç°">#</a> ä»£ç†åœ¨æºç ä¸­çš„å®ç°</h2><p>æºç ä¸­å®ç°ä»£ç†çš„ç±»å…¶å®å¹¶ä¸å¤šä½†ä¹Ÿä¸å°‘ï¼Œæˆ‘è§‰å¾—ç›´æ¥æŠŠç±»ç½—åˆ—å‡ºæ¥åˆ†æï¼Œä¸å¦‚ä»æˆ‘ä»¬è®¤è¯†çš„å®æˆ–è€…å‡½æ•°å‡ºå‘ï¼Œä¸€æ­¥ä¸€æ­¥åœ°æ¥è¿‘åº•å±‚ç±»ï¼Œå› ä¸ºè¿™æ ·é€»è¾‘æ€§ä¼šæ›´å¼ºï¼Œæ›´æ˜“äºç†è§£ï¼Œè€Œä¸”è¿˜èƒ½é€‚å½“åœ°æ€è€ƒå¼•æ“å¦‚æ­¤å®ç°ä»£ç†å…¶èƒŒåçš„åŸå› æ˜¯ä»€ä¹ˆï¼Œæˆ‘è®¤ä¸ºç†è§£è¿™äº›æ¯”è¯»æ‡‚æºç æ›´ä¸ºé‡è¦ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ ğŸ˜ƒ</p><h3 id="ä»-declare_delegate-å‡ºå‘"><a class="anchor" href="#ä»-declare_delegate-å‡ºå‘">#</a> ä» DECLARE_DELEGATE () å‡ºå‘</h3><p>æˆ‘ä»¬è¦ç”¨ä»£ç†ï¼Œé‚£å°±ç¦»ä¸å¼€è¿™ä¸ªå®ï¼Œæ‰€ä»¥è¦å…ˆçœ‹çœ‹è¿™ä¸ªå®æ˜¯æ€ä¹ˆå®ç°çš„</p><p></p><figure class="highlight c++"><figcaption><span>DECLARE_DELEGATE</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateCombinations.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DECLARE_DELEGATE( DelegateName ) FUNC_DECLARE_DELEGATE( DelegateName, void )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰äº†ä¸€ä¸ªç±»å‹ TDelegate&lt;ReturnType(__VA_ARGS__)&gt;ï¼Œå…¶å®šä¹‰åœ¨ä¸‹é¢</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FUNC_DECLARE_DELEGATE( DelegateName, ReturnType, ... ) \</span></span><br><span class="line"><span class="meta">	typedef TDelegate<span class="meta-string">&lt;ReturnType(__VA_ARGS__)&gt;</span> DelegateName;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ¿ç±»ï¼Œå°†å‡½æ•°ç­¾åå’Œä»£ç†ç­–ç•¥è”ç³»èµ·æ¥ï¼Œå‡½æ•°ç­¾åä¸º void() ï¼Œä»£ç†ç­–ç•¥ä½¿ç”¨é»˜è®¤ç­–ç•¥</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DelegateSignature, <span class="keyword">typename</span> UserPolicy = FDefaultDelegateUserPolicy&gt;</span><br><span class="line">class TDelegate</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// é™æ€æ–­è¨€ï¼Œå‡½æ•°ç­¾åçš„sizeä¸º0</span></span><br><span class="line">	<span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(DelegateSignature) == <span class="number">0</span>, <span class="string">&quot;Expected a function signature for the delegate template parameter&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤ç­–ç•¥åªæ˜¯ä¸ºä¸‰ä¸ªç±»(éƒ½å¾ˆé‡è¦ï¼Œä¸‹æ–‡è§£æ)é‡å‘½åï¼Œæ²¡æœ‰å±æ€§ï¼Œä¹Ÿæ²¡æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FDefaultDelegateUserPolicy</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">using</span> FDelegateInstanceExtras  = IDelegateInstance;</span><br><span class="line">	<span class="keyword">using</span> FDelegateExtras          = FDelegateBase;</span><br><span class="line">	<span class="keyword">using</span> FMulticastDelegateExtras = TMulticastDelegateBase&lt;FDefaultDelegateUserPolicy&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ¿åç‰¹åŒ–</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> InRetValType, <span class="keyword">typename</span>... ParamTypes, <span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TDelegate</span>&lt;</span><span class="built_in">InRetValType</span>(ParamTypes...), UserPolicy&gt; : <span class="keyword">public</span> TDelegateBase&lt;UserPolicy&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...... </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹å‡ºï¼Œå…¶å®å’±çš„å®å°±æ˜¯åœ¨å®šä¹‰ä¸€ä¸ª &quot;TDelegate&lt;void (), ..., FDefaultDelegateUserPolicy&gt;&quot; çš„ä»£ç†ï¼Œå…¶ä¸­å¯å˜å‚æ•°ä¸ºç©ºï¼ˆå¦‚æœæœ‰æœ‹å‹ç†è§£ä¸äº†è¿™æ®µä»£ç ï¼Œå»ºè®®å…ˆå›å»è¡¥ä¸€ä¸‹ C++ï¼‰</p><p>åˆ°è¿™é‡Œå…¶å®æˆ‘ä»¬å°±å·²ç»å®šä¹‰å¥½ä¸€ä¸ªä»£ç†ç±»äº†ã€‚è‡³äº &quot;FDefaultDelegateUserPolicy&quot; å’Œ &quot;TDelegate&quot; ä¸¤ä¸ªç±»ï¼Œæˆ‘æƒ³ç»“åˆä»£ç†çš„ç»‘å®šå’Œè§¦å‘æ¥å…·ä½“åˆ†æï¼Œé‚£å’±å°±æ¥çœ‹çœ‹å¼•æ“æ˜¯æ€ä¹ˆå¸®æˆ‘ä»¬ç»‘å®šä»£ç†çš„å§ ï¼‰</p><h3 id="ç†è§£-binduobject"><a class="anchor" href="#ç†è§£-binduobject">#</a> ç†è§£ BindUObject ()</h3><p>å¦‚å‰æ–‡æˆ‘ä»¬æ€»ç»“çš„ä¸€æ ·ï¼Œä»£ç†çš„ç»‘å®šå…¶å®æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œä½†æ˜¯å®ç°åŸºæœ¬ä¹Ÿéƒ½å¤§åŒå°å¼‚ã€‚æ‰€ä»¥è¿™é‡Œå’±åªå¯¹ &quot;BindUObject&quot; å‡½æ•°è¿›è¡Œåˆ†æ</p><h4 id="binduobject"><a class="anchor" href="#binduobject">#</a> BindUObject</h4><p></p><figure class="highlight c++"><figcaption><span>BindUObject</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateSignatureImpl.inl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> InRetValType, <span class="keyword">typename</span>... ParamTypes, <span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TDelegate</span>&lt;</span><span class="built_in">InRetValType</span>(ParamTypes...), UserPolicy&gt; : <span class="keyword">public</span> TDelegateBase&lt;UserPolicy&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> UserClass, <span class="keyword">typename</span>... VarTypes&gt;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">BindUObject</span><span class="params">(<span class="keyword">const</span> UserClass* InUserObject, <span class="keyword">typename</span> TMemFunPtrType&lt;<span class="literal">true</span>, UserClass, RetValType (ParamTypes..., VarTypes...)&gt;::Type InFunc, VarTypes... Vars)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        *<span class="keyword">this</span> = <span class="built_in">CreateUObject</span>(InUserObject, InFunc, Vars...);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 	&quot;TMemFunPtrType&quot; çš„å®šä¹‰</span></span><br><span class="line"><span class="comment">        template &lt;typename Class, typename RetType, typename... ArgTypes&gt;</span></span><br><span class="line"><span class="comment">        struct TMemFunPtrType&lt;false, Class, RetType(ArgTypes...)&gt;</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            typedef RetType (Class::* Type)(ArgTypes...);</span></span><br><span class="line"><span class="comment">        &#125;;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> UserClass, <span class="keyword">typename</span>... VarTypes&gt;</span><br><span class="line">    <span class="function">UE_NODISCARD <span class="keyword">inline</span> <span class="keyword">static</span> TDelegate&lt;<span class="title">RetValType</span><span class="params">(ParamTypes...)</span>, UserPolicy&gt; <span class="title">CreateUObject</span><span class="params">(<span class="keyword">const</span> UserClass* InUserObject, <span class="keyword">typename</span> TMemFunPtrType&lt;<span class="literal">true</span>, UserClass, RetValType (ParamTypes..., VarTypes...)&gt;::Type InFunc, VarTypes... Vars)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        TDelegate&lt;<span class="built_in">RetValType</span>(ParamTypes...), UserPolicy&gt; Result;</span><br><span class="line">        TBaseUObjectMethodDelegateInstance&lt;<span class="literal">true</span>, <span class="keyword">const</span> UserClass, FuncType, UserPolicy, VarTypes...&gt;::<span class="built_in">Create</span>(Result, InUserObject, InFunc, Vars...);</span><br><span class="line">        <span class="keyword">return</span> Result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">bool</span> bConst, <span class="class"><span class="keyword">class</span> <span class="title">UserClass</span>, <span class="title">typename</span> <span class="title">WrappedRetValType</span>, <span class="title">typename</span>... <span class="title">ParamTypes</span>, <span class="title">typename</span> <span class="title">UserPolicy</span>, <span class="title">typename</span>... <span class="title">VarTypes</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TBaseUObjectMethodDelegateInstance</span>&lt;</span>bConst, UserClass, <span class="built_in">WrappedRetValType</span>(ParamTypes...), UserPolicy, VarTypes...&gt; : <span class="keyword">public</span> TCommonDelegateInstanceState&lt;<span class="built_in">WrappedRetValType</span>(ParamTypes...), UserPolicy, VarTypes...&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">    <span class="keyword">using</span> Super             = TCommonDelegateInstanceState&lt;<span class="built_in">WrappedRetValType</span>(ParamTypes...), UserPolicy, VarTypes...&gt;;</span><br><span class="line">	<span class="keyword">using</span> RetValType        = <span class="keyword">typename</span> Super::RetValType;</span><br><span class="line">	<span class="keyword">using</span> UnwrappedThisType = TBaseUObjectMethodDelegateInstance&lt;bConst, UserClass, <span class="built_in">RetValType</span>(ParamTypes...), UserPolicy, VarTypes...&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ è¯¥ç±»çš„åŒæ—¶ï¼Œæ„é€ åŸºç±» &quot;TCommonDelegateInstanceState&quot;ï¼Œ</span></span><br><span class="line">    <span class="comment">// å¯ä»¥çœ‹å‡ºå…¶åŸºç±»åªæ˜¯ç”¨æ¥å¤„ç†ä¸å®šå‚æ•°çš„ï¼ŒåŸºç±»çš„å®šä¹‰åœ¨ä¸‹é¢</span></span><br><span class="line">    <span class="built_in">TBaseUObjectMethodDelegateInstance</span>(UserClass* InUserObject, FMethodPtr InMethodPtr, VarTypes... Vars)</span><br><span class="line">        : <span class="built_in">Super</span>(Vars...)</span><br><span class="line">        , <span class="built_in">UserObject</span>(InUserObject)</span><br><span class="line">        , <span class="built_in">MethodPtr</span> (InMethodPtr)</span><br><span class="line">	&#123;	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æä¾›ç»™å¤–éƒ¨è°ƒç”¨çš„ç»Ÿä¸€æ„é€ æ¥å£</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Create</span><span class="params">(FDelegateBase&amp; Base, UserClass* InUserObject, FMethodPtr InFunc, VarTypes... Vars)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">        <span class="comment">// åœ¨ä¼ è¿›æ¥çš„ &quot;FDelegateBase&quot; ä¸­æ„é€ ä¸€ä¸ªè¯¥ç±»å¯¹è±¡ã€‚æ³¨æ„ï¼è¿™é‡Œæ„é€ çš„ç±»å¯¹è±¡å¹¶ä¸æ˜¯ &quot;FDelegateBase&quot; çš„å­ç±»ï¼Œè€Œæ˜¯ &quot;IDelegateInstance&quot; çš„å­ç±»ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ª &quot;FDelegateBase&quot; çš„å¤´åœ°å€é‡Œé¢ï¼Œæ„é€ ä¸€ä¸ª &quot;IDelegateInstance&quot;ï¼ŒåŸå› ä¸‹æ–‡è¯¦ç»†è§£æ</span></span><br><span class="line">		<span class="keyword">new</span> (Base) <span class="built_in">UnwrappedThisType</span>(InUserObject, InFunc, Vars...);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç»‘å®šçš„UObjectçš„å¼±æŒ‡é’ˆ(ä¸å‚ä¸å¼•ç”¨è®¡æ•°)</span></span><br><span class="line">	TWeakObjectPtr&lt;UserClass&gt; UserObject;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// C++æˆå‘˜å‡½æ•°æŒ‡é’ˆ</span></span><br><span class="line">	FMethodPtr MethodPtr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿è‡ª &quot;IDelegateInstance&quot;ï¼Œä¸€ä¸ªå­˜ç€ &quot;payload&quot; å…ƒç»„å’Œ &quot;DelegateHandle&quot; ä¿¡æ¯çš„æ¨¡æ¿ç±»ï¼Œä¸‹æ–‡ä¼šå¯¹ä¸¤ä¸ªå±æ€§è¿›è¡Œåˆ†æ</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> InRetValType, <span class="keyword">typename</span>... ParamTypes, <span class="keyword">typename</span> UserPolicy, <span class="keyword">typename</span>... VarTypes&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCommonDelegateInstanceState</span>&lt;</span><span class="built_in">InRetValType</span>(ParamTypes...), UserPolicy, VarTypes...&gt; : IBaseDelegateInstance&lt;<span class="built_in">InRetValType</span>(ParamTypes...), UserPolicy&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="keyword">using</span> RetValType = InRetValType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// å°†ä¸å®šå‚æ•°å­˜åˆ° &quot;Payload&quot; å…ƒç»„é‡Œé¢ï¼Œé»˜è®¤å€¼åˆå§‹åŒ–ä»£ç†å¥æŸ„</span></span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">TCommonDelegateInstanceState</span><span class="params">(VarTypes... Vars)</span></span></span><br><span class="line"><span class="function">		: Payload(Vars...)</span></span><br><span class="line"><span class="function">		, Handle (FDelegateHandle::GenerateNewHandle)</span></span><br><span class="line"><span class="function">	&#123;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FDelegateHandle <span class="title">GetHandle</span><span class="params">()</span> <span class="keyword">const</span> <span class="keyword">final</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Handle;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// &quot;TTuple&quot; å…ƒç»„ï¼Œç”¨æ¥å­˜ä¸€äº›ä¸å˜çš„å‚æ•°(å¦‚æœæœ‰) å’Œ &quot;Invoke&quot;(æ‰§è¡Œ)å‡½æ•°</span></span><br><span class="line">	TTuple&lt;VarTypes...&gt; Payload;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è¯¥ä»£ç†çš„å¥æŸ„ï¼Œ&quot;FDelegateHandle&quot; ä»£ç†å¥æŸ„ç±»</span></span><br><span class="line">	FDelegateHandle Handle;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>ä¸Šé¢è¿™æ®µä»£ç çœ‹èµ·æ¥ä¼¼ä¹å¹²äº†å¾ˆå¤šäº‹ï¼Œå®é™…ä¸Šåªæ˜¯åœ¨å’±çš„ &quot;FDelegateBase&quot; ä¸­æ„é€ äº†ä¸€ä¸ª &quot;IDelegateInstance&quot;ï¼Œå¹¶åˆå§‹åŒ–ä»–çš„ä¸€äº›å‚æ•°ï¼ŒåŒ…æ‹¬ï¼šå¼•ç”¨å¯¹è±¡çš„å¼±æŒ‡é’ˆï¼Œç»‘å®šçš„ C++ å‡½æ•°æŒ‡é’ˆï¼ŒPayload å‚æ•° (å¯ä»¥æ²¡æœ‰)ï¼Œé»˜è®¤çš„ DelegateHandleã€‚ï¼ˆå¦‚æœè¿˜æ˜¯çœ‹ä¸æ‡‚ï¼Œé‚£ä¸€å®šå¾—å¥½å¥½è¡¥ä¸€è¡¥ C++ å•Šï¼Œæœ‹å‹ï¼‰</p><p>çªç„¶æƒ³èµ·ä¸€ä¸ªæ›¾ç»å›°æ‰°äº†æˆ‘å¾ˆä¹…çš„ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¿™é‡Œéƒ½æ‹¿åˆ°äº†å‡½æ•°çš„æŒ‡é’ˆäº†ï¼Œè¿˜è¦æŠŠè¿™ä¸ªå¯¹è±¡ç»™ç»‘è¿›å»ï¼Ÿå…¶å®ä¼šé—®è¿™ä¸ªé—®é¢˜ï¼Œå®Œå…¨æ˜¯å› ä¸ºå¯¹ C++ çš„ç†è§£è¿˜ä¸å¤Ÿæ·±åˆ»ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ C++ ä¸­ï¼Œç±»çš„æˆå‘˜å‡½æ•°æ˜¯å•ç‹¬å­˜åœ¨å†…å­˜ä¸­çš„ä»£ç æ®µçš„ï¼Œæ‰€æœ‰è¯¥ç±»çš„å¯¹è±¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå…¶å®éƒ½æ˜¯è®¿é—®çš„åŒæ ·ä¸€å—åœ°å€ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦æ”¹å˜ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œé‚£å°±å¿…é¡»è¦æŠŠè¿™ä¸ªå¯¹è±¡ä¹Ÿä¸€èµ·ä¼ ç»™æˆ‘ä»¬çš„ä»£ç†å¯¹è±¡ã€‚ç›¸ä¿¡èªæ˜çš„è¯»è€…ä»¬ä¸ä¼šé—®è¿™ç§é—®é¢˜ï¼Œä½†æ˜¯å…¶å®ç®—æ˜¯ä¸€ä¸ªæé†’å§ã€‚UE æ˜¯å»ºç«‹åœ¨ C++ çš„åŸºç¡€ä¸Šçš„ï¼Œæ²¡æœ‰è‰¯å¥½çš„ C++ åŸºç¡€åœ¨ç†è§£ä¸€äº›æºç å®ç°ä¸Šæ˜¯ä¼šæ¯”è¾ƒåƒåŠ›çš„ã€‚C++ yydsï¼</p><p>å…¶å®åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»æŒ–ä¸‹ä¸å°‘å‘äº†ï¼Œæ¯”å¦‚ï¼š&quot;FDefaultDelegateUserPolicy&quot; , &quot;IDelegateInstance&quot; , &quot;FDelegateBase&quot; , &quot;TMulticastDelegateBase&lt;&gt;&quot; , &quot;TTuple&lt;&gt;&quot; è¿™äº›ç±»éƒ½æ˜¯éå¸¸é‡è¦ï¼Œä¸”éœ€è¦é€ä¸ªåˆ†æçš„ã€‚å…ˆåˆ«ç€æ€¥ï¼Œå’±ä¼šåœ¨ä¸‹é¢çš„ &quot;Execute&quot; æ¥å£ä¸­ï¼Œç»™ä»–é€ä¸ªå‡»ç ´ï¼</p><h2 id="å¼€å§‹-execute"><a class="anchor" href="#å¼€å§‹-execute">#</a> å¼€å§‹ Execute</h2><p></p><figure class="highlight c++"><figcaption><span>Execute</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateSignatureImpl.inl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> InRetValType, <span class="keyword">typename</span>... ParamTypes, <span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TDelegate</span>&lt;</span><span class="built_in">InRetValType</span>(ParamTypes...), UserPolicy&gt; : <span class="keyword">public</span> TDelegateBase&lt;UserPolicy&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">FORCEINLINE RetValType <span class="title">Execute</span><span class="params">(ParamTypes... Params)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–çˆ¶ç±»çš„ &quot;DelegateInstance&quot;ï¼Œå…¶å­˜ç€ç»‘å®šçš„å¯¹è±¡å’Œå‡½æ•°çš„å¯¹è±¡ï¼Œå‡½æ•°å®šä¹‰åœ¨ä¸‹é¢</span></span><br><span class="line">        DelegateInstanceInterfaceType* LocalDelegateInstance = <span class="built_in">GetDelegateInstanceProtected</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœè¿™é‡Œè§¦å‘æ–­è¨€ï¼Œè¯´æ˜ &quot;Execute()&quot; åœ¨æœªç»‘å®šçš„æƒ…å†µä¸‹å°±è¢«è°ƒç”¨äº†ã€‚</span></span><br><span class="line">        <span class="comment">// å¯ä»¥è€ƒè™‘ä½¿ç”¨ ExecuteIfSafe() ä»£æ›¿</span></span><br><span class="line">        <span class="built_in">checkSlow</span>(LocalDelegateInstance != <span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨ç»‘å®šçš„å¯¹è±¡è°ƒç”¨ç»‘å®šçš„å‡½æ•°ï¼Œä¸‹æ–‡è§£æ</span></span><br><span class="line">        <span class="keyword">return</span> LocalDelegateInstance-&gt;<span class="built_in">Execute</span>(Params...);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">FORCEINLINE DelegateInstanceInterfaceType* <span class="title">GetDelegateInstanceProtected</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">/* å‰é¢å®šä¹‰äº† using Super = TDelegateBase&lt;UserPolicy&gt;ï¼Œç±»çš„è¯¦ç»†å®šä¹‰åœ¨ä¸‹é¢ */</span></span><br><span class="line">        <span class="keyword">return</span> (DelegateInstanceInterfaceType*)Super::<span class="built_in">GetDelegateInstanceProtected</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥çœ‹å‡º &quot;TDelegateBase&quot; æ˜¯æ²¡æœ‰å®šä¹‰ &quot;GetDelegateInstanceProtected&quot; å‡½æ•°çš„</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥å”¯ä¸€çš„å¯èƒ½å°±æ˜¯ é‚£æ˜¯å…¶åŸºç±»&quot;UserPolicy::FDelegateExtras&quot; çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">// å¾—å‡ºç»“è®º: å¼•æ“å¯¹ &quot;UserPolicy&quot; è¿™ä¸ªæ¨¡æ¿ç±»çš„å®ç°ä¸€å®šæ˜¯æœ‰ç¡¬æ€§è¦æ±‚çš„</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TDelegateBase</span> :</span> <span class="keyword">public</span> UserPolicy::FDelegateExtras</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt;</span><br><span class="line">	<span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">TMulticastDelegateBase</span>;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">using</span> Super = <span class="keyword">typename</span> UserPolicy::FDelegateExtras;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">FName <span class="title">TryGetBoundFunctionName</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE class UObject* <span class="title">GetUObject</span><span class="params">( )</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">bool</span> <span class="title">IsBound</span><span class="params">( )</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">const</span> <span class="keyword">void</span>* <span class="title">GetObjectForTimerManager</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">uint64 <span class="title">GetBoundProgramCounterForTimerManager</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">bool</span> <span class="title">IsBoundToObject</span><span class="params">( <span class="keyword">void</span> <span class="keyword">const</span>* InUserObject )</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE FDelegateHandle <span class="title">GetHandle</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<strong>&quot;Execute&quot; é‡Œé¢å…¶å®åªæ˜¯è·å–äº†ä¹‹å‰æˆ‘ä»¬ç»‘å®šå¥½çš„æ•°æ®ï¼Œå¹¶è°ƒç”¨è€Œå·²</strong>ã€‚ä½†æ˜¯ä»–æ€ä¹ˆè·å–çš„å‘¢ï¼Ÿé€šè¿‡é€æ­¥æº¯æºï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<strong>&quot;GetDelegateInstanceProtected&quot; å…¶å®æ˜¯ &quot;UserPolicy&quot; æ¨¡æ¿ä¸­çš„å‡½æ•°ï¼Œä¸”å¼•æ“å¯¹ &quot;UserPolicy&quot; çš„å®ç°æ˜¯æœ‰ç¡¬æ€§è¦æ±‚çš„</strong>ã€‚å›é¡¾ä¸€ä¸‹å’±ä¹‹å‰å®šä¹‰ä»£ç†çš„ä»£ç ï¼š</p><blockquote><p>// æ¨¡æ¿ç±»ï¼Œå°†å‡½æ•°ç­¾åå’Œä»£ç†ç­–ç•¥è”ç³»èµ·æ¥ï¼Œå‡½æ•°ç­¾åä¸º void () ï¼Œä»£ç†ç­–ç•¥ä½¿ç”¨é»˜è®¤ç­–ç•¥<br>template &lt;typename DelegateSignature, typename UserPolicy = <strong>FDefaultDelegateUserPolicy</strong>&gt;<br>class TDelegate<br>{<br>static_assert(sizeof(DelegateSignature) == 0, &quot;Expected a function signature for the delegate template parameter&quot;);<br>};</p></blockquote><p>å¯ä»¥çœ‹å‡ºï¼Œå’±çš„ &quot;UserPolicy&quot; å…¶å®å°±æ˜¯ &quot;FDefaultDelegateUserPolicy&quot;ï¼Œé‚£å’±ç›´æ¥å» &quot;FDefaultDelegateUserPolicy&quot; é‡Œé¢æ‰¾ï¼ˆ<strong>å’±ç°åœ¨çš„ç›®çš„æ˜¯ å¼„æ¸…æ¥š &quot;GetDelegateInstanceProtected&quot; æ˜¯æ€ä¹ˆè·å–åˆ°å’±ä¹‹å‰ç»‘å®šçš„å¯¹è±¡å’Œå‡½æ•°çš„</strong>ï¼‰</p><p></p><figure class="highlight c++"><figcaption><span>FDefaultDelegateUserPolicy</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateBase.h</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FDefaultDelegateUserPolicy</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">using</span> FDelegateInstanceExtras  = IDelegateInstance;</span><br><span class="line">	<span class="keyword">using</span> FDelegateExtras          = FDelegateBase;		<span class="comment">// è¿™æ˜¯æˆ‘ä»¬çš„ &quot;TDelegateBase&quot; ç»§æ‰¿çš„</span></span><br><span class="line">	<span class="keyword">using</span> FMulticastDelegateExtras = TMulticastDelegateBase&lt;FDefaultDelegateUserPolicy&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FDelegateBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt;</span><br><span class="line">	<span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">TMulticastDelegateBase</span>;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt;</span><br><span class="line">	<span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">TDelegateBase</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">FDelegateBase</span><span class="params">()</span>: DelegateSize(<span class="number">0</span>)&#123;</span>	&#125;</span><br><span class="line"></span><br><span class="line">	~<span class="built_in">FDelegateBase</span>() &#123;<span class="built_in">Unbind</span>();&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">FDelegateBase</span>(FDelegateBase&amp;&amp; Other);</span><br><span class="line"></span><br><span class="line">	FDelegateBase&amp; <span class="keyword">operator</span>=(FDelegateBase&amp;&amp; Other);</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">Unbind</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœç„¶åœ¨è¿™é‡Œï¼Œè¿™é‡Œè·å–åˆ°çš„æ˜¯ä¸€ä¸ª &quot;IDelegateInstance&quot;ï¼Œè¿™è¯´æ˜ä»€ä¹ˆ?</span></span><br><span class="line">	<span class="function">FORCEINLINE IDelegateInstance* <span class="title">GetDelegateInstanceProtected</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> DelegateSize ? (IDelegateInstance*)DelegateAllocator.<span class="built_in">GetAllocation</span>() : <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// é‡è½½ new è¿ç®—ç¬¦</span></span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="keyword">void</span>* <span class="keyword">operator</span> <span class="title">new</span><span class="params">(<span class="keyword">size_t</span> Size, FDelegateBase&amp; Base)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Base.<span class="built_in">Allocate</span>((int32)Size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸º &quot;DelegateAllocator&quot; å±æ€§åˆ†é…å†…å­˜ï¼Œåœ¨ &quot;new&quot; ä¸­è°ƒç”¨</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span>* <span class="title">Allocate</span><span class="params">(int32 Size)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (IDelegateInstance* CurrentInstance = <span class="built_in">GetDelegateInstanceProtected</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            CurrentInstance-&gt;~<span class="built_in">IDelegateInstance</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¡ç®—æ–°ä»£ç†çš„å¤§å°ï¼Œ&quot;FAlignedInlineDelegateType&quot; æ˜¯ä»£ç†ç±»å‹çš„å¯¹é½å­—èŠ‚åçš„æ¨¡æ¿ç»“æ„ä½“</span></span><br><span class="line">        <span class="comment">// å¼•æ“ä¼šæ ¹æ®ç³»ç»Ÿæ˜¯32ä½è¿˜æ˜¯64ä½è¿”å›ä¸åŒçš„å€¼ï¼Œç”¨äºåé¢çš„ &quot;ResizeAllocation&quot; é‡æ–°åˆ†é…å †å†…å­˜ã€‚</span></span><br><span class="line">        int32 NewDelegateSize = FMath::<span class="built_in">DivideAndRoundUp</span>(Size, (int32)<span class="built_in"><span class="keyword">sizeof</span></span>(FAlignedInlineDelegateType));</span><br><span class="line">        <span class="keyword">if</span> (DelegateSize != NewDelegateSize)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// ä¸º &quot;DelegateAllocator&quot; é‡æ–°åˆ†é…å†…å­˜(å­˜çš„æ˜¯FAlignedInlineDelegateTypeå‹æ•°æ®)</span></span><br><span class="line">            DelegateAllocator.<span class="built_in">ResizeAllocation</span>(<span class="number">0</span>, NewDelegateSize, <span class="built_in"><span class="keyword">sizeof</span></span>(FAlignedInlineDelegateType));</span><br><span class="line">            <span class="comment">// è®°å½•æ–°å†…å­˜çš„Size</span></span><br><span class="line">            DelegateSize = NewDelegateSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›åˆšåˆšåˆ†é…å¥½çš„å†…å­˜ &quot;FAlignedInlineDelegateType&quot; å‹æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">return</span> DelegateAllocator.<span class="built_in">GetAllocation</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	FDelegateAllocatorType::ForElementType&lt;FAlignedInlineDelegateType&gt; DelegateAllocator;</span><br><span class="line">	int32 DelegateSize;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>åˆšåˆšçš„ä»£ç å¯èƒ½çœ‹ç€å°±æœ‰ç‚¹æ™•ï¼Œå› ä¸ºç¡®å®æŒºç»•çš„ã€‚æ€»çš„æ¥è¯´å°±æ˜¯æ¨¡æ¿ç±»å¤–åŠ ç»„åˆæ¨¡å¼ã€‚</p><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼šå’±çš„ <strong>&quot;TDelegate&quot; æ˜¯ç»§æ‰¿äºå’±çš„ &quot;FDelegate&quot; çš„ã€‚è€Œè¿™ä¸ª &quot;FDelegate&quot; åªæ˜¯ &quot;UserPolicy&quot; è¿™ä¸ªç»„åˆä¸­ä¸€éƒ¨åˆ†ï¼Œä¸” &quot;UserPolicy&quot; æ˜¯ä½œä¸º &quot;FDelegate&quot; çš„æ¨¡æ¿ä¼ è¿›æ¥çš„</strong>ã€‚è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ ä½è§£è€¦é«˜èšåˆï¼Œä¸” &quot;UserPolicy&quot; å¯è¢«é‡å†™ï¼Œä»£ç çš„å¯æ‹“å±•æ€§æ›´å¼ºã€‚</p><p>å…¶æ¬¡ï¼Œ<strong>&quot;FDelegate&quot; ä¸­å…¶å®æ˜¯å­˜ç€ &quot;IDelegateInstance&quot; çš„ï¼Œæ€ä¹ˆç†è§£ï¼Ÿç®€å•æ¥è¯´ï¼Œ&quot;FDelegate&quot; åªæ˜¯ &quot;IDelegateInstance&quot; çš„åŒ…è£…å™¨ï¼ŒçœŸæ­£å­˜ç€ç»‘å®šå¯¹è±¡ä¸ç»‘å®šå‡½æ•°çš„æ˜¯ &quot;IDelegateInstance&quot;ï¼Œ&quot;FDelegate&quot; ä¸­åªæä¾› &quot;IDelegateInstance&quot; çš„æ„é€ æ–¹æ³•</strong> (&quot;BindUObject&quot; ç­‰)</p><p>çŸ¥é“äº†è¿™äº›ï¼Œæˆ‘ä»¬å†åˆ†æä¸Šé¢çš„ä»£ç ã€‚</p><ol><li><p>é¦–å…ˆè°ƒç”¨çš„æ˜¯ &quot;GetDelegateInstanceProtected&quot;ï¼Œè¿™æ˜¯åœ¨è·å–è¯¥ &quot;FDelegate&quot;(ä»£ç†åŒ…è£…å™¨) å¯¹è±¡çš„ &quot;DelegateAllocator&quot; (ä»£ç†å†…å­˜) ä¸­çš„ &quot;Allocation&quot;(å†…å­˜æ•°æ®) ï¼Œè€Œå†…å­˜æ•°æ®åˆæ˜¯ä¸ª &quot;IDelegateInstance&quot;(ä»£ç†å®ä¾‹) å¯¹è±¡ï¼Œè®¾è®¡æ¨¡å¼å­¦å¾—å¥½çš„åŒå­¦å°±ç›´æ¥ååº”è¿‡æ¥äº†ï¼Œå¥½ä¸€ä¸ªç»„åˆæ¨¡å¼ï¼è¿™ä¸ª &quot;IDelegateInstance&quot; æ‹¥æœ‰æ‰€æœ‰å…³äºè¿™ä¸ªä»£ç†çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p></li><li><p>å…¶æ¬¡æˆ‘ä»¬è¦ææ¸…æ¥šï¼Œè¿™ä¸ª &quot;IDelegateInstance&quot; æ˜¯ä»€ä¹ˆæ—¶å€™è¢«åˆå§‹åŒ–çš„ï¼Ÿé‚£ä½œä¸º C++ çš„å­¦ç”Ÿï¼Œæˆ‘ä»¬ç¬¬ä¸€ååº”å½“ç„¶æ˜¯ &quot;new&quot; è¿ç®—ç¬¦å•Šã€‚ç¡®å®æ˜¯ &quot;new&quot; è¿ç®—ç¬¦ï¼Œä½†ä¸æ˜¯ä¸Šé¢ &quot;FDelegateBase&quot; é‡Œé¢é‡è½½çš„ï¼Œè€Œæ˜¯ &quot;IDelegateInstance&quot; æ¥å£çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ä¸Šé¢é‡è½½çš„ &quot;new&quot; æ˜¯ä¸º &quot;FDelegateBase&quot; çš„ &quot;DelegateAllocator&quot; åˆ†é…å †å†…å­˜çš„ï¼Œä»¥ä¾¿å°† &quot;IDelegateInstance&quot; å­˜è¿›å»</p></li><li><p>é‚£æ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„å‘¢ï¼Ÿè¿™å°±å¾—å›å»æ‰¾æ‰¾å’±çš„ &quot;BindUObject&quot; äº†ï¼š</p></li></ol><blockquote><p>&quot;BindUObject&quot; çš„è°ƒç”¨é“¾ä¸­ï¼Œè°ƒç”¨äº†ä»¥ä¸‹å‡½æ•°ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>IDelegateInstance</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateSignatureImpl.inl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... VarTypes&gt;</span><br><span class="line"><span class="function">UE_NODISCARD <span class="keyword">inline</span> <span class="keyword">static</span> TDelegate&lt;<span class="title">RetValType</span><span class="params">(ParamTypes...)</span>, UserPolicy&gt; <span class="title">CreateStatic</span><span class="params">(<span class="keyword">typename</span> TIdentity&lt;RetValType (*)(ParamTypes..., VarTypes...)&gt;::Type InFunc, VarTypes... Vars)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// &quot;TDelegate&quot; çš„é»˜è®¤æ„é€ å‡½æ•°ä»€ä¹ˆéƒ½æ²¡åšï¼Œä½†ä¼šè°ƒç”¨åŸºç±» &quot;FDelegate&quot; çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œè™½ç„¶ä¹Ÿä»€ä¹ˆéƒ½æ²¡åš(å¹¶ä¸ä¼šè°ƒç”¨é‡è½½çš„new)</span></span><br><span class="line">    TDelegate&lt;<span class="built_in">RetValType</span>(ParamTypes...), UserPolicy&gt; Result;</span><br><span class="line">    TBaseStaticDelegateInstance&lt;FuncType, UserPolicy, VarTypes...&gt;::<span class="built_in">Create</span>(Result, InFunc, Vars...);</span><br><span class="line">    <span class="keyword">return</span> Result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;TBaseStaticDelegateInstance&quot; æä¾›ç»™å¤–éƒ¨è°ƒç”¨çš„ç»Ÿä¸€æ„é€ æ¥å£</span></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Create</span><span class="params">(FDelegateBase&amp; Base, UserClass* InUserObject, FMethodPtr InFunc, VarTypes... Vars)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨ä¼ è¿›æ¥çš„ &quot;FDelegateBase&quot; ä¸­æ„é€ ä¸€ä¸ªè¯¥ç±»å¯¹è±¡ã€‚æ³¨æ„ï¼è¿™é‡Œæ„é€ çš„ç±»å¯¹è±¡å¹¶ä¸æ˜¯ &quot;FDelegateBase&quot; çš„å­ç±»ï¼Œè€Œæ˜¯ &quot;IDelegateInstance&quot; çš„å­ç±»ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ª &quot;FDelegateBase&quot; çš„å¤´åœ°å€é‡Œé¢ï¼Œæ„é€ ä¸€ä¸ª &quot;IDelegateInstance&quot;ï¼ŒåŸå› ä¸‹æ–‡è¯¦ç»†è§£æ</span></span><br><span class="line">	<span class="keyword">new</span> (Base) <span class="built_in">UnwrappedThisType</span>(InUserObject, InFunc, Vars...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p></blockquote><p>è¿™é‡Œçš„ &quot;UnwrappedThisType&quot;ï¼Œå…¶å®å°±æ˜¯å’± &quot;IDelegateInstance&quot; çš„å­ç±»ã€‚é‚£è¿™ä¸€æ­¥åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</p><ol start="2"><li>é¦–å…ˆä¼šè°ƒç”¨æ¥å£ä¸‹çš„ç±» &quot;TCommonDelegateInstanceState&quot; çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–è¯¥ä»£ç†çš„ &quot;payload&quot; å’Œ &quot;DelegateHandle&quot;</li><li>å…¶æ¬¡æ˜¯è°ƒç”¨ &quot;TBaseUObjectMethodDelegateInstance&quot; çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–è¯¥ä»£ç†æ‰€ç»‘å®šçš„ &quot;UObject&quot; åŠå…¶å‡½æ•°ï¼ˆ &quot;TBaseUObjectMethodDelegateInstance&quot; å³æ˜¯ &quot;UnwrappedThisType&quot;ï¼‰</li><li>æœ€åå†æŠŠåˆå§‹åŒ–å¥½çš„ &quot;IDelegateInstance&quot; å¯¹è±¡ç»™æ”¾åˆ° &quot;Base&quot; é‡Œé¢</li></ol><p>æœ‰çš„åŒå­¦å¯èƒ½å°±è¦é—®äº†ï¼Œä½ è¿™ä¸ª &quot;Base&quot; ç©ºé—´å¤Ÿä¸å¤Ÿå•Šï¼Œç›´æ¥åœ¨ä¸Šé¢ &quot;new&quot; ä¸€ä¸ª &quot;IDelegateInstance&quot; ä¸ä¼šæº¢å‡ºå—ï¼Ÿé¦–å…ˆæˆ‘ä»¬çŸ¥é“ï¼Œ&quot;IDelegateInstance&quot; å¹¶ä¸ä¼šç›´æ¥å­˜åœ¨ &quot;FDelegateBase&quot; é‡Œé¢ï¼Œè€Œæ˜¯å­˜åœ¨å…¶ &quot;DelegateAllocator&quot; ä¸­çš„ &quot;Data&quot; é‡Œé¢ï¼Œ&quot;Data&quot; æŒ‡å‘å¦ä¸€å—å †å†…å­˜ã€‚è€Œ &quot;GetDelegateInstanceProtected&quot; å®é™…ä¸Šå°±åªæ˜¯æŠŠ &quot;Data&quot; æ‹¿è¿‡æ¥åšä¸€æ¬¡å¼ºåˆ¶ç±»å‹è½¬æ¢ç½¢äº†</p><p>å¦‚æœè¿˜æ˜¯æ²¡ç†è§£çš„è¯»è€…ï¼Œå»ºè®®å¤šçœ‹ä¸¤éå‰é¢çš„è§£é‡Šï¼Œæˆ–è€…è‡ªå·±ç¿»ç¿»æºç ï¼Œè¿™å—ç¡®å®æœ‰ç‚¹ç»•ã€‚é‚£ä¹ˆï¼Œåˆ°è¿™é‡Œå’±å°±çŸ¥é“æ€ä¹ˆè·å–åˆ°ç»‘å®šæ•°æ®äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è°ƒç”¨ <code>LocalDelegateInstance-&gt;Execute(Params...)</code> ï¼Œä»¥ä¸‹æ˜¯å…¶æºç ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>Instance.Execute</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateInstancesImpl.h</span></span><br><span class="line"></span><br><span class="line"><span class="function">RetValType <span class="title">Execute</span><span class="params">(ParamTypes... Params)</span> <span class="keyword">const</span> <span class="keyword">final</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> MutableUserClass = <span class="keyword">typename</span> TRemoveConst&lt;UserClass&gt;::Type;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å› ä¸ºæˆ‘ä»¬æ‹¥æœ‰çš„åªæ˜¯ UObject çš„å¼±æŒ‡é’ˆï¼Œæ‰€ä»¥éœ€è¦ç¡®è®¤ä¸€ä¸‹è¯¥å¯¹è±¡æ˜¯å¦ä»ç„¶å­˜åœ¨</span></span><br><span class="line">    <span class="built_in">checkSlow</span>(UserObject.<span class="built_in">IsValid</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®‰å…¨ç§»é™¤ &quot;UserObject&quot; çš„ &quot;const&quot;ï¼Œé¿å…ç¼–è¯‘å™¨æŠ¥é”™ã€‚</span></span><br><span class="line">    <span class="comment">// Safely remove const to work around a compiler issue with instantiating template permutations for </span></span><br><span class="line">	<span class="comment">// overloaded functions that take a function pointer typedef as a member of a templated class.  </span></span><br><span class="line">    <span class="comment">// In all cases where this code is actually invoked, the UserClass will already be a const pointer.</span></span><br><span class="line">    MutableUserClass* MutableUserObject = <span class="keyword">const_cast</span>&lt;MutableUserClass*&gt;(UserObject.<span class="built_in">Get</span>());</span><br><span class="line"></span><br><span class="line">    <span class="built_in">checkSlow</span>(MethodPtr != <span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">     * é€šè¿‡ &quot;payload&quot; æ¥è°ƒç”¨ç»‘å®šçš„å‡½æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">     * &quot;Payload&quot; çš„ç±»å‹ &quot;TTuple&quot;ï¼Œå…¶æœ¬èº«å¯ä»¥å­˜ä¸€äº›å˜é‡ï¼Œç”¨äº &quot;Invoke&quot; (æ‰§è¡Œ)å‡½æ•°</span></span><br><span class="line"><span class="comment">     * &quot;Invoke&quot; æ˜¯unrealä¸­éå¸¸å®ç”¨çš„å‡½æ•°ä¹‹ä¸€ï¼Œå…¶åŸç†æ˜¯é€šè¿‡å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨å‡½æ•°ï¼Œä½¿ç”¨å®Œç¾è½¬å‘æ˜¯ä¸ºäº†å…¼å®¹å·¦å³å€¼å‡½æ•°</span></span><br><span class="line"><span class="comment">     * å‚æ•°: &quot;MethodPtr&quot; æ˜¯ä¹‹å‰ç»‘å®šçš„å‡½æ•°ï¼›&quot;Params&quot; æ˜¯ä¼ è¿›æ¥è¿è¡Œçš„å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;Payload.<span class="built_in">ApplyAfter</span>(MethodPtr, MutableUserObject, Params...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> FuncType, <span class="keyword">typename</span>... ArgTypes&gt;</span><br><span class="line"><span class="function"><span class="keyword">decltype</span>(<span class="keyword">auto</span>) <span class="title">ApplyAfter</span><span class="params">(FuncType&amp;&amp; Func, ArgTypes&amp;&amp;... Args)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ &quot;this-&gt;template Get&lt;Indices&gt;()...&quot; å…¶å®æ˜¯ &quot;Payload&quot; ä¸­ä¹‹å‰å­˜çš„å‚æ•°ï¼Œå¯ä»¥ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">return</span> ::<span class="built_in">Invoke</span>(Func, Forward&lt;ArgTypes&gt;(Args)..., <span class="keyword">this</span>-&gt;<span class="keyword">template</span> Get&lt;Indices&gt;()...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å››ä¸ªé‡è½½ï¼Œåˆ†åˆ«è¿è¡Œå‡½å­ï¼Œå‡½æ•°æŒ‡é’ˆï¼Œæˆå‘˜å‡½æ•°(å¼•ç”¨å‚æ•°å’Œæ™ºèƒ½æŒ‡é’ˆå„ä¸€æ¡)ï¼Œå’±ä»¬è¿™é‡Œè°ƒç”¨çš„æ˜¾ç„¶æ˜¯å¼•ç”¨çš„æˆå‘˜å‡½æ•°:</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ReturnType, <span class="keyword">typename</span> ObjType, <span class="keyword">typename</span>... PMFArgTypes, <span class="keyword">typename</span> CallableType, <span class="keyword">typename</span>... ArgTypes&gt;</span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">auto</span> <span class="title">Invoke</span><span class="params">(ReturnType (ObjType::*PtrMemFun)(PMFArgTypes...), CallableType&amp;&amp; Callable, ArgTypes&amp;&amp;... Args)</span></span></span><br><span class="line"><span class="function">	-&gt; <span class="title">decltype</span><span class="params">((UE4Invoke_Private::DereferenceIfNecessary&lt;ObjType&gt;(Forward&lt;CallableType&gt;(Callable)).*PtrMemFun)(Forward&lt;ArgTypes&gt;(Args)...))</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (UE4Invoke_Private::DereferenceIfNecessary&lt;ObjType&gt;(Forward&lt;CallableType&gt;(Callable)).*PtrMemFun)(Forward&lt;ArgTypes&gt;(Args)...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> BaseType, <span class="keyword">typename</span> CallableType, <span class="keyword">typename</span> TEnableIf&lt;TPointerIsConvertibleFromTo&lt;<span class="keyword">typename</span> TDecay&lt;CallableType&gt;::Type, <span class="keyword">typename</span> TDecay&lt;BaseType&gt;::Type&gt;::Value&gt;::Type* = <span class="literal">nullptr</span></span><br><span class="line">    &gt;</span><br><span class="line">    FORCEINLINE <span class="keyword">auto</span> <span class="built_in">DereferenceIfNecessary</span>(CallableType&amp;&amp; Callable) -&gt; <span class="keyword">decltype</span>((CallableType&amp;&amp;)Callable)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">return</span></span> (CallableType&amp;&amp;)Callable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>çœ‹åˆ°è¿™é‡Œç›¸ä¿¡ C++ åŸºç¡€å¥½çš„åŒå­¦éƒ½æ•´æ˜ç™½äº†ã€‚å°±æ˜¯ç”¨ä¹‹å‰å­˜èµ·æ¥çš„ &quot;MethodPtr&quot; å’Œ &quot;UObject*&quot; å’Œ ä¸å®šå‚æ•°ï¼Œè°ƒç”¨ &quot;Invoke&quot; æ¥è®©è¯¥å‡½æ•°è¢«è¯¥å¯¹è±¡ä¸­æ‰§è¡Œï¼Œè‡³äºä¸€äº› C++11 çš„æ–°ç‰¹æ€§ï¼Œå’±æ”¾åˆ°å¦å¤–ä¸€ç¯‡æ–‡ç« ä¸­æ¥è®²ã€‚</p><p>åˆ°è¿™é‡Œå’±ä¹‹å‰æŒ–çš„å‘å·²ç»å…¨éƒ¨å¡«ä¸Šäº†ï¼Œè‡³äºå¤šæ’­å§”æ‰˜ï¼Œå…¶å®è·Ÿå•æ’­çš„åŸç†ä¹Ÿå·®ä¸å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åˆ†æè¿‡ç¨‹å…¶å®ä¹Ÿå·®ä¸å¤šã€‚å°±æ˜¯åˆ†æ &quot;DECLARE_MULTICATE_DELEGATE&quot;ï¼Œ&quot;AddUObject&quot; å’Œ &quot;Broadcast&quot; çš„å®ç°å°±å¯ä»¥äº†ã€‚</p><h3 id="multicastdelegate"><a class="anchor" href="#multicastdelegate">#</a> MulticastDelegate</h3><p>å› ä¸ºè·Ÿå•æ’­çš„åŸç†éå¸¸ç›¸ä¼¼ï¼Œä»¥ä¸‹åˆ†æç•¥è¿‡ä¸€äº›ç›¸ä¼¼çš„éƒ¨åˆ†</p><h4 id="declare_multicast_delegate"><a class="anchor" href="#declare_multicast_delegate">#</a> DECLARE_MULTICAST_DELEGATE</h4><p></p><figure class="highlight c++"><figcaption><span>DECLARE_MULTICAST_DELEGATE</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateCombinations.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DECLARE_MULTICAST_DELEGATE( DelegateName ) FUNC_DECLARE_MULTICAST_DELEGATE( DelegateName, void )</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FUNC_DECLARE_MULTICAST_DELEGATE( MulticastDelegateName, ReturnType, ... ) \</span></span><br><span class="line"><span class="meta">	typedef TMulticastDelegate<span class="meta-string">&lt;ReturnType(__VA_ARGS__)&gt;</span> MulticastDelegateName;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ²¡æœ‰å‡½æ•°ç­¾åçš„å¤šæ’­å°†ç›´æ¥è§¦å‘æ–­è¨€</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DelegateSignature, <span class="keyword">typename</span> UserPolicy = FDefaultDelegateUserPolicy&gt;</span><br><span class="line">class TMulticastDelegate</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(DelegateSignature) == <span class="number">0</span>, <span class="string">&quot;Expected a function signature for the delegate template parameter&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ‰è¿”å›å€¼ç±»å‹çš„å¤šæ’­å°†ç›´æ¥è§¦å‘æ–­è¨€</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RetValType, <span class="keyword">typename</span>... ParamTypes, <span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TMulticastDelegate</span>&lt;</span><span class="built_in">RetValType</span>(ParamTypes...), UserPolicy&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(RetValType) == <span class="number">0</span>, <span class="string">&quot;The return type of a multicast delegate must be void&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šæ’­æœ€å¤–å±‚ç±»ï¼Œç»§æ‰¿äº &quot;TMulticastDelegateBase&lt;&gt;&quot;</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... ParamTypes, <span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TMulticastDelegate</span>&lt;</span><span class="built_in"><span class="keyword">void</span></span>(ParamTypes...), UserPolicy&gt; : <span class="keyword">public</span> UserPolicy::FMulticastDelegateExtras</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è€æœ‹å‹äº†(å¦‚æœé‡å†™ä»£ç†ç­–ç•¥ï¼Œè®°å¾—ä¹Ÿè¦é‡å†™å®šä¹‰æ–°ä»£ç†ç±»çš„å®)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FDefaultDelegateUserPolicy</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">using</span> FDelegateInstanceExtras  = IDelegateInstance;</span><br><span class="line">	<span class="keyword">using</span> FDelegateExtras          = FDelegateBase;</span><br><span class="line">	<span class="keyword">using</span> FMulticastDelegateExtras = TMulticastDelegateBase&lt;FDefaultDelegateUserPolicy&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šæ’­æœ€æœ€åº•å±‚çš„åŸºç±»</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TMulticastDelegateBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">using</span> InvocationListType = TArray&lt;TDelegateBase&lt;UserPolicy&gt;, FMulticastInvocationListAllocatorType&gt;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// .......</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** ä¿å­˜è¦è°ƒç”¨çš„å§”æ‰˜å®ä¾‹çš„æ•°ç»„ */</span></span><br><span class="line">	InvocationListType InvocationList;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** ç”¨äº ç§»é™¤å§”æ‰˜å®ä¾‹åï¼Œæ”¶ç¼© &quot;InvocationList&quot;. */</span></span><br><span class="line">	int32 CompactionThreshold;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** &quot;InvocationList&quot; é”è®¡æ•°å™¨ */</span></span><br><span class="line">	<span class="keyword">mutable</span> int32 InvocationListLockCount;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹å‡ºï¼Œå¤šæ’­ç›¸è¾ƒäºå•æ’­ï¼Œåªæ˜¯å¤šç»´æŠ¤äº†ä¸€ä¸ª &quot;InvocationList&quot;ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰åé¢çš„ &quot;AddUObject&quot;ï¼Œ&quot;Broadcast&quot; ç­‰æ“ä½œï¼Œéƒ½æ˜¯å›´ç»• &quot;Invocation&quot; å±•å¼€çš„ã€‚</p><h4 id="adduobject"><a class="anchor" href="#adduobject">#</a> AddUObject</h4><p></p><figure class="highlight c++"><figcaption><span>MulticastDelegate.Add</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateSignatureImpl.inl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> UserClass, <span class="keyword">typename</span>... VarTypes&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> FDelegateHandle <span class="title">AddUObject</span><span class="params">(UserClass* InUserObject, <span class="keyword">typename</span> TMemFunPtrType&lt;<span class="literal">false</span>, UserClass, <span class="keyword">void</span> (ParamTypes..., VarTypes...)&gt;::Type InFunc, VarTypes... Vars)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">static_assert</span></span>(!TIsConst&lt;UserClass&gt;::Value, <span class="string">&quot;Attempting to bind a delegate with a const object pointer and non-const member function.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ &quot;CreateUObejct&quot; è·Ÿå•æ’­çš„æ˜¯ä¸€æ ·çš„ï¼Œä¸åšèµ˜è¿°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Add</span>(FDelegate::<span class="built_in">CreateUObject</span>(InUserObject, InFunc, Vars...));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€æœ‰çš„ Add... å‡½æ•°æœ€ç»ˆéƒ½ä¼šè°ƒç”¨è¿™ä¸€æ¡å‡½æ•°ï¼Œä¸åŒçš„ Add... å‡½æ•°åªæ˜¯å¯¹ &quot;FDelegate&quot; çš„åˆå§‹åŒ–æœ‰æ‰€ä¸åŒ</span></span><br><span class="line"><span class="function">FDelegateHandle <span class="title">Add</span><span class="params">(FDelegate&amp;&amp; InNewDelegate)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FDelegateHandle Result;</span><br><span class="line">    <span class="keyword">if</span> (Super::<span class="built_in">GetDelegateInstanceProtectedHelper</span>(InNewDelegate))</span><br><span class="line">    &#123;</span><br><span class="line">        Result = Super::<span class="built_in">AddDelegateInstance</span>(<span class="built_in">MoveTemp</span>(InNewDelegate));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ²¡é”™ï¼Œåˆæ˜¯åˆšåˆšé‚£ä¸ªå­˜ç€å§”æ‰˜å®ä¾‹æ•°ç»„çš„ç±»</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> UserPolicy&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TMulticastDelegateBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="keyword">using</span> InvocationListType = TArray&lt;TDelegateBase&lt;UserPolicy&gt;, FMulticastInvocationListAllocatorType&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> FDelegateHandle <span class="title">AddDelegateInstance</span><span class="params">(TDelegateBase&lt;UserPolicy&gt;&amp;&amp; NewDelegateBaseRef)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// æ”¶ç¼© &quot;InvocationList&quot; æ•°ç»„</span></span><br><span class="line">		<span class="built_in">CompactInvocationList</span>(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// ä¿ç•™ &quot;DelegateHandle&quot;ï¼Œç”¨äºåç»­å¯¹è¯¥å§”æ‰˜å®ä¾‹çš„æ“ä½œ</span></span><br><span class="line">		FDelegateHandle Result = NewDelegateBaseRef.<span class="built_in">GetHandle</span>();</span><br><span class="line">        <span class="comment">// å¾€ &quot;InvocationList&quot; æ·»åŠ ä»£ç†å®ä¾‹</span></span><br><span class="line">		InvocationList.<span class="built_in">Add</span>(<span class="built_in">MoveTemp</span>(NewDelegateBaseRef));</span><br><span class="line">		<span class="keyword">return</span> Result;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ”¶ç¼© &quot;InvocationList&quot; æ•°ç»„</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">CompactInvocationList</span><span class="params">(<span class="keyword">bool</span> CheckThreshold=<span class="literal">false</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// ä¸Šé”åˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">		<span class="keyword">if</span> (InvocationListLockCount &gt; <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// æ”¶ç¼©é˜ˆå€¼å¤§äº &quot;InvocationList&quot; å†…å…ƒç´ çš„æ•°é‡ï¼Œåˆ™æ— éœ€æ”¶ç¼©ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">		<span class="keyword">if</span> (CheckThreshold 	&amp;&amp; --CompactionThreshold &gt; InvocationList.<span class="built_in">Num</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		int32 OldNumItems = InvocationList.<span class="built_in">Num</span>();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å°†ç©ºä»£ç†å’Œä¸å¯ç”¨ä»£ç†ç§»é™¤æ‰</span></span><br><span class="line">		<span class="keyword">for</span> (int32 InvocationListIndex = <span class="number">0</span>; InvocationListIndex &lt; InvocationList.<span class="built_in">Num</span>();)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">auto</span>&amp; DelegateBaseRef = InvocationList[InvocationListIndex];</span><br><span class="line"></span><br><span class="line">			IDelegateInstance* DelegateInstance = DelegateBaseRef.<span class="built_in">GetDelegateInstanceProtected</span>();</span><br><span class="line">			<span class="keyword">if</span> (DelegateInstance == <span class="literal">nullptr</span>	|| DelegateInstance-&gt;<span class="built_in">IsCompactable</span>())</span><br><span class="line">			&#123;</span><br><span class="line">				InvocationList.<span class="built_in">RemoveAtSwap</span>(InvocationListIndex);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				InvocationListIndex++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		CompactionThreshold = FMath::<span class="built_in">Max</span>(<span class="number">2</span>, <span class="number">2</span> * InvocationList.<span class="built_in">Num</span>());</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (OldNumItems &gt; CompactionThreshold)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// å‹ç¼© &quot;InvocationList&quot;</span></span><br><span class="line">			InvocationList.<span class="built_in">Shrink</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ²¡é”™ï¼Œå…¶å®å°±æ˜¯å¯¹ &quot;InvocationList&quot; çš„ä¸€äº›æ“ä½œè€Œå·²ï¼Œ&quot;CreateUObject&quot; éƒ½è¿˜æ˜¯è·Ÿå•æ’­çš„ä¸€æ ·ã€‚</p><p>æœ€åæ˜¯ &quot;Broadcast&quot;ï¼ˆå…¶å®ä¹Ÿè·Ÿ Execute å·®ä¸å¤š...ï¼‰</p><h4 id="broadcast"><a class="anchor" href="#broadcast">#</a> Broadcast</h4><p></p><figure class="highlight c++"><figcaption><span>Broadcast</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DelegateSignatureImpl.inl</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Broadcast</span><span class="params">(ParamTypes... Params)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> NeedsCompaction = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &quot;TMulticastDelegateBase&quot; åŸºç±»ä¸­çš„é”è®¡æ•°å™¨åŠ 1ï¼Œä¸Šé”åä¸èƒ½æ”¶ç¼©ä»£ç†</span></span><br><span class="line">    Super::<span class="built_in">LockInvocationList</span>();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è·å–ä»£ç†å®ä¾‹åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">const</span> InvocationListType&amp; LocalInvocationList = Super::<span class="built_in">GetInvocationList</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»¥ç›¸åçš„é¡ºåºè°ƒç”¨ç»‘å®šå‡½æ•°ï¼Œå› æ­¤ä¼šå¿½ç•¥åŒä¸€æ—¶åˆ»æ·»åŠ è¿›æ¥çš„ä»»ä½•å®ä¾‹</span></span><br><span class="line">        <span class="keyword">for</span> (int32 InvocationListIndex = LocalInvocationList.<span class="built_in">Num</span>() - <span class="number">1</span>; InvocationListIndex &gt;= <span class="number">0</span>; --InvocationListIndex)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è¿™ä¸ªä¸‹è¡Œè½¬æ¢æ˜¯è¢«å…è®¸çš„ï¼å…è®¸åœ¨åŸºç±»ä¸­ç®¡ç†è°ƒç”¨åˆ—è¡¨ï¼Œè€Œä¸éœ€è¦è™šå‡½æ•°</span></span><br><span class="line">            <span class="keyword">const</span> FDelegate&amp; DelegateBase = (<span class="keyword">const</span> FDelegate&amp;)LocalInvocationList[InvocationListIndex];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å– &quot;IDelegateInstance&quot;ï¼Œ&quot;GetDelegateInstanceProtectedHelper&quot; é‡Œé¢åªæ˜¯è°ƒç”¨äº† &quot;GetDelegateInstanceProtected&quot;ï¼Œè·Ÿå•æ’­ä¸€æ ·</span></span><br><span class="line">            IDelegateInstance* DelegateInstanceInterface = Super::<span class="built_in">GetDelegateInstanceProtectedHelper</span>(DelegateBase);</span><br><span class="line">            <span class="comment">// å¦‚æœ &quot;DelegateInstanceInterface&quot; ä¸ºç©ºæˆ–ä¸èƒ½å®‰å…¨è¿è¡Œï¼Œåˆ™åœ¨è¿è¡Œåè¿›è¡Œä»£ç†å®ä¾‹çš„æ¸…ç†</span></span><br><span class="line">            <span class="comment">// è¿™é‡Œçš„ &quot;ExecuteIfSafe&quot; æ˜¯çœŸæ­£è¿è¡Œæ¯ä¸ªä»£ç†çš„å‡½æ•°ï¼Œè·Ÿå•æ’­ä¸€æ ·ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (DelegateInstanceInterface == <span class="literal">nullptr</span> || !((DelegateInstanceInterfaceType*)DelegateInstanceInterface)-&gt;<span class="built_in">ExecuteIfSafe</span>(Params...))</span><br><span class="line">            &#123;</span><br><span class="line">                NeedsCompaction = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è§£é”ï¼Œ&quot;TMulticastDelegateBase&quot; åŸºç±»ä¸­çš„é”è®¡æ•°å™¨å‡1</span></span><br><span class="line">    Super::<span class="built_in">UnlockInvocationList</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (NeedsCompaction)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">const_cast</span>&lt;TMulticastDelegate*&gt;(<span class="keyword">this</span>)-&gt;<span class="built_in">CompactInvocationList</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;Broadcast&quot; æ¯” &quot;ExcuteIfSafe&quot; å¤šçš„æ“ä½œä¹Ÿåªæ˜¯ä¸Šé”ï¼Œéå†å’Œæ”¶ç¼©ã€‚å‰©ä¸‹å°±æ˜¯è·å–ä»£ç†ä¿¡æ¯çš„ç®€å•å‡½æ•°ï¼Œè¿™é‡Œä¸å†å±•å¼€äº†ã€‚æœ€åæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹å§ï¼š</p><ol><li>é¦–å…ˆï¼Œä½¿ç”¨å®å£°æ˜ä»£ç†çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªä»£ç†ç±» &quot;TDelegate&quot;ï¼Œå¹¶æ ¹æ®æˆ‘æˆ‘ä»¬å®šä¹‰çš„ä»£ç†çš„å‚æ•°ä¸ªæ•°å’Œè¿”å›å€¼ï¼Œç¡®å®š &quot;TDelegate&quot; çš„å‡½æ•°ç­¾åï¼Œè¿™é‡Œçš„ &quot;UserPolicy&quot;(ä»£ç†ç­–ç•¥) æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ç”¨çš„æ˜¯é»˜è®¤çš„ï¼Œå¦‚æœé‡æ–°å®šä¹‰ï¼Œéœ€è¦æŠŠé‡Œé¢çš„ä¸‰ä¸ªç±»å…¨éƒ¨å®šä¹‰å¥½</li><li>å½“æˆ‘ä»¬ &quot;BindUObject&quot; çš„æ—¶å€™ï¼Œç¨‹åºä¼šç”¨ä¼ è¿›æ¥çš„å‚æ•°ï¼Œåœ¨å’±çš„ä»£ç†å¯¹è±¡çš„çˆ¶ç±»ä¸­æ„é€ ä¸€ä¸ª &quot;IDelegateInstance&quot; å¯¹è±¡ï¼Œé‡Œé¢å­˜çš„æ•°æ®åŒ…æ‹¬ï¼š&quot;UserObject&quot;(TWeakObjectPtr) , MethodPtr (FMethodPtr) , Payload (TTuple) , Handle (FDelegateHandle)</li><li>æœ€åå’±è°ƒç”¨ &quot;Execute&quot;ï¼Œå®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨ &quot;Payload&quot; ä¸­çš„ &quot;Invoke&quot;ï¼Œ&quot;Invoke&quot; çš„å®ç°æœ‰å››ç§ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚&quot;Payload&quot; ä¸­çš„å‚æ•°ä¼šåœ¨ &quot;Invoke&quot; çš„æœ«å°¾ä¼ è¿›å»ã€‚&quot;Invoke&quot; çš„è°ƒç”¨å®é™…ä¸Šæ˜¯åˆ©ç”¨äº†å‡½æ•°æŒ‡é’ˆï¼ŒåŠ ä¸å®šå‚æ•°æ¥å®Œæˆçš„ã€‚</li></ol><p>åˆ°è¿™é‡Œï¼Œå’± ue ä»£ç†çš„æ—…ç¨‹ä¹Ÿå·®ä¸å¤šè¯¥ç»“æŸäº†ï¼Œå¦‚æœæœ‰ä»€ä¹ˆåœ°æ–¹è®²å¾—è¿˜æ˜¯ä¸å¤Ÿæ¸…é™¤ï¼Œæˆ–è€…æœ‰ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ çœ‹åˆ°æˆ‘å°±å›å¤ï¼ˆæºœå•¦æºœå•¦ ğŸ˜ƒ</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-11-26 09:27:53" itemprop="dateModified" datetime="2021-11-26T09:27:53+08:00">2021-11-26</time> </span><span id="2021/11/11/UE4/UE4CPP/UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•/" class="item leancloud_visitors" data-flag-title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•" title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>-YIFEI- <i class="ic i-at"><em>@</em></i>ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹</li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://kotori_suki.github.io/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•">https://kotori_suki.github.io/2021/11/11/UE4/UE4CPP/UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•/</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/11/08/UE4/UE4CPP/UClass%E7%9A%84%E8%AF%9E%E7%94%9F%E4%B8%8E%E6%88%90%E9%95%BF/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicli3sbvtj20zk0m8x6p.jpg" title="UClassçš„è¯ç”Ÿä¸æˆé•¿"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> UE4_C++</span><h3>UClassçš„è¯ç”Ÿä¸æˆé•¿</h3></a></div><div class="item right"><a href="/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipexoj0moj20zk0m8kgu.jpg" title="FPropertyçš„åˆ†æä¸æ€»ç»“"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> UE4_C++</span><h3>FPropertyçš„åˆ†æä¸æ€»ç»“</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ue4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">UE4 ä»£ç†çš„å®ç°ä¸ç”¨æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="toc-number">1.1.</span> <span class="toc-text">ä»£ç†çš„ä½¿ç”¨æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%8A%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.1.</span> <span class="toc-text">ä»£ç†çš„ç±»å‹åŠè¯´æ˜ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-number">1.1.2.</span> <span class="toc-text">ä»£ç†çš„å£°æ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E7%BB%91%E5%AE%9A"><span class="toc-number">1.1.3.</span> <span class="toc-text">ä»£ç†çš„ç»‘å®š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E8%A7%A6%E5%8F%91"><span class="toc-number">1.1.4.</span> <span class="toc-text">ä»£ç†çš„è§¦å‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9A%84%E8%A7%A3%E7%BB%91"><span class="toc-number">1.1.5.</span> <span class="toc-text">ä»£ç†çš„è§£ç»‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E5%9C%A8%E6%BA%90%E7%A0%81%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.</span> <span class="toc-text">ä»£ç†åœ¨æºç ä¸­çš„å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E-declare_delegate-%E5%87%BA%E5%8F%91"><span class="toc-number">1.2.1.</span> <span class="toc-text">ä» DECLARE_DELEGATE () å‡ºå‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E8%A7%A3-binduobject"><span class="toc-number">1.2.2.</span> <span class="toc-text">ç†è§£ BindUObject ()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#binduobject"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">BindUObject</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B-execute"><span class="toc-number">1.3.</span> <span class="toc-text">å¼€å§‹ Execute</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#multicastdelegate"><span class="toc-number">1.3.1.</span> <span class="toc-text">MulticastDelegate</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#declare_multicast_delegate"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">DECLARE_MULTICAST_DELEGATE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#adduobject"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">AddUObject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#broadcast"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">Broadcast</span></a></li></ol></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/2021/10/25/UE4/UE4CPP/API%E4%B8%8D%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C-%E4%B9%8B-GetGameMode/" rel="bookmark" title="APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetGameMode">APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetGameMode</a></li><li><a href="/2021/10/25/UE4/UE4CPP/API%E4%B8%8D%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C-%E4%B9%8B-GetPlayerController/" rel="bookmark" title="APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetPlayerController">APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetPlayerController</a></li><li><a href="/2021/10/25/UE4/UE4CPP/unreal%E5%BC%95%E6%93%8E%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" rel="bookmark" title="unrealå¼•æ“å¯åŠ¨æµç¨‹">unrealå¼•æ“å¯åŠ¨æµç¨‹</a></li><li><a href="/2021/10/26/UE4/UE4CPP/%E4%BB%8ESVG%E6%96%87%E4%BB%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%97%85%E7%A8%8B/" rel="bookmark" title="ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~">ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~</a></li><li><a href="/2021/10/29/UE4/UE4CPP/%E5%8F%8D%E5%B0%84%E7%B3%BB%E7%BB%9F%20API/" rel="bookmark" title="åå°„ç³»ç»ŸAPI  è§£æå’Œä½¿ç”¨">åå°„ç³»ç»ŸAPI è§£æå’Œä½¿ç”¨</a></li><li><a href="/2021/10/31/UE4/UE4CPP/Session%E7%9A%84%E4%BD%BF%E7%94%A8%20C++%E7%AF%87/" rel="bookmark" title="Sessionçš„ä½¿ç”¨ C++ç¯‡">Sessionçš„ä½¿ç”¨ C++ç¯‡</a></li><li><a href="/2021/11/02/UE4/UE4CPP/Unreal%20%E5%BA%8F%E5%88%97%E5%8C%96/" rel="bookmark" title="Unreal åºåˆ—åŒ–~~~">Unreal åºåˆ—åŒ–~~~</a></li><li><a href="/2021/11/06/UE4/UE4CPP/Unreal%20GC%E8%BF%87%E7%A8%8B/" rel="bookmark" title="Unreal GCè¿‡ç¨‹">Unreal GCè¿‡ç¨‹</a></li><li><a href="/2021/11/08/UE4/UE4CPP/UClass%E7%9A%84%E8%AF%9E%E7%94%9F%E4%B8%8E%E6%88%90%E9%95%BF/" rel="bookmark" title="UClassçš„è¯ç”Ÿä¸æˆé•¿">UClassçš„è¯ç”Ÿä¸æˆé•¿</a></li><li class="active"><a href="/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" rel="bookmark" title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•">UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•</a></li><li><a href="/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/" rel="bookmark" title="FPropertyçš„åˆ†æä¸æ€»ç»“">FPropertyçš„åˆ†æä¸æ€»ç»“</a></li><li><a href="/2021/11/22/UE4/UE4CPP/Unreal%20%E5%A4%9A%E7%A7%8D%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" rel="bookmark" title="Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†">Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†</a></li><li><a href="/2021/11/26/UE4/UE4CPP/Unreal%20Slate/" rel="bookmark" title="Unreal Slate">Unreal Slate</a></li><li><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20%E6%80%BB%E8%A7%88%20&%20UEngine%20&%20UGameInstance/" rel="bookmark" title="Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance">Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance</a></li><li><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20APawn%20&%20AController%20&%20APlayerController/" rel="bookmark" title="Gameplay â€”â€” APawn & AController & APlayerController">Gameplay â€”â€” APawn & AController & APlayerController</a></li><li><a href="/2021/12/03/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20FWorldContext%20&%20UWorld%20&%20ULevel/" rel="bookmark" title="Gameplay â€”â€” FWorldContext & UWorld & ULevel">Gameplay â€”â€” FWorldContext & UWorld & ULevel</a></li><li><a href="/2021/12/06/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AActor%20&%20UActorComponent/" rel="bookmark" title="Gameplay â€”â€” AActor & UActorComponent">Gameplay â€”â€” AActor & UActorComponent</a></li><li><a href="/2021/12/12/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AGameMode%20&%20AGameState%20&%20APlayerState/" rel="bookmark" title="Gameplay â€”â€” AGameMode & AGameState & APlayerState">Gameplay â€”â€” AGameMode & AGameState & APlayerState</a></li><li><a href="/2021/12/15/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20USavegame%20&%20UPlayer/" rel="bookmark" title="Gameplay â€”â€” USavegame & UPlayer">Gameplay â€”â€” USavegame & UPlayer</a></li><li><a href="/2021/12/17/UE4/UE4CPP/Unreal%20GAS%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" rel="bookmark" title="Unreal GAS æºç è§£æ">Unreal GAS æºç è§£æ</a></li><li><a href="/2021/12/29/UE4/UE4CPP/CustomItemModule/" rel="bookmark" title="Custom Item Module">Custom Item Module</a></li><li><a href="/2021/12/30/UE4/UE4CPP/Unreal%20%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/" rel="bookmark" title="Unreal å¼‚æ­¥ä¸å¹¶è¡Œç¼–ç¨‹">Unreal å¼‚æ­¥ä¸å¹¶è¡Œç¼–ç¨‹</a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="-YIFEI-" data-src="/images/avatar.jpg"><p class="name" itemprop="name">-YIFEI-</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">53</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">15</span> <span class="name">åˆ†ç±»</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0tvdG9yaS1TdWtp" title="https:&#x2F;&#x2F;github.com&#x2F;Kotori-Suki"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS90dnQtNjA=" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;tvt-60"><i class="ic i-zhihu"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li></ul></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/11/08/UE4/UE4CPP/UClass%E7%9A%84%E8%AF%9E%E7%94%9F%E4%B8%8E%E6%88%90%E9%95%BF/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/Gameplay/" title="åˆ†ç±»äº Gameplay">Gameplay</a></div><span><a href="/2021/12/06/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AActor%20&%20UActorComponent/" title="Gameplay â€”â€” AActor &amp; UActorComponent">Gameplay â€”â€” AActor & UActorComponent</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2021/11/02/UE4/UE4CPP/Unreal%20%E5%BA%8F%E5%88%97%E5%8C%96/" title="Unreal åºåˆ—åŒ–~~~">Unreal åºåˆ—åŒ–~~~</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº ç»“æ„å‹æ¨¡å¼">ç»“æ„å‹æ¨¡å¼</a></div><span><a href="/2021/08/18/CPPBase/DesignPattern/Proxy/" title="ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/Gameplay/" title="åˆ†ç±»äº Gameplay">Gameplay</a></div><span><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20%E6%80%BB%E8%A7%88%20&%20UEngine%20&%20UGameInstance/" title="Gameplay â€”â€” æ€»è§ˆ &amp; UEngine &amp; UGameInstance">Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/17/CPPBase/DesignPattern/AbstractFactory/" title="æŠ½è±¡å·¥å‚æ¨¡å¼">æŠ½è±¡å·¥å‚æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a></div><span><a href="/2021/08/16/CPPBase/map%E4%B8%8Eunordered_map%E7%9A%84%E5%8C%BA%E5%88%AB/" title="mapä¸unordered_map">mapä¸unordered_map</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/17/CPPBase/DesignPattern/ProtoType/" title="åŸå‹æ¨¡å¼">åŸå‹æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2021/10/29/UE4/UE4CPP/%E5%8F%8D%E5%B0%84%E7%B3%BB%E7%BB%9F%20API/" title="åå°„ç³»ç»ŸAPI  è§£æå’Œä½¿ç”¨">åå°„ç³»ç»ŸAPI è§£æå’Œä½¿ç”¨</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è¡Œä¸ºå‹æ¨¡å¼">è¡Œä¸ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/19/CPPBase/DesignPattern/Strategy/" title="ç­–ç•¥æ¨¡å¼">ç­–ç•¥æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2021/10/26/UE4/UE4CPP/%E4%BB%8ESVG%E6%96%87%E4%BB%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%97%85%E7%A8%8B/" title="ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~">ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 â€“ <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">-YIFEI- @ Afei's Blog</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/11/11/UE4/UE4CPP/UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•/",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",hide:"(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>