<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/atom.xml"><link rel="alternate" type="application/json" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://kotori_suki.github.io/2021/11/26/UE4/UE4CPP/Unreal%20Slate/"><title>Unreal Slate - UE4_C++ - UE4 | Afei's Blog = ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹ = Welcome to my blog !</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Unreal Slate</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2021-11-26 09:39:26"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2021-11-26T09:39:26+08:00">2021-11-26</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Afei's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipetfk5zwj20zk0m8e81.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicis3attqj20zk0m8k7l.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclj61ylzj20zk0m8b29.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclx29mstj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicliwyw55j20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclip4jbpj20zk0m87cv.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/UE4/" itemprop="item" rel="index" title="åˆ†ç±»äº UE4"><span itemprop="name">UE4</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/UE4/UE4CPP/" itemprop="item" rel="index" title="åˆ†ç±»äº UE4_C++"><span itemprop="name">UE4_C++</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://kotori_suki.github.io/2021/11/26/UE4/UE4CPP/Unreal%20Slate/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="-YIFEI-"><meta itemprop="description" content="Welcome to my blog !, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹"></span><div class="body md" itemprop="articleBody"><h1 id="unreal-slate"><a class="anchor" href="#unreal-slate">#</a> Unreal Slate</h1><p>ç®€ä»‹ï¼šæœ¬ç¯‡å°†ä»ç¼–è¾‘å™¨çš„ &quot;Detail&quot; é¢æ¿å¼€å§‹ï¼Œåˆ†æ &quot;SDetailView&quot; çš„åº•å±‚å®ç°ï¼Œç´§æ¥ç€æ€»ç»“å®ç°ç®€å• Slate ç±»æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œæœ€ååšä¸€ä¸ªç»™è“å›¾ç”¨çš„ &quot;é«˜è¾¾é›¶ä»¶&quot; ğŸ˜ƒ</p><h2 id="ä»-widget-reflector-å¼€å§‹"><a class="anchor" href="#ä»-widget-reflector-å¼€å§‹">#</a> ä» Widget Reflector å¼€å§‹</h2><p>&quot;Widget Reflector&quot; (Widget åå°„å™¨) æ˜¯è™šå¹»<strong>æä¾›ç»™å¼€å‘è€…æŸ¥çœ‹ç¼–è¾‘å™¨ä¸­ Widget çš„å¸ƒå±€</strong>çš„ä¸€ä¸ªå·¥å…·ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ä¸ªå†…åµŒçš„æ’ä»¶ (æˆ‘ä»¬è®²æ’ä»¶çš„æ—¶å€™ä¼šå…·ä½“åˆ†æ &quot;Widget Reflector&quot; çš„å…·ä½“å®ç°)ã€‚é‚£ä¹ˆæˆ‘ä»¬å…ˆçœ‹çœ‹æ€ä¹ˆç”¨è¿™ä¸ªå·¥å…·å§ ğŸ˜ƒ</p><p><img data-src="Widget_Reflector.png" alt="Widget_Reflector"></p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><ul><li>Menu Bar -&gt; Window -&gt; Developer Tools -&gt; Widget Reflector</li><li>ç‚¹å‡»ç»¿è‰²æ¡†æ¡†çš„ &quot;Pick Widget&quot;ï¼Œç„¶åå°†å…‰æ ‡ç§»åŠ¨åˆ°ä½ æƒ³æŸ¥çœ‹çš„ &quot;Widget&quot; ä¸­</li><li>æŒ‰ä¸‹ Esc é”®ï¼Œå³å¯å®šæ ¼å½“å‰ &quot;Widget&quot; å®šä½</li></ul><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šé¢å®šä½çš„æ˜¯ ç¼–è¾‘å™¨ä¸»ç•Œé¢çš„ Details é¢æ¿ï¼ŒWidget åå°„å™¨ä¸­ç»™æˆ‘ä»¬çš„ä¿¡æ¯æœ‰ï¼šè¯¥ Widget çš„å¸ƒå±€ä¸ä»å±å…³ç³»ï¼ŒWidget çš„ä¸€äº›å±æ€§ (æ˜¯å¦å¯è§ï¼Œå½“å‰æ˜¯å¦ focus ç­‰)ï¼ŒWidget çš„æºä»£ç ï¼ŒWidget çš„åœ°å€ã€‚Widget åå°„å™¨å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ç°ç»†èŠ‚é¢æ¿çš„æºä»£ç æ˜¯ &quot;SDetailsView&quot;ï¼Œé‚£å’±ä¹Ÿæ˜¯äºŒè¯ä¸è¯´ï¼Œç›´æ¥åˆ†æ &quot;SDetailsView&quot; çš„æºç ï¼Œå¼€å†²ï¼ˆï¿£ï¸¶ï¿£ï¼‰â†—</p><h2 id="details-view-çš„å®ç°"><a class="anchor" href="#details-view-çš„å®ç°">#</a> Details View çš„å®ç°</h2><p>åœ¨åˆ†æ &quot;SDetailsView&quot; çš„æºç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è™šå¹»çš„ Slate æ¡†æ¶æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>Slate ç±»éƒ½æ˜¯ä»¥ 'S' å¼€å¤´çš„ï¼Œå¦‚ï¼š&quot;SDetialsView&quot;</li><li>Slate ç±»éƒ½ç»§æ‰¿äº &quot;SWidget&quot;ï¼Œè€Œä¸æ˜¯ &quot;UObject&quot;</li><li>Slate å¯¹è±¡ä¸å— GC ç®¡ç†ï¼Œæ‰€ä»¥é€šå¸¸ç”¨å…±äº«æŒ‡é’ˆæ¥æ„é€  Slate å¯¹è±¡</li></ul><p>ä»¥ä¸‹æ˜¯ &quot;SDetailsView&quot; çš„æºç å®ç°ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>SDetailView</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsView.h</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SDetailsView</span> :</span> <span class="keyword">public</span> SDetailsViewBase</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">FPropertyDetailsUtilities</span>;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	<span class="built_in">SLATE_BEGIN_ARGS</span>(SDetailsView)&#123;&#125;</span><br><span class="line">	<span class="built_in">SLATE_END_ARGS</span>()</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// ...... çœç•¥ä»£ç åæ–‡åˆ†æ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;SDetailsView&quot; ä¸€å¼€å§‹å°±ç»™å’±æ•´äº†ä¸¤ä¸ªå®ï¼Œ&quot;SLATE_BEGIN_ARGS&quot; , SLATE_END_ARGS&quot;ã€‚ä»å®çš„åå­—æ¥çœ‹ï¼Œè¿™ä¿©ä¼¼ä¹æ˜¯ä¸€å¯¹çš„ï¼Œç”¨æ¥å®šä¹‰ Slate ç±»çš„å˜é‡ã€‚äº‹å®ä¹Ÿç¡®å®å°±æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹çœ‹å®å®šä¹‰å§ã€‚</p><p></p><figure class="highlight c++"><figcaption><span>SLATE_BEGIN_ARGS</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DeclarativeSyntaxSupport.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLATE_BEGIN_ARGS( WidgetType ) \</span></span><br><span class="line"><span class="meta">	public: \</span></span><br><span class="line"><span class="meta">	struct FArguments : public TSlateBaseNamedArgs<span class="meta-string">&lt;WidgetType&gt;</span> \</span></span><br><span class="line"><span class="meta">	&#123; \</span></span><br><span class="line"><span class="meta">		typedef FArguments WidgetArgsType; \</span></span><br><span class="line"><span class="meta">		FORCENOINLINE FArguments()</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLATE_END_ARGS() \</span></span><br><span class="line"><span class="meta">	&#125;;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p></p><p>ç ”ç©¶è¿‡ Slate æºç çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼ŒSlate å®šä¹‰å˜é‡çš„å®å…¶å®è¿˜æœ‰å¾ˆå¤šã€‚ä½†å…¶å®éƒ½åªä¸è¿‡æ˜¯åœ¨å®šä¹‰ä¸€äº› &quot;FArguments&quot; çš„å±æ€§ï¼Œå®ç°ä¸Šä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å°±ä¸å±•å¼€åˆ†æäº†ã€‚å½“ç„¶è¿˜æœ‰ä¸€äº›ç”¨æ¥æ·»åŠ  Slot å’Œé‡è½½è¿ç®—ç¬¦çš„ (æ¯”å¦‚ï¼šSLATE_SUPPORTS_SLOT) ï¼Œå¯¹æ•´ä¸ª Slate ç³»ç»Ÿç†è§£æ¯”è¾ƒé‡è¦çš„å®ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹æ–‡è¿›è¡Œåˆ†æ</p><p>å›åˆ°ä¸Šé¢çš„ä»£ç åˆ†æã€‚ä¸éš¾å‘ç°ï¼Œ <code>SLATE_BEGIN_ARGS( WidgetType )</code> å…¶å®å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¬å¼€çš„ç»“æ„ä½“ &quot;FArguments&quot; (ä»åå­—æ¥çœ‹ï¼Œè¿™ä¸ªç»“æ„ä½“æ˜¯ç”¨æ¥å‚¨å­˜å˜é‡çš„)ï¼Œå’Œ &quot;FArguments&quot; çš„åˆ«å &quot;WidgetArgsType&quot;ï¼Œä»¥åŠä¸€ä¸ªéå†…è”çš„æ„é€ å‡½æ•°ã€‚è€Œ <code>SLATE_END_ARGS()</code> åªæ˜¯ä¸ºäº†ç»™ BEGIN å®å®šä¹‰å‡ºæ¥çš„ç»“æ„ä½“åŠ ä¸Š ' } ' ï¼Œä½œä¸ºç»“æ„ä½“å®šä¹‰çš„ç»“æŸã€‚</p><p>å±•å¼€åçš„ä»£ç å¦‚ä¸‹ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>FArguments</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailView å†…å®å±•å¼€</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SDetailsView</span> :</span> <span class="keyword">public</span> SCompoundWidget</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">FArguments</span> :</span> <span class="keyword">public</span> TSlateBaseNamedArgs&lt;SDetailView&gt; </span><br><span class="line">	&#123; </span><br><span class="line">		<span class="keyword">typedef</span> FArguments WidgetArgsType; </span><br><span class="line">		<span class="function">FORCENOINLINE <span class="title">FArguments</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>å¦‚ä½ æ‰€è§ï¼Œè¿™ä¸¤ä¸ªå®åªæ˜¯åœ¨ &quot;SDetailView&quot; ä¸­å†…åµŒäº†ä¸€ä¸ª public çš„ç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“å­˜ç€ &quot;SDetailView&quot; æ‰€éœ€çš„æ‰€æœ‰è®¾ç½®æ•°æ®ï¼ŒåŒ…æ‹¬ &quot;ToopTip&quot;ï¼Œ&quot;Visibility&quot; (åŸºç±» &quot;TSlateBaseNamedArgs&quot; ä¸­çš„)ï¼Œä»¥åŠæˆ‘ä»¬è‡ªå·±ç”¨å®ä¼ è¿›å»çš„å˜é‡å’Œå‡½æ•°ï¼ˆè¿™é‡Œæ²¡ä¼ ï¼‰ã€‚</p><p>åœ¨åˆ†æå‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ &quot;SDetailsView&quot; é‡Œé¢éƒ½æœ‰å“ªäº›å˜é‡è¦æˆ‘ä»¬è®¾ç½®çš„ (åŸºç±»çš„å˜é‡å…ˆä¸éœ€è¦äº†è§£)</p><p></p><figure class="highlight c++"><figcaption><span>SDetailsView</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsView.h</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SDetailsView</span> :</span> <span class="keyword">public</span> SDetailsViewBase</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">/** Detailsé¢æ¿çš„å¯¹è±¡è¿‡æ»¤å™¨ */</span></span><br><span class="line">	TSharedPtr&lt;FDetailsViewObjectFilter&gt; ObjectFilter;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** å½“å‰é€‰å®šçš„Actoré›†çš„ä¿¡æ¯ */</span></span><br><span class="line">	FSelectedActorInfo SelectedActorInfo;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** è°ƒç”¨ &quot;SetObjects&quot; åå¾—åˆ°çš„ å½“å‰é€‰å®šçš„å¯¹è±¡æ•°ç»„ */</span></span><br><span class="line">	TArray&lt;TWeakObjectPtr&lt;UObject&gt;&gt; UnfilteredSelectedObjects;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** åº”ç”¨å¯¹è±¡ç­›é€‰åå¾—åˆ°çš„é€‰å®šå¯¹è±¡æ•°ç»„ */</span></span><br><span class="line">	TArray&lt;TWeakObjectPtr&lt;UObject&gt;&gt; SelectedObjects;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** å½“å‰é€‰å®šçš„ Actors æ•°ç»„ */</span></span><br><span class="line">	TArray&lt; TWeakObjectPtr&lt;AActor&gt; &gt; SelectedActors;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/** ç‰¹å®šUObjectçš„å±æ€§æ ‘çš„æ ¹å±æ€§èŠ‚ç‚¹æ•°ç»„ */</span></span><br><span class="line">	TArray&lt;TSharedPtr&lt;FComplexPropertyNode&gt;&gt; RootPropertyNodes;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** å±æ€§è§†å›¾æ›´æ”¹æ—¶è¦è°ƒç”¨çš„å›è°ƒ */</span></span><br><span class="line">	FOnObjectArrayChanged OnObjectArrayChanged;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/** æ­¤è§†å›¾ä¸­æœ‰å¤šä¸ªé¡¶çº§å¯¹è±¡æ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰å®ä¾‹*/</span></span><br><span class="line">	TSharedPtr&lt;IDetailRootObjectCustomization&gt; RootObjectCustomization;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** è‡³å°‘æœ‰ä¸€ä¸ªå½“å‰æŸ¥çœ‹çš„ Object æ˜¯ CDO æ—¶è¿”å›çœŸ(è“å›¾ç¼–è¾‘) */</span></span><br><span class="line">	<span class="keyword">bool</span> bViewingClassDefaultObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å•çœ‹æ³¨é‡Šå¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œä¸Šé¢çš„å±æ€§ä¸»è¦æ˜¯åœ¨æˆ‘ä»¬é€‰æ‹©å¤šä¸ªå¯¹è±¡æ—¶ï¼Œç»†èŠ‚é¢æ¿è¦å¯¹æˆ‘ä»¬é€‰æ‹©çš„å¯¹è±¡è¿›è¡Œç­›é€‰ (å“ªäº›å¯¹è±¡æ˜¾ç¤ºå“ªäº›ä¸æ˜¾ç¤ºï¼Œæ€ä¹ˆæ˜¾ç¤º) æ—¶ä½¿ç”¨çš„å±æ€§ã€‚</p><p>å’±ç»§ç»­å¾€ä¸‹çœ‹ï¼Œ&quot;Construct&quot; çš„å®ç°å¦‚ä¸‹ï¼ˆä»£ç æ¯”è¾ƒé•¿ï¼‰ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>SDetailsView_2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsView.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SDetailsView::Construct</span><span class="params">(<span class="keyword">const</span> FArguments&amp; InArgs, <span class="keyword">const</span> FDetailsViewArgs&amp; InDetailsViewArgs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å­˜ç€ ç»†èŠ‚é¢æ¿ Widget åˆå§‹åŒ–å‚æ•° çš„ç»“æ„ä½“ï¼ŒåŒ…æ‹¬ HostTabManagerï¼ŒbShowScrollBar ç­‰</span></span><br><span class="line">	DetailsViewArgs = InDetailsViewArgs;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½® ObjectFilterï¼Œç”¨æ¥ç­›é€‰éœ€è¦æ˜¾ç¤ºçš„ Object</span></span><br><span class="line">	<span class="built_in">SetObjectFilter</span>(InDetailsViewArgs.ObjectFilter);</span><br><span class="line"></span><br><span class="line">	bViewingClassDefaultObject = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜ç€è¯¥ &quot;SDetailsView&quot; çš„å¼•ç”¨ï¼Œç”¨äºè°ƒç”¨ &quot;SDetailsView&quot; çš„ä¸€äº›å¸¸ç”¨å‡½æ•°</span></span><br><span class="line">	PropertyUtilities = <span class="built_in">MakeShareable</span>( <span class="keyword">new</span> <span class="built_in">FPropertyDetailsUtilities</span>( *<span class="keyword">this</span> ) );</span><br><span class="line">    <span class="comment">// å­˜ç€è¯¥ &quot;SDetailsView&quot; çš„å¼•ç”¨ï¼Œç”¨äºè°ƒç”¨ &quot;SDetailsView&quot; ç”Ÿæˆå±æ€§å¸ƒå±€çš„å‡½æ•°</span></span><br><span class="line">	PropertyGenerationUtilities = <span class="built_in">MakeShareable</span>( <span class="keyword">new</span> <span class="built_in">FDetailsViewPropertyGenerationUtilities</span>(*<span class="keyword">this</span>) );</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// å³æ çš„å®é™…å®½åº¦ï¼Œå·¦æ ä¸º 1 - ColumnWidth</span></span><br><span class="line">	ColumnWidth = DetailsViewArgs.ColumnWidth;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å·¦æ å’Œå³æ çš„å®½åº¦ï¼Œä»¥åŠå®½åº¦æ”¹å˜æ—¶çš„å›è°ƒ</span></span><br><span class="line">	ColumnSizeData.LeftColumnWidth = TAttribute&lt;<span class="keyword">float</span>&gt;( <span class="keyword">this</span>, &amp;SDetailsView::OnGetLeftColumnWidth );</span><br><span class="line">	ColumnSizeData.RightColumnWidth = TAttribute&lt;<span class="keyword">float</span>&gt;( <span class="keyword">this</span>, &amp;SDetailsView::OnGetRightColumnWidth );</span><br><span class="line">	ColumnSizeData.OnWidthChanged = SSplitter::FOnSlotResized::<span class="built_in">CreateSP</span>( <span class="keyword">this</span>, &amp;SDetailsView::OnSetColumnWidth );</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// è¿™é‡Œå¯¹æ»‘åŠ¨æ å•ç‹¬åšå¯è§†æ€§å¤„ç†ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æƒ³åœ¨å¯¹è±¡è¢«é€‰æ‹©æ—¶æ˜¾ç¤ºæ»‘åŠ¨æ ï¼Œå¦åˆ™ä¸æ˜¾ç¤º</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ AlwaysShowScrollbar(æ€»æ˜¯æ˜¾ç¤º) å’Œ å¯è§†æ€§æ„é€ å‚æ•°(åœ¨é€‰æ‹©æ—¶éšè—)</span></span><br><span class="line">	TSharedRef&lt;SScrollBar&gt; ExternalScrollbar = <span class="built_in">SNew</span>(SScrollBar);</span><br><span class="line">	ExternalScrollbar-&gt;<span class="built_in">SetVisibility</span>( TAttribute&lt;EVisibility&gt;( <span class="keyword">this</span>, &amp;SDetailsView::GetScrollBarVisibility ) );</span><br><span class="line"></span><br><span class="line">    	<span class="comment">// çºµå‘èœå•æ„é€ å™¨ (ç»†èŠ‚é¢æ¿é€‰é¡¹ï¼Œé€‰æ‹©æ˜¾ç¤ºå“ªäº›å±æ€§)</span></span><br><span class="line">		<span class="function">FMenuBuilder <span class="title">DetailViewOptions</span><span class="params">( <span class="literal">true</span>, <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">// æ„é€  &quot;DetailViewOptions&quot; ä¸­çš„é€‰é¡¹</span></span><br><span class="line">		<span class="keyword">if</span> (DetailsViewArgs.bShowModifiedPropertiesOption)</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * æ·»åŠ ä¸€ä¸ªèœå•å…¥å£(å¤é€‰æ¡†é€‰é¡¹)</span></span><br><span class="line"><span class="comment">             * param @ InLabel     å¤é€‰æ¡†åé¢æ˜¾ç¤ºçš„æ–‡æœ¬</span></span><br><span class="line"><span class="comment">             *       @ InToolTip     æç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">             *       @ InIcon     åº”ç”¨çš„ FSlateBrush ä¿¡æ¯</span></span><br><span class="line"><span class="comment">             *       @ InAction     UIè¡Œä¸ºï¼Œå„ç§çŠ¶æ€çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">             *       @ InExtensionHook     èŠ‚é’©ï¼Œç”¨äºæ‹“å±•èœå•æ </span></span><br><span class="line"><span class="comment">             *       @ UserInterfaceActionType     äº¤äº’è¡Œä¸ºç±»å‹</span></span><br><span class="line"><span class="comment">             *       @ InTutorialHighlightName     çªå‡ºæ˜¾ç¤ºåç§°</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">			DetailViewOptions.<span class="built_in">AddMenuEntry</span>( </span><br><span class="line">				<span class="built_in">LOCTEXT</span>(<span class="string">&quot;ShowOnlyModified&quot;</span>, <span class="string">&quot;Show Only Modified Properties&quot;</span>),</span><br><span class="line">				<span class="built_in">LOCTEXT</span>(<span class="string">&quot;ShowOnlyModified_ToolTip&quot;</span>, <span class="string">&quot;Displays only properties which have been changed from their default&quot;</span>),</span><br><span class="line">				<span class="built_in">FSlateIcon</span>(),</span><br><span class="line">				<span class="built_in">FUIAction</span>( </span><br><span class="line">					FExecuteAction::<span class="built_in">CreateSP</span>( <span class="keyword">this</span>, &amp;SDetailsView::OnShowOnlyModifiedClicked ),</span><br><span class="line">					<span class="built_in">FCanExecuteAction</span>(),</span><br><span class="line">					FIsActionChecked::<span class="built_in">CreateSP</span>( <span class="keyword">this</span>, &amp;SDetailsView::IsShowOnlyModifiedChecked )</span><br><span class="line">				),</span><br><span class="line">				NAME_None,</span><br><span class="line">				EUserInterfaceActionType::ToggleButton </span><br><span class="line">			);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (DetailsViewArgs.bShowCustomFilterOption)</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">// ..... åˆ›å»ºèœå•å¤é€‰æ¡†</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>( DetailsViewArgs.bShowDifferingPropertiesOption )</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// ..... åˆ›å»ºèœå•å¤é€‰æ¡†</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (DetailsViewArgs.bShowKeyablePropertiesOption)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// ..... åˆ›å»ºèœå•å¤é€‰æ¡†</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (DetailsViewArgs.bShowAnimatedPropertiesOption)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// ..... åˆ›å»ºèœå•å¤é€‰æ¡†</span></span><br><span class="line">		&#125;</span><br><span class="line">    </span><br><span class="line">		<span class="comment">// ..... åˆ›å»ºèœå•å¤é€‰æ¡†</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºç­›é€‰æ¨ªæ¡ï¼ŒåŒ…æ‹¬ SearchBox , PropertyMatrixButton å’Œ DetailViewOptions</span></span><br><span class="line">    <span class="comment">// ä¸‹é¢çš„è¯­æ³•ä¸æ˜¯é€šå¸¸çš„ C++ è¯­æ³•ï¼Œæ˜¯è™šå¹»é‡è½½äº† &#x27;+&#x27; &#x27;.&#x27; &#x27;[]&#x27; è¿ç®—ç¬¦çš„ç»“æœï¼Œä¸‹æ–‡è¯¦è§£</span></span><br><span class="line">	FilterRow = </span><br><span class="line">		<span class="built_in">SNew</span>( SHorizontalBox )	<span class="comment">// åˆ›å»ºä¸€ä¸ª &quot;SHorizontalBox&quot; å¹¶åˆå§‹åŒ– &quot;Visibility&quot; å±æ€§</span></span><br><span class="line">		.<span class="built_in">Visibility</span>( <span class="keyword">this</span>, &amp;SDetailsView::GetFilterBoxVisibility )</span><br><span class="line">		+SHorizontalBox::<span class="built_in">Slot</span>()	<span class="comment">// å¾€ &quot;SHorizontalBox&quot; é‡Œé¢æ·»åŠ ä¸€ä¸ªæ’æ§½</span></span><br><span class="line">		.<span class="built_in">FillWidth</span>( <span class="number">1</span> )	<span class="comment">// è®¾ç½®æ’æ§½çš„ &quot;FillWidth&quot; æ¯”ä¾‹ä¸º 1</span></span><br><span class="line">		[</span><br><span class="line">			<span class="built_in">SNew</span>(SOverlay)	<span class="comment">// å¾€æ’æ§½é‡Œé¢åˆ›å»ºä¸€ä¸ª &quot;SOverlay&quot;</span></span><br><span class="line">			+SOverlay::<span class="built_in">Slot</span>()	<span class="comment">// ç»§ç»­å¾€ &quot;SOverlay&quot; é‡Œé¢åˆ›å»ºæ’æ§½</span></span><br><span class="line">			.<span class="built_in">Padding</span>(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>)	<span class="comment">// è®¾ç½®æ’æ§½çš„ Padding ä¸º 0</span></span><br><span class="line">			[</span><br><span class="line">				<span class="built_in">SNew</span>(SImage)	<span class="comment">// å¾€æ’æ§½ä¸­æ·»åŠ ä¸€ä¸ª &quot;SImage&quot;ï¼Œå¹¶åˆå§‹åŒ–å…¶å±æ€§</span></span><br><span class="line">				.<span class="built_in">Image</span>(FEditorStyle::<span class="built_in">GetBrush</span>(<span class="string">&quot;Searching.SearchActiveTab&quot;</span>))</span><br><span class="line">				.<span class="built_in">Visibility_Lambda</span>([<span class="keyword">this</span>]()&#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;<span class="built_in">HasActiveSearch</span>() ? EVisibility::Visible : EVisibility::Collapsed; &#125;)</span><br><span class="line">			]</span><br><span class="line">			+SOverlay::<span class="built_in">Slot</span>()	<span class="comment">// ç»§ç»­å¾€ &quot;SOverlay&quot; é‡Œé¢åˆ›å»ºæ’æ§½</span></span><br><span class="line">			.<span class="built_in">Padding</span>(<span class="number">2.f</span>, <span class="number">2.0f</span>, <span class="number">4.f</span>, <span class="number">2.f</span>)</span><br><span class="line">			.<span class="built_in">VAlign</span>( VAlign_Center )</span><br><span class="line">			[</span><br><span class="line">				<span class="comment">// åˆ›å»ºä¸€ä¸ª SSearchBoxï¼Œå¹¶åˆå§‹åŒ–å…¶å±æ€§</span></span><br><span class="line">				<span class="built_in">SAssignNew</span>(SearchBox, SSearchBox)</span><br><span class="line">				.<span class="built_in">HintText</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;SearchDetailsHint&quot;</span>, <span class="string">&quot;Search Details&quot;</span>))</span><br><span class="line">				.<span class="built_in">OnTextChanged</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnFilterTextChanged)</span><br><span class="line">				.<span class="built_in">OnTextCommitted</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnFilterTextCommitted)</span><br><span class="line">				.AddMetaData&lt;FTagMetaData&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;Details.Search&quot;</span>))</span><br><span class="line">			]</span><br><span class="line">		];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (DetailsViewArgs.bShowPropertyMatrixButton)</span><br><span class="line">	&#123;</span><br><span class="line">		FilterRow-&gt;<span class="built_in">AddSlot</span>()	<span class="comment">// å¾€ ç­›é€‰æ¨ªæ¡ é‡Œé¢æ·»åŠ æ’æ§½</span></span><br><span class="line">			.<span class="built_in">Padding</span>(<span class="number">4.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>)</span><br><span class="line">			.<span class="built_in">AutoWidth</span>()</span><br><span class="line">			[</span><br><span class="line">				<span class="comment">// åˆ›å»ºä¸€ä¸ª property matrix button</span></span><br><span class="line">				<span class="built_in">SNew</span>(SButton)</span><br><span class="line">				.<span class="built_in">OnClicked</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnOpenRawPropertyEditorClicked)</span><br><span class="line">				.<span class="built_in">IsEnabled</span>(<span class="keyword">this</span>, &amp;SDetailsView::CanOpenRawPropertyEditor)</span><br><span class="line">				.<span class="built_in">ToolTipText</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;RawPropertyEditorButtonLabel&quot;</span>, <span class="string">&quot;Open Selection in Property Matrix&quot;</span>))</span><br><span class="line">				[</span><br><span class="line">					<span class="built_in">SNew</span>(SImage)</span><br><span class="line">					.<span class="built_in">Image</span>(FEditorStyle::<span class="built_in">GetBrush</span>(<span class="string">&quot;DetailsView.EditRawProperties&quot;</span>))</span><br><span class="line">				]</span><br><span class="line">			];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (DetailsViewArgs.bShowOptions)</span><br><span class="line">	&#123;</span><br><span class="line">		FilterRow-&gt;<span class="built_in">AddSlot</span>()	<span class="comment">// å¾€ ç­›é€‰æ¨ªæ¡ é‡Œé¢æ·»åŠ æ’æ§½</span></span><br><span class="line">			.<span class="built_in">HAlign</span>(HAlign_Right)</span><br><span class="line">			.<span class="built_in">AutoWidth</span>()</span><br><span class="line">			[</span><br><span class="line">				<span class="built_in">SNew</span>( SComboButton )	<span class="comment">// åˆ›å»ºä¸€ä¸ª ComboButtonï¼Œå¹¶ç”¨åˆšåˆšåˆ›å»ºçš„çºµå‘èœå• &quot;DetailViewOptions&quot; ä½œä¸ºå…¶èœå•å†…å®¹</span></span><br><span class="line">				.<span class="built_in">ContentPadding</span>(<span class="number">0</span>)</span><br><span class="line">				.<span class="built_in">ForegroundColor</span>( FSlateColor::<span class="built_in">UseForeground</span>() )</span><br><span class="line">				.<span class="built_in">ButtonStyle</span>( FEditorStyle::<span class="built_in">Get</span>(), <span class="string">&quot;ToggleButton&quot;</span> )</span><br><span class="line">				.AddMetaData&lt;FTagMetaData&gt;(<span class="built_in">FTagMetaData</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;ViewOptions&quot;</span>)))</span><br><span class="line">				.<span class="built_in">MenuContent</span>()</span><br><span class="line">				[</span><br><span class="line">					DetailViewOptions.<span class="built_in">MakeWidget</span>()</span><br><span class="line">				]</span><br><span class="line">				.<span class="built_in">ButtonContent</span>()</span><br><span class="line">				[</span><br><span class="line">					<span class="built_in">SNew</span>(SImage)</span><br><span class="line">					.<span class="built_in">Image</span>( FEditorStyle::<span class="built_in">GetBrush</span>(<span class="string">&quot;GenericViewButton&quot;</span>) )</span><br><span class="line">				]</span><br><span class="line">			];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åˆ›å»º name areaï¼Œå³ä½¿æˆ‘ä»¬é€‰æ‹©æŸ¥çœ‹ç»†èŠ‚çš„å¯¹è±¡æ”¹å˜äº†ï¼Œè¿™ä¸ª Slate ä¹Ÿä¸ä¼šæ”¹å˜</span></span><br><span class="line">	<span class="built_in">SAssignNew</span>(NameArea, SDetailNameArea, &amp;SelectedObjects)</span><br><span class="line">        <span class="comment">// åç§°åŒºåŸŸé‡Œé¢ä¼šæ˜¾ç¤ºæˆ‘ä»¬é€‰æ‹©çš„ Actor çš„åç§°ï¼Œä»¥åŠå½“å‰é€‰æ‹©äº†å¤šå°‘ä¸ªå¯¹è±¡</span></span><br><span class="line">		.<span class="built_in">Visibility</span>(<span class="keyword">this</span>, &amp;SDetailsView::GetActorNameAreaVisibility)</span><br><span class="line">		.<span class="built_in">OnLockButtonClicked</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnLockButtonClicked)</span><br><span class="line">		.<span class="built_in">IsLocked</span>(<span class="keyword">this</span>, &amp;SDetailsView::IsLocked)</span><br><span class="line">		.<span class="built_in">ShowLockButton</span>(DetailsViewArgs.bLockable)</span><br><span class="line">		.<span class="built_in">ShowActorLabel</span>(DetailsViewArgs.bShowActorLabel)</span><br><span class="line">        <span class="comment">// åªåœ¨æˆ‘ä»¬æ²¡æœ‰é€‰æ‹©å¯¹è±¡æ˜¯æ˜¾ç¤ºæç¤º</span></span><br><span class="line">		.<span class="built_in">SelectionTip</span>(!DetailsViewArgs.bHideSelectionTip);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™ä¸ªçºµå‘ç›’æ˜¯ç”¨æ¥æŠŠæˆ‘ä»¬åˆšåˆšç”Ÿæˆçš„ Slate é›†æˆåœ¨ä¸€èµ·æ·»åŠ åˆ° ChildSlot é‡Œé¢çš„</span></span><br><span class="line">    <span class="comment">// ChildSlot æ˜¯ &quot;CompoundWidget&quot; çš„å±æ€§ï¼Œå¾€é‡Œé¢æ·»åŠ  Slate å¯¹è±¡ï¼Œå¹¶æ˜¾ç¤ºç»™ç”¨æˆ·</span></span><br><span class="line">	TSharedRef&lt;SVerticalBox&gt; VerticalBox = <span class="built_in">SNew</span>(SVerticalBox);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰çš„ç»†èŠ‚é¢æ¿ä¸æ˜¯ è‡ªå®šä¹‰åç§°åŒºåŸŸï¼Œåˆ™æ·»åŠ æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„åç§°åŒºåŸŸ</span></span><br><span class="line">	<span class="keyword">if</span>( !DetailsViewArgs.bCustomNameAreaLocation )</span><br><span class="line">	&#123;</span><br><span class="line">		VerticalBox-&gt;<span class="built_in">AddSlot</span>()</span><br><span class="line">		.<span class="built_in">AutoHeight</span>()</span><br><span class="line">		.<span class="built_in">Padding</span>(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">4.0f</span>)</span><br><span class="line">		[</span><br><span class="line">			NameArea.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">		];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// å¦‚æœå½“å‰çš„ç»†èŠ‚é¢æ¿ä¸æ˜¯ è‡ªå®šä¹‰ç­›é€‰åŒºåŸŸï¼Œåˆ™æ·»åŠ æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç­›é€‰åŒºåŸŸ</span></span><br><span class="line">	<span class="keyword">if</span>( !DetailsViewArgs.bCustomFilterAreaLocation )</span><br><span class="line">	&#123;</span><br><span class="line">		VerticalBox-&gt;<span class="built_in">AddSlot</span>()</span><br><span class="line">		.<span class="built_in">AutoHeight</span>()</span><br><span class="line">		[</span><br><span class="line">			FilterRow.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">		];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ ç»†èŠ‚æ ‘å¹¶æ·»åŠ åˆ°çºµå‘ç›’é‡Œï¼Œç»†èŠ‚æ ‘çš„æ„é€ æˆ‘ä»¬ä¼šåœ¨ä¸‹æ–‡åˆ†æ</span></span><br><span class="line">	VerticalBox-&gt;<span class="built_in">AddSlot</span>()</span><br><span class="line">	.<span class="built_in">FillHeight</span>(<span class="number">1</span>)</span><br><span class="line">	.<span class="built_in">Padding</span>(<span class="number">0</span>)</span><br><span class="line">	[</span><br><span class="line">		<span class="built_in">SNew</span>(SOverlay)	<span class="comment">// æ·»åŠ ä¸€ä¸ª &quot;SOverlay&quot;</span></span><br><span class="line">		+ SOverlay::<span class="built_in">Slot</span>()</span><br><span class="line">		[</span><br><span class="line">            <span class="comment">// å¾€ &quot;SOverlay&quot; é‡Œé¢æ„é€ ç»†èŠ‚æ ‘ (å°±æ˜¯é€‰å®šå¯¹è±¡çš„ä¸€æ¡æ¡å¯ä»¥æ”¹å˜çš„å±æ€§)</span></span><br><span class="line">            <span class="comment">// è¯¥å‡½æ•°æˆ‘ä»¬ä¼šåœ¨ä¸‹æ–‡è¿›è¡Œåˆ†æï¼Œæ¯”è¾ƒé‡è¦</span></span><br><span class="line">			<span class="built_in">ConstructTreeView</span>(ExternalScrollbar)</span><br><span class="line">		]</span><br><span class="line">		+ SOverlay::<span class="built_in">Slot</span>()	<span class="comment">// å¾€ &quot;SOverlay&quot; é‡Œé¢æ·»åŠ ä¸€ä¸ªæ»‘åŠ¨æ¡</span></span><br><span class="line">		.<span class="built_in">HAlign</span>(HAlign_Right)</span><br><span class="line">		[</span><br><span class="line">			<span class="built_in">SNew</span>(SBox)</span><br><span class="line">			.<span class="built_in">WidthOverride</span>(<span class="number">16.0f</span>)</span><br><span class="line">			[</span><br><span class="line">				ExternalScrollbar</span><br><span class="line">			]</span><br><span class="line">		]</span><br><span class="line">		+ SOverlay::<span class="built_in">Slot</span>()	<span class="comment">// å¾€ &quot;SOverlay&quot; é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œæç¤ºç”¨æˆ·å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æ²¡æœ‰ç¬¦åˆçš„å±æ€§</span></span><br><span class="line">		.<span class="built_in">HAlign</span>(HAlign_Center)</span><br><span class="line">		.<span class="built_in">Padding</span>(<span class="number">2.0f</span>, <span class="number">24.0f</span>, <span class="number">2.0f</span>, <span class="number">2.0f</span>)</span><br><span class="line">		[</span><br><span class="line">			<span class="built_in">SNew</span>(STextBlock)</span><br><span class="line">			.<span class="built_in">Text</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;AllItemsFiltered&quot;</span>, <span class="string">&quot;All results have been filtered. Try changing your active filters above.&quot;</span>))</span><br><span class="line">			.<span class="built_in">Visibility_Lambda</span>([<span class="keyword">this</span>]() &#123; <span class="built_in"><span class="keyword">return</span></span> ((<span class="keyword">this</span>-&gt;<span class="built_in">GetFilterBoxVisibility</span>() == EVisibility::Visible) &amp;&amp; !<span class="keyword">this</span>-&gt;CurrentFilter.<span class="built_in">IsEmptyFilter</span>() &amp;&amp; RootTreeNodes.<span class="built_in">Num</span>() == <span class="number">0</span>) ? EVisibility::HitTestInvisible : EVisibility::Collapsed; &#125;)</span><br><span class="line">		]</span><br><span class="line">		+ SOverlay::<span class="built_in">Slot</span>()	<span class="comment">// å¾€ &quot;SOverlay&quot; ä¸­æ·»åŠ ä¸€ä¸ªå›¾æ ‡ï¼Œåœ¨æœç´¢æ—¶æ˜¾ç¤º</span></span><br><span class="line">		[</span><br><span class="line">			<span class="built_in">SNew</span>(SImage)</span><br><span class="line">			.<span class="built_in">Image</span>(FEditorStyle::<span class="built_in">GetBrush</span>(<span class="string">&quot;Searching.SearchActiveBorder&quot;</span>))</span><br><span class="line">			.<span class="built_in">Visibility_Lambda</span>([<span class="keyword">this</span>]() &#123; <span class="built_in"><span class="keyword">return</span></span> (<span class="keyword">this</span>-&gt;<span class="built_in">GetFilterBoxVisibility</span>() == EVisibility::Visible) &amp;&amp; <span class="keyword">this</span>-&gt;<span class="built_in">HasActiveSearch</span>() ? EVisibility::HitTestInvisible : EVisibility::Collapsed; &#125;)</span><br><span class="line">		]</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	ChildSlot</span><br><span class="line">	[</span><br><span class="line">		VerticalBox		<span class="comment">// å°†åˆšåˆšé›†æˆå¥½çš„çºµå‘ç›’æ·»åŠ åˆ°å­æ§½é‡Œé¢</span></span><br><span class="line">	];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;Construct&quot; å‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥åˆå§‹åŒ–ä¸€äº›å±æ€§ï¼Œä»¥åŠæ„å»º &quot;ChildSlot&quot; çš„ã€‚å‰é¢ä»€ä¹ˆæ„å»ºçºµå‘èœå•ï¼Œå±æ€§ç­›é€‰è¡Œï¼Œå…¶å®éƒ½æ˜¯åœ¨ä¸ºæ„å»º &quot;ChildSlot&quot; åšå‡†å¤‡è€Œå·²ã€‚å°ä¼™ä¼´ä»¬åº”è¯¥ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œæ„å»º Slate çš„è¯­æ³•è·Ÿ C++ çš„è¯­æ³•å·®åˆ«è¿˜æ˜¯éå¸¸å¤§çš„ã€‚å…¶å®æ˜¯ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œä»£ç ç›´è§‚ï¼Œè™šå¹»ä¸ºæˆ‘ä»¬é‡è½½çš„å‡ ä¸ªè¿ç®—ç¬¦ã€‚åˆ†åˆ«æ˜¯ï¼š&quot;[ ]&quot; &quot;.&quot; &quot;+&quot;ï¼Œä»¥åŠ &quot;SNew&quot; å®ã€‚å†åˆ†æç»†èŠ‚æ ‘çš„æ„é€ ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆæŠŠè¿™å‡ ä¸ªè¿ç®—ç¬¦çš„é‡è½½ç»™è®²æ˜ç™½ã€‚æƒ³ç›´æ¥çœ‹ç»†èŠ‚æ ‘æ„å»ºçš„åŒå­¦ç‚¹<a href="#%E7%BB%86%E8%8A%82%E6%A0%91%E7%9A%84%E6%9E%84%E5%BB%BA">è¿™é‡Œ</a>è·³è½¬</p><h3 id="è¿ç®—ç¬¦é‡è½½"><a class="anchor" href="#è¿ç®—ç¬¦é‡è½½">#</a> è¿ç®—ç¬¦é‡è½½</h3><h4 id="snew"><a class="anchor" href="#snew">#</a> SNew</h4><p></p><figure class="highlight c++"><figcaption><span>SNew</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;SNew&quot; çš„è°ƒç”¨é“¾</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SNew( WidgetType, ... ) \</span></span><br><span class="line"><span class="meta">	MakeTDecl<span class="meta-string">&lt;WidgetType&gt;</span>( #WidgetType, __FILE__, __LINE__, RequiredArgs::MakeRequiredArgs(__VA_ARGS__) ) &lt;&lt;= TYPENAME_OUTSIDE_TEMPLATE WidgetType::FArguments()</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TYPENAME_OUTSIDE_TEMPLATE typename</span></span><br><span class="line"></span><br><span class="line"><span class="function">FORCEINLINE T0RequiredArgs <span class="title">MakeRequiredArgs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">T0RequiredArgs</span>();	<span class="comment">// ç”¨æ¥è½¬å‘å‚æ•°çš„ payload ç»“æ„ä½“ï¼Œå®šä¹‰åœ¨ä¸‹é¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MakeRequiredArgs(__VA_ARGS__) ä¼šæ ¹æ®ä¸åŒçš„å‚æ•°ä¸ªæ•°ï¼Œæ„å»ºä¸åŒçš„ payload ç»“æ„ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> WidgetType, <span class="keyword">typename</span> RequiredArgsPayloadType&gt;</span></span><br><span class="line"><span class="function">TDecl&lt;WidgetType, RequiredArgsPayloadType&gt; <span class="title">MakeTDecl</span><span class="params">( <span class="keyword">const</span> ANSICHAR* InType, <span class="keyword">const</span> ANSICHAR* InFile, int32 OnLine, RequiredArgsPayloadType&amp;&amp; InRequiredArgs )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> TDecl&lt;WidgetType, RequiredArgsPayloadType&gt;(InType, InFile, OnLine, Forward&lt;RequiredArgsPayloadType&gt;(InRequiredArgs));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">WidgetType</span>, <span class="title">typename</span> <span class="title">RequiredArgsPayloadType</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TDecl</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="built_in">TDecl</span>( <span class="keyword">const</span> ANSICHAR* InType, <span class="keyword">const</span> ANSICHAR* InFile, int32 OnLine, RequiredArgsPayloadType&amp;&amp; InRequiredArgs )</span><br><span class="line">		: _Widget( TWidgetAllocator&lt;WidgetType, TIsDerivedFrom&lt;WidgetType, SUserWidget&gt;::IsDerived &gt;::<span class="built_in">PrivateAllocateWidget</span>() )</span><br><span class="line">		, _RequiredArgs(InRequiredArgs)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½® Debug ä¿¡æ¯ï¼Œä¸å±•å¼€</span></span><br><span class="line">		_Widget-&gt;<span class="built_in">SetDebugInfo</span>( InType, InFile, OnLine, <span class="built_in"><span class="keyword">sizeof</span></span>(WidgetType) );</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">    </span><br><span class="line">    TSharedRef&lt;WidgetType&gt; <span class="keyword">operator</span>&lt;&lt;=( <span class="keyword">const</span> <span class="keyword">typename</span> WidgetType::FArguments&amp; InArgs ) <span class="keyword">const</span></span><br><span class="line">	&#123;</span><br><span class="line">		_Widget-&gt;<span class="built_in">SWidgetConstruct</span>(</span><br><span class="line">			InArgs._ToolTipText,</span><br><span class="line">			InArgs._ToolTip,</span><br><span class="line">			InArgs._Cursor,</span><br><span class="line">			InArgs._IsEnabled,</span><br><span class="line">			InArgs._Visibility,</span><br><span class="line">			InArgs._RenderOpacity,</span><br><span class="line">			InArgs._RenderTransform,</span><br><span class="line">			InArgs._RenderTransformPivot,</span><br><span class="line">			InArgs._Tag,</span><br><span class="line">			InArgs._ForceVolatile,</span><br><span class="line">			InArgs._Clipping,</span><br><span class="line">			InArgs._FlowDirectionPreference,</span><br><span class="line">			InArgs._AccessibleText.<span class="built_in">IsSet</span>() ? <span class="built_in">FAccessibleWidgetData</span>(InArgs._AccessibleText) : InArgs._AccessibleParams,</span><br><span class="line">			InArgs.MetaData );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨ Widget çš„ &quot;Construct&quot; å‡½æ•°</span></span><br><span class="line">		_RequiredArgs.<span class="built_in">CallConstruct</span>(_Widget, InArgs);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> _Widget;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> TSharedRef&lt;WidgetType&gt; _Widget;</span><br><span class="line">	RequiredArgsPayloadType&amp; _RequiredArgs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T0RequiredArgs</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="built_in">T0RequiredArgs</span>()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;class WidgetType&gt;</span></span><br><span class="line"><span class="function">        <span class="keyword">void</span> <span class="title">CallConstruct</span><span class="params">(<span class="keyword">const</span> TSharedRef&lt;WidgetType&gt;&amp; OnWidget, <span class="keyword">const</span> <span class="keyword">typename</span> WidgetType::FArguments&amp; WithNamedArgs)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// ä½ çš„ Widget å¿…é¡»è¦å®ç° void Construct(const FArguments&amp; InArgs)</span></span><br><span class="line">        OnWidget-&gt;<span class="built_in">Construct</span>(WithNamedArgs);</span><br><span class="line">        OnWidget-&gt;<span class="built_in">CacheVolatility</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹å‡ºï¼Œè°ƒç”¨ &quot;SNew (WidgetType)&quot; åï¼Œç¨‹åºä¼šç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ªæ„é€ å¥½çš„ TSharedRef&lt;WidgetType&gt;ã€‚å…·ä½“è¿‡ç¨‹æ˜¯ï¼š</p><ul><li>å…ˆè°ƒç”¨ WidgetType::FArguments ()ï¼Œæ„é€ ä¸€ä¸ªé»˜è®¤çš„ &quot;FArguments&quot; ç»“æ„ä½“ï¼ˆ<strong>åé¢è®² '[]' å’Œ '+' çš„é‡è½½æ˜¯è¿˜è¦ç”¨åˆ°</strong>ï¼‰</li><li>ç„¶åè°ƒç”¨ &quot;MakeTDecl&quot; æ„é€ å¹¶è¿”å›ä¸€ä¸ª &quot;TDecl&quot; ç»“æ„ä½“ï¼Œè¿™æ—¶å€™ä¹Ÿä¼šæ„å»ºå¯¹åº”å‚æ•°çš„ payload ç»“æ„ä½“ï¼Œå¹¶å­˜åœ¨ &quot;TDecl&quot; ä¸­</li><li>æœ€åè°ƒç”¨ &quot;TDecl&quot; ç»“æ„ä½“çš„ &quot;&lt;&lt;=&quot; é‡è½½è¿ç®—ç¬¦ï¼Œåˆå§‹åŒ– &quot;TDecl&quot; é‡Œé¢çš„ &quot;_Widget&quot; çš„å±æ€§ï¼Œå¹¶è°ƒç”¨å…¶ &quot;Construct&quot; å‡½æ•°ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>&quot;SNew&quot; æœ€ç»ˆè°ƒç”¨ &quot;&lt;&lt;=&quot; è¿ç®—ç¬¦çš„è¿”å›å€¼æ˜¯ &quot;TSharedRef&lt;WidgetType&gt;&quot;</strong>ã€‚è¿™ç‚¹å¾ˆé‡è¦ï¼Œæˆ‘ä»¬åé¢è¿˜ä¼šå›æ¥çœ‹è¿™ä¸ªå®ã€‚</p><h4 id="operator"><a class="anchor" href="#operator">#</a> operator +</h4><p>ç”¨è“å›¾æ‹¼è¿‡é«˜è¾¾çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼šä¸æ˜¯æ‰€æœ‰ &quot;Widget&quot; éƒ½æ˜¯å¯ä»¥æœ‰ &quot;Child Widget&quot; çš„ã€‚åœ¨ Slate é‡Œé¢ï¼Œ&quot;Slot&quot; å…¶å®å°±æ˜¯ &quot;Child Widget&quot;ï¼Œè€Œæ·»åŠ  &quot;Slot&quot; çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ '+' è¿ç®—ç¬¦ã€‚é‚£ä¹ˆ è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ª '+' è¿ç®—ç¬¦æ˜¯æ€ä¹ˆé‡è½½çš„å§ï½ï½</p><p></p><figure class="highlight c++"><figcaption><span>operator+</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DeclarativeSyntaxSupport.h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Use this macro between SLATE_BEGIN_ARGS and SLATE_END_ARGS</span></span><br><span class="line"><span class="comment"> * in order to add support for slots.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLATE_SUPPORTS_SLOT( SlotType ) \</span></span><br><span class="line"><span class="meta">		TArray<span class="meta-string">&lt; SlotType* &gt;</span> Slots; \</span></span><br><span class="line"><span class="meta">		WidgetArgsType&amp; operator + (SlotType&amp; SlotToAdd) \</span></span><br><span class="line"><span class="meta">		&#123; \</span></span><br><span class="line"><span class="meta">			Slots.Add( &amp;SlotToAdd ); \</span></span><br><span class="line"><span class="meta">			return *this; \</span></span><br><span class="line"><span class="meta">		&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p></p><p>æ˜¯çš„ï¼Œå®ç°ä»£ç å¹¶ä¸éš¾ã€‚å°±æ˜¯å…ˆå£°æ˜ä¸€ä¸ªå­˜ &quot;Slot&quot; å¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åè°ƒç”¨ '+' è¿ç®—ç¬¦å¾€æ•°ç»„é‡Œé¢æ·»åŠ ä¸€ä¸ª &quot;Slot&quot; (è¿™é‡Œæ·»åŠ çš„ &quot;Slot&quot; å…¶å®æ˜¯å·²ç»åˆå§‹åŒ–å¥½çš„äº†)ï¼Œæœ€åè¿”å›å’±çš„ &quot;FArguments&quot; ç»“æ„ä½“ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯å®å®šä¹‰ä¸Šé¢çš„æ³¨é‡Šï¼š <code>SLATE_SUPPORTS_SLOT</code> å®å¿…é¡»å®šä¹‰åœ¨ <code>SLATE_BEGIN_ARGS</code> å’Œ <code>SLATE_END_ARGS</code> ä¹‹é—´ã€‚é€šè¿‡ä¸Šæ–‡çš„å®åˆ†ææˆ‘ä»¬çŸ¥é“ï¼š <code>SLATE_BEGIN_ARGS</code> å’Œ <code>SLATE_END_ARGS</code> ä¹‹é—´å®šä¹‰çš„å±æ€§æˆ–è€…å‡½æ•°ï¼Œéƒ½æ˜¯å±äº &quot;FArguments&quot; çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå’±å®å®šä¹‰é‡Œé¢çš„ &quot;Slots&quot; æ•°ç»„ å’Œ '+' è¿ç®—ç¬¦å…¶å®æ˜¯ &quot;FArguments&quot; çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚ä¸‹é¢ä»£ç æ˜¯æ€ä¹ˆç¼–è¯‘é€šè¿‡çš„ï¼Ÿ</p><p></p><figure class="highlight c++"><figcaption><span>Q1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// èŠ‚é€‰ SDetailsView.Construct ä¸­çš„ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">SNew</span>(SOverlay)</span><br><span class="line">    + SOverlay::<span class="built_in">Slot</span>()</span><br><span class="line">    [</span><br><span class="line">    	<span class="built_in">ConstructTreeView</span>(ExternalScrollbar)</span><br><span class="line">	]</span><br></pre></td></tr></table></figure><p></p><p>'[]' æ˜¯ç”¨æ¥åˆå§‹åŒ– <code>SOverlay::Slot()</code> æ„é€ å‡ºæ¥çš„ &quot;Slot&quot; çš„ï¼Œæˆ‘ä»¬åé¢ä¼šè®²ã€‚</p><p>é‡ç‚¹æ˜¯ï¼š<strong>ä¸ºä»€ä¹ˆ &quot;SNew&quot; è¿”å›çš„ &quot;SharedRef&lt;WidgetType&gt;&quot; æŒ‡é’ˆå¯ä»¥ç›´æ¥è°ƒç”¨ WidgetType::FArgument é‡Œé¢çš„ '+' è¿ç®—ç¬¦</strong>ï¼Ÿ</p><p>ç»™å¯çˆ±çš„è¯»è€…ä¸‰ç§’æ€è€ƒï¼Œ1ï¼Œ2ï¼Œ3ã€‚æ—¶é—´åˆ°ï¼Œå…¬å¸ƒç­”æ¡ˆã€‚</p><p>&quot;SNew&quot; è¿”å›çš„ç¡®å®æ˜¯ &quot;SharedRef&lt;WidgetType&gt;&quot; æ²¡é”™ã€‚å®å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>SNew_Review</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SNew( WidgetType, ... ) \</span></span><br><span class="line"><span class="meta">	MakeTDecl( #WidgetType, __FILE__, __LINE__, RequiredArgs::MakeRequiredArgs(__VA_ARGS__) ) &lt;&lt;= TYPENAME_OUTSIDE_TEMPLATE WidgetType::FArguments()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€åŒ–ä¸€ä¸‹å°±æ˜¯ </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SNew( WidgetType, ... ) \</span></span><br><span class="line"><span class="meta">	TDecl<span class="meta-string">&lt;WidgetType&gt;</span>() &lt;&lt;= typename WidgetType::FArguments()</span></span><br></pre></td></tr></table></figure><p></p><p>æ ¹æ®å‡½æ•°è¿ç®—è§„å¾‹ (ä»å³åˆ°å·¦å¤„ç†å‚æ•°)ï¼Œ <code>WidgetType::FArguments()</code> ä½œä¸º '&lt;&lt;=' è¿ç®—ç¬¦çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¼šå…ˆè¿è¡Œåé¢çš„ <code>typename SOverlay::FArguments() + SOverlay::Slot</code> ï¼Œè¿™æ ·ä¸€æ¥ä¾¿æ˜¯æˆ‘ä»¬çš„ &quot;FArguments&quot; åœ¨è°ƒç”¨ '+' è¿ç®—ç¬¦ï¼Œä¸ºä¸æ˜¯ç­‰æ•´ä¸ª <code>SNew(SOverlay)</code> å…¨éƒ¨æ‰§è¡Œå®Œåï¼Œå†æ¥æ‰§è¡Œ '+' è¿ç®—ç¬¦ã€‚æœ€å &quot;&lt;&lt;=&quot; è¿ç®—ç¬¦çš„ &quot;FArgument&quot; å‚æ•°ä¹Ÿå°†ä¸å†æ˜¯é»˜è®¤å€¼ï¼Œè€Œæ˜¯æ·»åŠ äº† &quot;Slot&quot; çš„ &quot;FArgument&quot;ã€‚</p><p>å¾—å‡ºç»“è®ºï¼š<strong>&quot;SNew ()&quot; å®çš„å‰é¢ (è¿”å›å€¼) è¿æ¥ &quot;SharedRed&quot;ï¼Œåé¢è¿æ¥ &quot;FArgument&quot;ï¼Œå¯ä»¥ç”¨æ¥åˆå§‹åŒ– &quot;FArgument&quot; çš„ä¸€äº›ç‰¹å®šå±æ€§ï¼Œå¦‚ï¼šSlotï¼ŒVisibility ç­‰</strong></p><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬ä¾¿çŸ¥é“äº† <code>SNew(WidgetType) + WidgetType::Slot()</code> çš„è¿è¡ŒåŸç†ã€‚æ¥ä¸‹æ¥çœ‹çœ‹æœ€åçš„ '[]' è¿ç®—ç¬¦å§</p><h4 id="operator-2"><a class="anchor" href="#operator-2">#</a> operator []</h4><p>è·Ÿ '+' å…ˆäº '&lt;&lt;=' æ‰§è¡Œä¸€æ ·ï¼Œæˆ‘ä»¬çš„ '[]' ä¹Ÿæ˜¯å…ˆäº '+' æ‰§è¡Œçš„ã€‚æ‰€ä»¥ '[]' å®é™…ä¸Šæ˜¯ <code>WidgetType::Slot()</code> å¯¹è±¡çš„é‡è½½å‡½æ•°ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹ï¼Œ <code>WidgetType::Slot()</code> æ˜¯æ€ä¹ˆå®ç°çš„</p><h5 id="soverlayslot"><a class="anchor" href="#soverlayslot">#</a> SOverlay::Slot()</h5><p></p><figure class="highlight c++"><figcaption><span>SOverlay::Slot</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SOverlay.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> FOverlaySlot&amp; <span class="title">Slot</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *(<span class="keyword">new</span> <span class="built_in">FOverlaySlot</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SLATECORE_API</span> <span class="title">FOverlaySlot</span> :</span> <span class="keyword">public</span> TSlotBase&lt;FOverlaySlot&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">FOverlaySlot</span>()</span><br><span class="line">        : TSlotBase&lt;FOverlaySlot&gt;()</span><br><span class="line">            , <span class="built_in">ZOrder</span>(<span class="number">0</span>)</span><br><span class="line">            , <span class="built_in">HAlignment</span>(HAlign_Fill)</span><br><span class="line">            , <span class="built_in">VAlignment</span>(VAlign_Fill)</span><br><span class="line">            , <span class="built_in">SlotPadding</span>(<span class="number">0.0f</span>)</span><br><span class="line">        &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">FOverlaySlot&amp; <span class="title">HAlign</span><span class="params">( EHorizontalAlignment InHAlignment )</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        HAlignment = InHAlignment;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸ HAlign å‡½æ•°ç±»ä¼¼ï¼Œçœç•¥ VAlignï¼ŒPadding çš„è®¾ç½®å‡½æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…·æœ‰è¾ƒå¤§ZOrderå€¼çš„æ’æ§½å°†åœ¨å…·æœ‰è¾ƒå°ZOrderå€¼çš„æ’æ§½ä¸Šæ–¹ç»˜åˆ¶ã€‚</span></span><br><span class="line"><span class="comment">     * å…·æœ‰ç›¸åŒZOrderçš„æ’æ§½å°†æŒ‰ç…§æ·»åŠ é¡ºåºç®€å•åœ°ç»˜åˆ¶ã€‚</span></span><br><span class="line"><span class="comment">     * ç›®å‰ï¼Œè¿™ä»…é€‚ç”¨äºé€šè¿‡AddWidgetï¼ˆï¼‰å’ŒRemoveWidgetï¼ˆï¼‰åŠ¨æ€æ·»åŠ çš„è¦†ç›–æ’æ§½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    int32 ZOrder;</span><br><span class="line"></span><br><span class="line">    TEnumAsByte&lt;EHorizontalAlignment&gt; HAlignment;</span><br><span class="line">    TEnumAsByte&lt;EVerticalAlignment&gt; VAlignment;</span><br><span class="line"></span><br><span class="line">    TAttribute&lt; FMargin &gt; SlotPadding;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>æˆ‘ä»¬çš„ '[]' è¿ç®—ç¬¦è‚¯å®šæ˜¯ä¸èƒ½æ”¾åˆ°å…·ä½“ç±» 'FOverlaySlot'ï¼Œå› ä¸ºæ‰€æœ‰çš„ &quot;SlotType&quot; éƒ½éœ€è¦è¯¥æ–¹æ³•ã€‚æˆ‘ä»¬è¦å®ç°å¤ç”¨ï¼Œå°±è¦å°† '[]' çš„å®ç°æ”¾åœ¨å…¶åŸºç±» &quot;TSlotBase&quot; ä¸­ï¼Œå¹¶ä»¥ &quot;FOverlaySlot&quot; ä½œä¸ºæ¨¡æ¿å‚æ•°ã€‚ä»¥ä¸‹æ˜¯ '[]' çš„å®ç°ä»£ç ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>TSlotBase</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SlotBase.h</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> SlotType&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TSlotBase</span> :</span> <span class="keyword">public</span> FSlotBase</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	<span class="built_in">TSlotBase</span>()</span><br><span class="line">	: <span class="built_in">FSlotBase</span>()</span><br><span class="line">	&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">TSlotBase</span>( <span class="keyword">const</span> TSharedRef&lt;SWidget&gt;&amp; InWidget )</span><br><span class="line">	: <span class="built_in">FSlotBase</span>( InWidget )</span><br><span class="line">	&#123;&#125;</span><br><span class="line"></span><br><span class="line">	SlotType&amp; <span class="keyword">operator</span>[]( <span class="keyword">const</span> TSharedRef&lt;SWidget&gt;&amp; InChildWidget )</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// å°† FSlotBase ä¸­çš„ Widget æ›¿æ¢ä¸º InChildWidget</span></span><br><span class="line">		<span class="keyword">this</span>-&gt;<span class="built_in">AttachWidget</span>(InChildWidget);</span><br><span class="line">		<span class="keyword">return</span> (SlotType&amp;)(*<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">SlotType&amp; <span class="title">Expose</span><span class="params">( SlotType*&amp; OutVarToInit )</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		OutVarToInit = (SlotType*)<span class="keyword">this</span>;</span><br><span class="line">		<span class="keyword">return</span> (SlotType&amp;)(*<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ '[]' è¿ç®—ç¬¦é‡Œé¢æ˜¯éœ€è¦ä¼ å…¥ä¸€ä¸ª &quot;TSharedRef&lt;SWidget&gt;&quot; çš„ï¼Œè€Œæˆ‘ä»¬çš„ &quot;SNew ()&quot; å®çš„è¿”å›å€¼æ­£æ˜¯è¯¥ç±»å‹ï¼Œä»¥ä¸‹æ˜¯æºç ä¸­çš„æç¤º Usageï¼š</p><p></p><figure class="highlight c++"><figcaption><span>SOverlay.Usage</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *		SNew(SOverlay)</span></span><br><span class="line"><span class="comment"> *		+ SOverlay::Slot(SNew(SMyWidget1))</span></span><br><span class="line"><span class="comment"> *		+ SOverlay::Slot(SNew(SMyWidget2))</span></span><br><span class="line"><span class="comment"> *		+ SOverlay::Slot(SNew(SMyWidget3))</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p></p><h4 id="è¿ç®—ç¬¦å°ç»“"><a class="anchor" href="#è¿ç®—ç¬¦å°ç»“">#</a> è¿ç®—ç¬¦å°ç»“</h4><p>åˆ°æ­¤æˆ‘ä»¬å°±æŠŠä¸‰ä¸ªè¿ç®—ç¬¦çš„é‡è½½éƒ½åˆ†æå®Œäº†ã€‚æˆ‘ä»¬åœ¨å›é¡¾ä»¥ä¸‹è¿™æ®µä»£ç ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>SDetailsView.Construct èŠ‚é€‰</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsView.Construct èŠ‚é€‰ä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">SNew</span>(SOverlay)</span><br><span class="line">    + SOverlay::<span class="built_in">Slot</span>()</span><br><span class="line">    [</span><br><span class="line">    	<span class="comment">// æ·»åŠ ä¸€ä¸ªç»†èŠ‚æ ‘ï¼Œè¿”å› TSharedRef&lt; SDetailTree &gt;</span></span><br><span class="line">    	<span class="built_in">ConstructTreeView</span>(ExternalScrollbar)</span><br><span class="line">	]</span><br><span class="line">    + SOverlay::<span class="built_in">Slot</span>()</span><br><span class="line">    .<span class="built_in">HAlign</span>(HAlign_Right)</span><br><span class="line">    [</span><br><span class="line">    	<span class="comment">// æ·»åŠ ä¸€ä¸ª SBoxï¼Œè®¾ç½®è¯¥ SBox çš„ WidthOverride å±æ€§</span></span><br><span class="line">    	<span class="built_in">SNew</span>(SBox)</span><br><span class="line">    	.<span class="built_in">WidthOverride</span>(<span class="number">16.0f</span>)</span><br><span class="line">    	[</span><br><span class="line">            <span class="comment">// SBox æ˜¯ SingleChild çš„ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ &quot;[]&quot; ï¼Œä¸éœ€è¦ &quot;+ Slot()&quot;</span></span><br><span class="line">        	ExternalScrollbar</span><br><span class="line">    	]</span><br><span class="line">    <span class="comment">// ......</span></span><br></pre></td></tr></table></figure><p></p><p>æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p><ul><li>å…ˆæ‰§è¡Œ <code>SOverlay::Slot()</code> ï¼Œè¿”å›ä¸€ä¸ª &quot;FOverlaySlot&quot;</li><li>è°ƒç”¨ &quot;FOverlaySlot&quot; çš„ '[]' è¿ç®—ç¬¦ï¼Œå¹¶æ‰§è¡Œ &quot;ConstructTreeView&quot; å‡½æ•°ï¼Œå¾€ '[]' é‡Œæ·»åŠ ä¸€ä¸ª &quot;Slot&quot;</li><li>ç„¶åè°ƒç”¨ &quot;SNew&quot; é‡Œé¢çš„ &quot;SOverlay::FArgument&quot; çš„ '+' è¿ç®—ç¬¦ï¼Œå°†åˆšåˆšçš„ &quot;FOverlaySlot&quot; æ·»åŠ è¿› &quot;SOverlay::FArgument&quot; ä¸­</li><li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ + SOverlay::Slot () ......</li><li>æœ€åæ‰§è¡Œ &quot;SNew&quot; é‡Œé¢çš„ &quot;&lt;&lt;=&quot; è¿ç®—ç¬¦ï¼Œå°† &quot;SOverlay::FArgument&quot; ä½œä¸ºå‚æ•°ï¼Œæ„é€ å’±çš„ &quot;SOverlay&quot;ã€‚æ³¨æ„æˆ‘ä»¬ä¹‹å‰åšçš„éƒ½æ˜¯åœ¨åˆå§‹åŒ– &quot;SOverlay&quot; æ„é€ æ‰€éœ€è¦çš„ &quot;SOverlay::FArgument&quot;ï¼Œæœ€åä¸€æ­¥æ‰æ˜¯æ„é€  &quot;SOverlay&quot;ï¼Œå¹¶è¿”å›è¯¥ &quot;SOverlay&quot; çš„ SharedRefã€‚</li></ul><h3 id="ç»†èŠ‚æ ‘çš„æ„å»ºa-id-ç»†èŠ‚æ ‘çš„æ„å»º-a"><a class="anchor" href="#ç»†èŠ‚æ ‘çš„æ„å»ºa-id-ç»†èŠ‚æ ‘çš„æ„å»º-a">#</a> ç»†èŠ‚æ ‘çš„æ„å»º &lt;a id = &quot;ç»†èŠ‚æ ‘çš„æ„å»º&quot;&gt; &lt;/a&gt;</h3><h4 id="constructtreeview"><a class="anchor" href="#constructtreeview">#</a> ConstructTreeView</h4><p></p><figure class="highlight c++"><figcaption><span>ConstructTreeView</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsView.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function">TSharedRef&lt;SDetailTree&gt; <span class="title">SDetailsView::ConstructTreeView</span><span class="params">( TSharedRef&lt;SScrollBar&gt;&amp; ScrollBar )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">check</span>( !DetailTree.<span class="built_in">IsValid</span>() || DetailTree.<span class="built_in">IsUnique</span>() );</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">		<span class="built_in">SAssignNew</span>(DetailTree, SDetailTree)</span><br><span class="line">		.<span class="built_in">Visibility</span>(<span class="keyword">this</span>, &amp;SDetailsView::GetTreeVisibility)</span><br><span class="line">		.<span class="built_in">TreeItemsSource</span>(&amp;RootTreeNodes)</span><br><span class="line">		.<span class="built_in">OnGetChildren</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnGetChildrenForDetailTree)</span><br><span class="line">		.<span class="built_in">OnSetExpansionRecursive</span>(<span class="keyword">this</span>, &amp;SDetailsView::SetNodeExpansionStateRecursive)</span><br><span class="line">		.<span class="built_in">OnGenerateRow</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnGenerateRowForDetailTree)</span><br><span class="line">		.<span class="built_in">OnExpansionChanged</span>(<span class="keyword">this</span>, &amp;SDetailsView::OnItemExpansionChanged)</span><br><span class="line">		.<span class="built_in">SelectionMode</span>(ESelectionMode::None)</span><br><span class="line">		.<span class="built_in">HandleDirectionalNavigation</span>(<span class="literal">false</span>)</span><br><span class="line">		.<span class="built_in">AllowOverscroll</span>(DetailsViewArgs.bShowScrollBar ? EAllowOverscroll::Yes : EAllowOverscroll::No)</span><br><span class="line">		.<span class="built_in">ExternalScrollbar</span>(ScrollBar);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;SAssignNew&quot; è·Ÿ &quot;SNew&quot; çš„å®ç°åŸç†ä¸€æ ·ï¼Œåªæ˜¯ &quot;SAssignNew&quot; ä¸€èˆ¬ç”¨äºåˆå§‹åŒ– &quot;TSharedPtr&lt;SWidget&gt;&quot; , ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>SAssignNew</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * Slate widgets are constructed through SNew and SAssignNew.</span></span><br><span class="line"><span class="comment"> * e.g.</span></span><br><span class="line"><span class="comment"> *      </span></span><br><span class="line"><span class="comment"> *     TSharedRef&lt;SButton&gt; MyButton = SNew(SButton);</span></span><br><span class="line"><span class="comment"> *        or</span></span><br><span class="line"><span class="comment"> *     TSharedPtr&lt;SButton&gt; MyButton;</span></span><br><span class="line"><span class="comment"> *     SAssignNew( MyButton, SButton );</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Using SNew and SAssignNew ensures that widgets are populated</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p></p><p>å›åˆ° <code>ConstructTreeView</code> çš„å®ç°ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ˜¯åœ¨åˆå§‹åŒ– &quot;SDetailTree::FArgument&quot; çš„å‚æ•°ï¼Œæœ€åé€šè¿‡ &quot;SAssignNew&quot; çš„ '&lt;&lt;=' è¿ç®—ç¬¦ï¼Œè°ƒç”¨äº† &quot;SDetailTree::Construct&quot; æ„é€ äº†ä¸€ä¸ª &quot;SDetailTree&quot;ã€‚é‚£æˆ‘ä»¬å½“ç„¶æ˜¯ç›´æ¥å»çœ‹ &quot;SDetailTree::Construct&quot; çš„å®ç°å•¦ (å…¶ä»–å‚æ•°ä¹Ÿä¼šåœ¨ Construct ä¸­ç”¨åˆ°ï¼Œç”¨åˆ°å†å›æ¥çœ‹æ€ä¹ˆåˆå§‹åŒ–çš„)</p><h4 id="sdetailtreeconstruct"><a class="anchor" href="#sdetailtreeconstruct">#</a> SDetailTree::Construct</h4><p></p><figure class="highlight c++"><figcaption><span>SDetailTree::Construct</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsViewBase.h</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> STreeView&lt; TSharedRef&lt;<span class="class"><span class="keyword">class</span> <span class="title">FDetailTreeNode</span>&gt;</span> &gt; SDetailTree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ItemType&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">STreeView</span> :</span> <span class="keyword">public</span> SListView&lt; ItemType &gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Construct</span><span class="params">( <span class="keyword">const</span> FArguments&amp; InArgs )</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;Clipping = InArgs._Clipping;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>-&gt;OnGenerateRow = InArgs._OnGenerateRow;</span><br><span class="line">		<span class="keyword">this</span>-&gt;OnRowReleased = InArgs._OnRowReleased;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">this</span>-&gt;OnContextMenuOpening = InArgs._OnContextMenuOpening;</span><br><span class="line">		<span class="keyword">this</span>-&gt;OnClick = InArgs._OnMouseButtonClick;</span><br><span class="line">		<span class="keyword">this</span>-&gt;OnDoubleClick = InArgs._OnMouseButtonDoubleClick;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ... çœç•¥å„ç§å±æ€§åˆå§‹åŒ–</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ... çœç•¥é”™è¯¯è¾“å‡º</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ„é€ è¡¨è§†å›¾(List)</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">ConstructChildren</span>( <span class="number">0</span>, InArgs._ItemHeight, EListItemAlignment::LeftAligned, InArgs._HeaderRow, InArgs._ExternalScrollbar, Orient_Vertical, InArgs._OnTreeViewScrolled );</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;ScrollBar.<span class="built_in">IsValid</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è®¾ç½®æ»šåŠ¨æ¡ DargFocysCause äº‹ä»¶</span></span><br><span class="line">            <span class="keyword">this</span>-&gt;ScrollBar-&gt;<span class="built_in">SetDragFocusCause</span>(InArgs._ScrollbarDragFocusCause);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ·»åŠ å…ƒæ•°æ®ï¼Œä¸å±•å¼€</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">AddMetadata</span>(MakeShared&lt;TTableViewMetadata&lt;ItemType&gt;&gt;(<span class="keyword">this</span>-&gt;<span class="built_in">SharedThis</span>(<span class="keyword">this</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å»ºç»†èŠ‚æ ‘å®¹å™¨(ä¸ç”Ÿæˆç»†èŠ‚å±æ€§é¡¹[Item])</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">STableViewBase::ConstructChildren</span><span class="params">( <span class="keyword">const</span> TAttribute&lt;<span class="keyword">float</span>&gt;&amp; InItemWidth, <span class="keyword">const</span> TAttribute&lt;<span class="keyword">float</span>&gt;&amp; InItemHeight, <span class="keyword">const</span> TAttribute&lt;EListItemAlignment&gt;&amp; InItemAlignment, <span class="keyword">const</span> TSharedPtr&lt;SHeaderRow&gt;&amp; InHeaderRow, <span class="keyword">const</span> TSharedPtr&lt;SScrollBar&gt;&amp; InScrollBar, EOrientation InScrollOrientation, <span class="keyword">const</span> FOnTableViewScrolled&amp; InOnTableViewScrolled )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ä¸‹æ¬¡ Tick åˆ·æ–°ç»†èŠ‚æ ‘çš„æ¯ä¸€ä¸ªé¡¹</span></span><br><span class="line">	bItemsNeedRefresh = <span class="literal">true</span>;</span><br><span class="line">	</span><br><span class="line">	HeaderRow = InHeaderRow;</span><br><span class="line"></span><br><span class="line">	OnTableViewScrolled = InOnTableViewScrolled;</span><br><span class="line"></span><br><span class="line">	Orientation = InHeaderRow ? Orient_Vertical : InScrollOrientation;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// SNew ä¸€ä¸ªç©ºçš„åˆ—è¡¨é¢æ¿ (ç”¨æ¥æ”¾å±æ€§é¡¹)</span></span><br><span class="line">	ItemsPanel = <span class="built_in">SNew</span>(SListPanel)</span><br><span class="line">		.<span class="built_in">Clipping</span>(<span class="built_in">GetClipping</span>())</span><br><span class="line">		.<span class="built_in">ItemWidth</span>(InItemWidth)</span><br><span class="line">		.<span class="built_in">ItemHeight</span>(InItemHeight)</span><br><span class="line">		.<span class="built_in">NumDesiredItems</span>(<span class="keyword">this</span>, &amp;STableViewBase::GetNumItemsBeingObserved)</span><br><span class="line">		.<span class="built_in">ItemAlignment</span>(InItemAlignment)</span><br><span class="line">		.<span class="built_in">ListOrientation</span>(Orientation);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­˜æ”¾ &quot;ItemsPanel&quot; å’Œ &quot;Scrollbar&quot; çš„ SWidget (ä»¥ä¸‹ç®€ç§°å®¹å™¨)</span></span><br><span class="line">	TSharedPtr&lt;SWidget&gt; ListAndScrollbar;</span><br><span class="line">	<span class="keyword">if</span> (InScrollBar)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// å°† ScrollBar è®¾ç½®ä¸ºç”¨æˆ·ä¼ è¿›æ¥çš„æ»šåŠ¨æ¡ï¼Œå¹¶è®¾ç½®æ»šåŠ¨å›è°ƒ</span></span><br><span class="line">		ScrollBar = InScrollBar;</span><br><span class="line">		ScrollBar-&gt;<span class="built_in">SetOnUserScrolled</span>(FOnUserScrolled::<span class="built_in">CreateSP</span>(<span class="keyword">this</span>, &amp;STableViewBase::ScrollBar_OnUserScrolled));</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// å°†ç©ºçš„ ListPanel èµ‹ç»™å®¹å™¨</span></span><br><span class="line">		ListAndScrollbar = ItemsPanel;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// æ„é€ é»˜è®¤æ»šåŠ¨æ¡</span></span><br><span class="line">		ScrollBar = <span class="built_in">SNew</span>(SScrollBar)</span><br><span class="line">			.<span class="built_in">OnUserScrolled</span>(<span class="keyword">this</span>, &amp;STableViewBase::ScrollBar_OnUserScrolled)</span><br><span class="line">			.<span class="built_in">Orientation</span>(Orientation);</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">const</span> FOptionalSize <span class="title">ScrollBarSize</span><span class="params">(<span class="number">16.f</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// çºµå‘å®¹å™¨</span></span><br><span class="line">		<span class="keyword">if</span> (Orientation == Orient_Vertical)</span><br><span class="line">		&#123;</span><br><span class="line">			ListAndScrollbar = <span class="built_in">SNew</span>(SHorizontalBox)</span><br><span class="line">				+SHorizontalBox::<span class="built_in">Slot</span>()</span><br><span class="line">				.<span class="built_in">FillWidth</span>(<span class="number">1</span>)</span><br><span class="line">				[</span><br><span class="line">                	<span class="comment">// å°† List æ·»åŠ åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">					ItemsPanel.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">				]</span><br><span class="line">				+SHorizontalBox::<span class="built_in">Slot</span>()</span><br><span class="line">				.<span class="built_in">AutoWidth</span>()</span><br><span class="line">				[</span><br><span class="line">					<span class="built_in">SNew</span>(SBox)</span><br><span class="line">					.<span class="built_in">WidthOverride</span>( <span class="built_in">FOptionalSize</span>( <span class="number">16</span> ) )</span><br><span class="line">					[</span><br><span class="line">                        <span class="comment">// ç”¨ SBox æŠŠ ScrollBar åŒ…èµ·æ¥æ·»åŠ åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">						ScrollBar.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">					]</span><br><span class="line">				];</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">// æ¨ªå‘å®¹å™¨</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			ListAndScrollbar = <span class="built_in">SNew</span>(SVerticalBox)</span><br><span class="line">				+SVerticalBox::<span class="built_in">Slot</span>()</span><br><span class="line">				.<span class="built_in">FillHeight</span>(<span class="number">1</span>)</span><br><span class="line">				[</span><br><span class="line">					ItemsPanel.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">				]</span><br><span class="line">				+SVerticalBox::<span class="built_in">Slot</span>()</span><br><span class="line">				.<span class="built_in">AutoHeight</span>()</span><br><span class="line">				[</span><br><span class="line">					<span class="built_in">SNew</span>(SBox)</span><br><span class="line">					.<span class="built_in">HeightOverride</span>(ScrollBarSize)</span><br><span class="line">					[</span><br><span class="line">						ScrollBar.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">					]</span><br><span class="line">				];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (InHeaderRow)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// å¤–éƒ¨ä¼ å…¥çš„æ»šåŠ¨æ¡ä¸ä¼šå‡ºç°åœ¨æ ‡é¢˜è¡Œä¸‹ï¼Œä¸éœ€è¦è¡¥å¿</span></span><br><span class="line">        <span class="keyword">if</span> (!InScrollBar)</span><br><span class="line">		&#123;</span><br><span class="line">			InHeaderRow-&gt;<span class="built_in">SetAssociatedVerticalScrollBar</span>(ScrollBar.<span class="built_in">ToSharedRef</span>(), <span class="number">16.f</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>-&gt;ChildSlot</span><br><span class="line">		[</span><br><span class="line">			<span class="built_in">SNew</span>(SVerticalBox)</span><br><span class="line">			+SVerticalBox::<span class="built_in">Slot</span>()</span><br><span class="line">			.<span class="built_in">AutoHeight</span>()</span><br><span class="line">			[</span><br><span class="line">                <span class="comment">// å°†æ ‡é¢˜è¡Œæ·»åŠ åˆ° ChildSlot ä¸­</span></span><br><span class="line">				InHeaderRow.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">			]</span><br><span class="line">			+SVerticalBox::<span class="built_in">Slot</span>()</span><br><span class="line">			.<span class="built_in">FillHeight</span>(<span class="number">1</span>)</span><br><span class="line">			[</span><br><span class="line">                <span class="comment">// å°†å®¹å™¨æ·»åŠ åˆ° ChildSlot ä¸­</span></span><br><span class="line">				ListAndScrollbar.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">			]</span><br><span class="line">		];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;ChildSlot</span><br><span class="line">		[</span><br><span class="line">            <span class="comment">// æ²¡æœ‰æ ‡é¢˜è¡Œåˆ™ç›´æ¥æŠŠå®¹å™¨åŠ åˆ° Child ä¸­</span></span><br><span class="line">			ListAndScrollbar.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">		];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ç»†èŠ‚æ ‘çš„æ„å»ºä¸»è¦æ˜¯åˆ›å»ºä¸€ä¸ªå¯ä»¥æ”¾ç½®ç»†èŠ‚èŠ‚ç‚¹çš„å®¹å™¨å’Œæ»šåŠ¨æ¡ï¼Œä»¥åŠå„ç§å›è°ƒäº‹ä»¶çš„åˆå§‹åŒ–ã€‚å¹¶ä¸è´Ÿè´£ç”Ÿæˆæ¯ä¸ªå…·ä½“å±æ€§é¡¹ (Item) ã€‚ç”Ÿæˆ (åˆ·æ–°) å±æ€§é¡¹æ˜¯åœ¨ Tick ä¸­å®Œæˆçš„ï¼Œä¸‹é¢æˆ‘ä»¬å°±å»çœ‹çœ‹ Tick æ˜¯æ€ä¹ˆç”Ÿæˆé¡¹çš„ã€‚</p><h3 id="tick-åˆ·æ–°èŠ‚ç‚¹"><a class="anchor" href="#tick-åˆ·æ–°èŠ‚ç‚¹">#</a> Tick åˆ·æ–°èŠ‚ç‚¹</h3><p></p><figure class="highlight c++"><figcaption><span>STreeView.Tick</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Tick</span><span class="params">( <span class="keyword">const</span> FGeometry&amp; AllottedGeometry, <span class="keyword">const</span> <span class="keyword">double</span> InCurrentTime, <span class="keyword">const</span> <span class="keyword">float</span> InDeltaTime )</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å†³å®šæ˜¯å¦éœ€è¦åˆ·æ–°å±æ€§é¡¹(Item)ï¼Œé»˜è®¤æ„é€ å‡½æ•°ä¸­ä¼šæŠŠå…¶è®¾ç½®ä¸º true</span></span><br><span class="line">    <span class="keyword">if</span> ( bTreeItemsAreDirty )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// &quot;ItemPanel&quot; æ˜¯å¦æ­£å¸¸åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> ( <span class="keyword">this</span>-&gt;ItemsPanel.<span class="built_in">IsValid</span>() )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// é‡æ–°å¡«å……å±æ€§é¡¹ï¼›æ„å»º TreeView çš„ ListView ä¹Ÿéœ€è¦åˆ·æ–°ã€‚</span></span><br><span class="line">            bTreeItemsAreDirty = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ( OnGetChildren.<span class="built_in">IsBound</span>() &amp;&amp; TreeItemsSource != <span class="literal">nullptr</span> )								</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// æˆ‘ä»¬ä¿ç•™ä¸€ä»½åŸæ¥çš„Itemä¿¡æ¯ï¼Œä»¥ä¾¿åé¢ç§»é™¤ä¸å†è¢«çœ‹åˆ°çš„Item</span></span><br><span class="line">                <span class="comment">// &quot;TempSelectedItemsMap&quot; å½“å‰æˆ‘ä»¬é€‰æ‹©çš„æ‰€æœ‰é¡¹çš„é›†åˆ</span></span><br><span class="line">                TItemSet TempSelectedItemsMap;</span><br><span class="line">                TSparseItemMap TempSparseItemInfo;</span><br><span class="line">                TArray&lt;FItemInfo&gt; TempDenseItemInfos;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// é‡å»ºæ ‘æ•°æ®çš„çº¿æ€§è§†å›¾</span></span><br><span class="line">                LinearizedItems.<span class="built_in">Empty</span>();</span><br><span class="line">                <span class="built_in">PopulateLinearizedItems</span>( *TreeItemsSource, LinearizedItems, TempDenseItemInfos, TBitArray&lt;&gt;(), TempSelectedItemsMap, TempSparseItemInfo, <span class="literal">true</span>, INDEX_NONE );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>( !bAllowInvisibleItemSelection &amp;&amp;</span><br><span class="line">                   (<span class="keyword">this</span>-&gt;SelectedItems.<span class="built_in">Num</span>() != TempSelectedItemsMap.<span class="built_in">Num</span>() ||</span><br><span class="line">                    <span class="keyword">this</span>-&gt;SelectedItems.<span class="built_in">Difference</span>(TempSelectedItemsMap).<span class="built_in">Num</span>() &gt; <span class="number">0</span> || </span><br><span class="line">                    TempSelectedItemsMap.<span class="built_in">Difference</span>(<span class="keyword">this</span>-&gt;SelectedItems).<span class="built_in">Num</span>() &gt; <span class="number">0</span> ))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>-&gt;SelectedItems = TempSelectedItemsMap;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> ( !TListTypeTraits&lt;ItemType&gt;::<span class="built_in">IsPtrValid</span>( <span class="keyword">this</span>-&gt;RangeSelectionStart ) ||</span><br><span class="line">                        !<span class="keyword">this</span>-&gt;SelectedItems.<span class="built_in">Contains</span>( TListTypeTraits&lt;ItemType&gt;::<span class="built_in">NullableItemTypeConvertToItemType</span>( <span class="keyword">this</span>-&gt;RangeSelectionStart ) ))</span><br><span class="line">                    &#123;</span><br><span class="line">                        TListTypeTraits&lt; ItemType &gt;::<span class="built_in">ResetPtr</span>( <span class="keyword">this</span>-&gt;RangeSelectionStart );</span><br><span class="line">                        TListTypeTraits&lt; ItemType &gt;::<span class="built_in">ResetPtr</span>( <span class="keyword">this</span>-&gt;SelectorItem );</span><br><span class="line">                    &#125;	</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> ( !TListTypeTraits&lt;ItemType&gt;::<span class="built_in">IsPtrValid</span>( <span class="keyword">this</span>-&gt;SelectorItem ) || </span><br><span class="line">                             !<span class="keyword">this</span>-&gt;SelectedItems.<span class="built_in">Contains</span>( TListTypeTraits&lt;ItemType&gt;::<span class="built_in">NullableItemTypeConvertToItemType</span>( <span class="keyword">this</span>-&gt;SelectorItem ) ) )</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">this</span>-&gt;SelectorItem = <span class="keyword">this</span>-&gt;RangeSelectionStart;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// æ¿€æ´»é€‰æ‹©æ”¹å˜æ—¶ä»£ç†(OnSelectionChanged)</span></span><br><span class="line">                    <span class="keyword">this</span>-&gt;<span class="built_in">Private_SignalSelectionChanged</span>(ESelectInfo::Direct);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è¿™äº›åº”è¯¥åœ¨Private_Signal SelectionChanged()ä¹‹åå‡ºç°;</span></span><br><span class="line">                <span class="comment">// å› ä¸ºé€šè¿‡ä¸€ç³»åˆ—è°ƒç”¨ï¼ŒPrivate_SignalSelectionChanged()å¯èƒ½ä¼šåœ¨ç´¢å¼•åˆ°è¿™äº›æ•°ç»„ä¸­ä»»ä½•ä¸€ä¸ªçš„å­çº§ä¸­ç»“æŸï¼ˆè¯¥ç´¢å¼•å°šæœªæ›´æ–°ï¼Œå¹¶ä¸”å¯èƒ½æ— æ•ˆï¼‰</span></span><br><span class="line">                SparseItemInfos = <span class="built_in">MoveTemp</span>(TempSparseItemInfo);</span><br><span class="line">                DenseItemInfos  = <span class="built_in">MoveTemp</span>(TempDenseItemInfos);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// åªæœ‰é€‰æ‹©æ”¹å˜äº‹ä»¶è¢«æ¿€æ´»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°çˆ¶èŠ‚ç‚¹çš„é«˜äº®çŠ¶æ€</span></span><br><span class="line">                <span class="keyword">if</span> (bHighlightParentNodesForSelection)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>-&gt;<span class="built_in">Private_UpdateParentHighlights</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ TreeView åŸºç±»çš„ Tickï¼Œä»¥ä¾¿åŸºç±»ä¹Ÿèƒ½è¢«åˆ·æ–°</span></span><br><span class="line">    <span class="comment">// è°ƒç”¨è¯¥å‡½æ•°æ˜¯å› ä¸º TreeView éœ€è¦åˆ·æ–°ï¼Œæˆ–æœ‰æ–°çš„ Items å› ä¸ºåˆ—è¡¨ç¼©æ”¾æˆ–æ»‘åŠ¨å˜ä¸ºå¯è§</span></span><br><span class="line">    SListView&lt; ItemType &gt;::<span class="built_in">Tick</span>(AllottedGeometry, InCurrentTime, InDeltaTime);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><figure class="highlight c++"><figcaption><span>STableViewBase.Tick</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// STableViewBase.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">STableViewBase::Tick</span><span class="params">( <span class="keyword">const</span> FGeometry&amp; AllottedGeometry, <span class="keyword">const</span> <span class="keyword">double</span> InCurrentTime, <span class="keyword">const</span> <span class="keyword">float</span> InDeltaTime )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (ItemsPanel.<span class="built_in">IsValid</span>())</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// å…ˆè·å– ItemPanel çš„å‡ ä½•ä½“(ä½ç½®å¤§å°ä¿¡æ¯)</span></span><br><span class="line">		FGeometry PanelGeometry = <span class="built_in">FindChildGeometry</span>( AllottedGeometry, ItemsPanel.<span class="built_in">ToSharedRef</span>() );</span><br><span class="line">        <span class="comment">// bItemNeedRefresh åœ¨ä¹‹å‰çš„ &quot;STableViewBase::ConstructChildren&quot; ä¸­è¢«è®¾ä¸º true</span></span><br><span class="line">        <span class="comment">// å‡ ä½•ä½“å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ä¹Ÿæ˜¯éœ€è¦åˆ·æ–°Item(é¡¹)çš„</span></span><br><span class="line">		<span class="keyword">if</span> ( bItemsNeedRefresh || PanelGeometryLastTick.<span class="built_in">GetLocalSize</span>() != PanelGeometry.<span class="built_in">GetLocalSize</span>())</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">// ç¼“å­˜å½“å‰çª—å£çš„é›†åˆä½“æ•°æ®ï¼Œä»¥å¤‡ä¸‹æ¬¡åˆ·æ–°æ—¶åšå¯¹æ¯”</span></span><br><span class="line">			PanelGeometryLastTick = PanelGeometry;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">const</span> int32 NumItemsPerLine = <span class="built_in">GetNumItemsPerLine</span>();</span><br><span class="line">            <span class="comment">// æ˜¯å¦æœ‰æ–°çš„ Item è¿›å…¥è§†å›¾ï¼Œç”¨äºæ¿€æ´» OnItemScrolledIntoView ä»£ç†</span></span><br><span class="line">			<span class="keyword">const</span> EScrollIntoViewResult ScrollIntoViewResult = <span class="built_in">ScrollIntoView</span>(PanelGeometry);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç›®æ ‡æ»šåŠ¨åç§»(ç›®æ ‡ä½ç½®çš„ç¬¬ä¸€ä¸ªé¡¹çš„åºå·)</span></span><br><span class="line">			<span class="keyword">double</span> TargetScrollOffset = <span class="built_in">GetTargetScrollOffset</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…è®¸åŠ¨ç”»åŒ–æ»šåŠ¨</span></span><br><span class="line">			<span class="keyword">if</span> (bEnableAnimatedScrolling)</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// æ’å€¼ç®—æ»šåŠ¨åç§»</span></span><br><span class="line">				CurrentScrollOffset = FMath::<span class="built_in">FInterpTo</span>(CurrentScrollOffset, TargetScrollOffset, InDeltaTime, <span class="number">12.f</span>);</span><br><span class="line">				<span class="keyword">if</span> (FMath::<span class="built_in">IsNearlyEqual</span>(CurrentScrollOffset, TargetScrollOffset, <span class="number">0.01</span>))</span><br><span class="line">				&#123;</span><br><span class="line">					CurrentScrollOffset = TargetScrollOffset;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// ç›´æ¥è®¾ç½®åç§»</span></span><br><span class="line">				CurrentScrollOffset = TargetScrollOffset;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// é‡æ–°ç”Ÿæˆé¡¹ï¼Œé‡è¦å‡½æ•°ï¼Œä¸‹æ–‡åˆ†æ (å¯ä»¥æ˜¯List Itemsï¼Œä¹Ÿå¯ä»¥æ˜¯table Items)</span></span><br><span class="line">			<span class="keyword">const</span> FReGenerateResults ReGenerateResults = <span class="built_in">ReGenerateItems</span>( PanelGeometry );</span><br><span class="line">            <span class="comment">// ç¼“å­˜æ–°ç”Ÿæˆé¡¹çš„æ•°æ®</span></span><br><span class="line">			LastGenerateResults = ReGenerateResults;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–å¯ä»¥è¢«çœ‹è§çš„ Item çš„ä¸ªæ•°ï¼Œè®¡ç®—éœ€è¦å¤šå°‘è¡Œ</span></span><br><span class="line">			<span class="keyword">const</span> int32 NumItemsBeingObserved = <span class="built_in">GetNumItemsBeingObserved</span>();</span><br><span class="line">			<span class="keyword">const</span> int32 NumItemLines = NumItemsBeingObserved / NumItemsPerLine;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ˜¯å¦å¯ä»¥å®Œå…¨å®¹çº³æ‰€æœ‰é¡¹ï¼Œè®¾ç½®å½“å‰æ»šåŠ¨åç§»</span></span><br><span class="line">			<span class="keyword">const</span> <span class="keyword">double</span> InitialDesiredOffset = DesiredScrollOffset;</span><br><span class="line">			<span class="keyword">const</span> <span class="keyword">bool</span> bEnoughRoomForAllItems = ReGenerateResults.ExactNumLinesOnScreen &gt;= NumItemLines;</span><br><span class="line">			<span class="keyword">if</span> (bEnoughRoomForAllItems)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">SetScrollOffset</span>(<span class="number">0.0</span>);</span><br><span class="line">				CurrentScrollOffset = TargetScrollOffset = DesiredScrollOffset;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (ReGenerateResults.bGeneratedPastLastItem)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">SetScrollOffset</span>(FMath::<span class="built_in">Max</span>(<span class="number">0.0</span>, ReGenerateResults.NewScrollOffset));</span><br><span class="line">				CurrentScrollOffset = TargetScrollOffset = DesiredScrollOffset;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="comment">// è®¡ç®—å½“å‰ç¬¬ä¸€è¡Œçš„æ»šåŠ¨åç§»</span></span><br><span class="line">			<span class="keyword">double</span> FirstLineScrollOffset = CurrentScrollOffset / NumItemsPerLine;</span><br><span class="line">			FirstLineScrollOffset = FirstLineScrollOffset - (int64)FirstLineScrollOffset;</span><br><span class="line">			ItemsPanel-&gt;<span class="built_in">SetFirstLineScrollOffset</span>(FirstLineScrollOffset);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¿‡åº¦æ»šåŠ¨ç›¸å…³è®¾ç½®</span></span><br><span class="line">			<span class="keyword">if</span> (AllowOverscroll == EAllowOverscroll::Yes)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">const</span> <span class="keyword">float</span> OverscrollAmount = Overscroll.<span class="built_in">GetOverscroll</span>(<span class="built_in">GetTickSpaceGeometry</span>());</span><br><span class="line">				ItemsPanel-&gt;<span class="built_in">SetOverscrollAmount</span>( OverscrollAmount );</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°é€‰å®šé¡¹é›†</span></span><br><span class="line">			<span class="built_in">UpdateSelectionSet</span>();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// æ›´æ–°æ»šåŠ¨æ¡</span></span><br><span class="line">			<span class="keyword">if</span> (NumItemsBeingObserved &gt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (ReGenerateResults.ExactNumLinesOnScreen &lt; <span class="number">1.0f</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">// è®¡ç®—æ»šåŠ¨æ¡çš„sizeæ¯”ä¾‹ = å‡ ä½•ä½“çš„Y / æ‰€æœ‰é¡¹çš„Lengthå’Œ</span></span><br><span class="line">					<span class="keyword">const</span> <span class="keyword">double</span> VisibleSizeFraction = AllottedGeometry.<span class="built_in">GetLocalSize</span>().Y / ReGenerateResults.LengthOfGeneratedItems;</span><br><span class="line">					<span class="keyword">const</span> <span class="keyword">double</span> ThumbSizeFraction = FMath::<span class="built_in">Min</span>(VisibleSizeFraction, <span class="number">1.0</span>);</span><br><span class="line">                    <span class="comment">// è®¡ç®—åç§»æ¯”ä¾‹</span></span><br><span class="line">					<span class="keyword">const</span> <span class="keyword">double</span> OffsetFraction = CurrentScrollOffset / NumItemsBeingObserved;</span><br><span class="line">					ScrollBar-&gt;<span class="built_in">SetState</span>( OffsetFraction, ThumbSizeFraction );</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">// è®¡ç®—æ»šåŠ¨æ¡çš„sizeæ¯”ä¾‹ = å¯æ˜¾ç¤ºçš„è¡Œæ•° / æ€»è¡Œæ•°</span></span><br><span class="line">                    <span class="keyword">const</span> <span class="keyword">double</span> ThumbSizeFraction = ReGenerateResults.ExactNumLinesOnScreen / NumItemLines;</span><br><span class="line">					<span class="keyword">const</span> <span class="keyword">double</span> OffsetFraction = CurrentScrollOffset / NumItemsBeingObserved;</span><br><span class="line">					ScrollBar-&gt;<span class="built_in">SetState</span>( OffsetFraction, ThumbSizeFraction );</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// å¯ä»¥å®¹ä¸‹å…¨éƒ¨ Items</span></span><br><span class="line">				<span class="keyword">const</span> <span class="keyword">double</span> ThumbSizeFraction = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">const</span> <span class="keyword">double</span> OffsetFraction = <span class="number">0</span>;</span><br><span class="line">				ScrollBar-&gt;<span class="built_in">SetState</span>( OffsetFraction, ThumbSizeFraction );</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ˜¯å¦å·²å¤„äºåˆ—è¡¨æœ€ä¸‹æ–¹</span></span><br><span class="line">			bWasAtEndOfList = (ScrollBar-&gt;<span class="built_in">DistanceFromBottom</span>() &lt; SMALL_NUMBER);</span><br><span class="line"></span><br><span class="line">			bItemsNeedRefresh = <span class="literal">false</span>;</span><br><span class="line">			ItemsPanel-&gt;<span class="built_in">SetRefreshPending</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">			<span class="built_in">Invalidate</span>(EInvalidateWidget::ChildOrder);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">const</span> <span class="keyword">bool</span> bScrollIntoViewSuccess = ScrollIntoViewResult == EScrollIntoViewResult::Success;</span><br><span class="line">			<span class="keyword">if</span> (bScrollIntoViewSuccess)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// åªè¦æœ‰æ–°çš„ Item è¿›å…¥è§†å›¾ï¼Œæ¿€æ´»è¯¥é€šçŸ¥</span></span><br><span class="line">				<span class="built_in">NotifyItemScrolledIntoView</span>();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (!bScrollIntoViewSuccess || CurrentScrollOffset != TargetScrollOffset)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// å¦‚æœæˆ‘ä»¬æ²¡æœ‰åˆ›å»ºè¯¥ Item æˆ–è€…ä»ç„¶å¤„äºæ»šåŠ¨çŠ¶æ€ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åœ¨ä¸‹ä¸€å¸§åˆ·æ–°</span></span><br><span class="line">                <span class="comment">// æˆ‘ä»¬è°ƒç”¨å¦‚ä¸‹å‡½æ•° è€Œä¸æ˜¯ç›´æ¥å°† &quot;bItemNeedRefresh&quot; è®¾ç½®ä¸º trueï¼Œæ˜¯ä¸ºäº†ç¡®ä¿ &quot;EnsureTickToRefresh&quot; è¢«æ³¨å†Œ</span></span><br><span class="line">                <span class="comment">// è¯¥å‡½æ•°å°† ItemPanel è®¾ç½®ä¸ºæŒ‚èµ·åˆ·æ–°ï¼Œä¼šåœ¨åé¢çš„å¸§æ›´æ–°ä¸­å¾—åˆ°æ›´æ–°</span></span><br><span class="line">				<span class="built_in">RequestLayoutRefresh</span>();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ&quot;STreeView&quot; çš„ &quot;Tick&quot; å‡½æ•°å®é™…ä¸Šæ˜¯è°ƒç”¨è‡ªå·± åŠå…¶åŸºç±» &quot;STableViewBase&quot; çš„ &quot;Tick&quot; å‡½æ•°çš„ (ä¸Šé¢ä¸¤æ®µä»£ç )ã€‚ä¸»è¦å®Œæˆäº†ä»¥ä¸‹å‡ ä¸ªä»»åŠ¡ (å…·ä½“æ­¥éª¤å†™åœ¨æ³¨é‡Šé‡Œäº†)ï¼š</p><ul><li>é‡å»ºæ ‘æ•°æ®çš„çº¿æ€§è§†å›¾ï¼Œæ¿€æ´» &quot;OnSelectionChanged&quot; ä»£ç†</li><li>å°†çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºé«˜äº®</li><li>è®¡ç®—æ»šåŠ¨åç§»é‡ï¼Œæ’å€¼è®¡ç®—å½“å‰åç§»é‡</li><li><strong>é‡æ–°ç”Ÿæˆå±æ€§é¡¹ &quot;Items&quot;ï¼Œå…·ä½“ä»£ç ä¸‹æ–‡åˆ†æ</strong></li><li>è®¡ç®— &quot;ItemsPanel&quot; ä¸­å¯è§çš„é¦–è¡Œæ»šåŠ¨åç§»é‡</li><li>è®¾ç½®è¿‡åº¦åç§»</li><li>æ›´æ–°å·²é€‰çš„ Items é›†åˆ</li><li>æ›´æ–°æ»šåŠ¨æ¡</li><li>å¦‚æœæœ‰æ–° Item è¿›å…¥çª—å£ï¼Œåˆ™æ¿€æ´» &quot;OnItemScrolledIntoView&quot; ä»£ç†</li><li>å¦‚æœæ²¡æœ‰åˆ›å»ºè¯¥ Item æˆ–è€…ä»ç„¶å¤„äºæ»šåŠ¨çŠ¶æ€ï¼Œè¿›å…¥æŒ‚èµ·åˆ·æ–°çŠ¶æ€</li></ul><p>åˆ°è¿™é‡Œå…¶å®æˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰å¼„æ˜ç™½ï¼š&quot;SDetailsView&quot; ä¸­æ¯ä¸ªé¡¹ (å…·ä½“å±æ€§) éƒ½æ˜¯æ€ä¹ˆç”Ÿæˆå‡ºæ¥çš„ï¼Ÿ</p><p>è«æ€¥ï¼Œå’±è¿™å°±å¼€å§‹åˆ†æï¼Œç­”æ¡ˆå°±åœ¨ &quot;ReGenerateItems&quot; å‡½æ•°ä¸­ ğŸ˜ƒ</p><h3 id="ç”Ÿæˆå±æ€§é¡¹"><a class="anchor" href="#ç”Ÿæˆå±æ€§é¡¹">#</a> ç”Ÿæˆå±æ€§é¡¹</h3><h4 id="regenerateitems"><a class="anchor" href="#regenerateitems">#</a> ReGenerateItems</h4><p></p><figure class="highlight c++"><figcaption><span>ReGenerateItems</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SListView.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> FReGenerateResults <span class="title">ReGenerateItems</span><span class="params">( <span class="keyword">const</span> FGeometry&amp; MyGeometry )</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ä»æˆ‘ä»¬çš„é¢æ¿ä¸­æ¸…é™¤æ‰€æœ‰çš„é¡¹ã€‚æˆ‘ä»¬å°†é‡æ–°æŒ‰æ­£ç¡®çš„é¡ºåºæ·»åŠ ä»–ä»¬</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">ClearWidgets</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ &quot;FGenerationPassGuard&quot;ï¼Œä»¥ä¾¿è®°å½•æˆ‘ä»¬å½“å‰å·²ç”Ÿæˆçš„ Widget</span></span><br><span class="line">    <span class="function">FGenerationPassGuard <span class="title">GenerationPassGuard</span><span class="params">(WidgetGenerator)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ItemsSource &amp;&amp; ItemsSource-&gt;<span class="built_in">Num</span>() &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è§†å›¾ä¸­çš„é¡¹ï¼ŒåŒ…å«å°æ•°é¡¹</span></span><br><span class="line">        <span class="keyword">float</span> ItemsInView = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç›®å‰ä¸ºæ­¢ç”Ÿæˆçš„æ‰€æœ‰ Widgets çš„é•¿åº¦(ç«–ç›´åˆ—è¡¨ä¸ºé«˜åº¦ï¼Œæ¨ªå‘åˆ—è¡¨ä¸ºå®½åº¦)</span></span><br><span class="line">        <span class="keyword">float</span> LengthGeneratedSoFar = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åœ¨æ˜¾ç¤ºæ ä¸­ç”Ÿæˆçš„ Widgets çš„é•¿åº¦</span></span><br><span class="line">        <span class="keyword">float</span> ViewLengthUsedSoFar = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŸºäºå½“å‰æ»šåŠ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¼€å§‹ç”Ÿæˆé¡¹çš„ç´¢å¼•</span></span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œæœ€å°‘å¿…é¡»ç”Ÿæˆä¸€ä¸ªé¡¹</span></span><br><span class="line">        int32 StartIndex = FMath::<span class="built_in">Clamp</span>( FMath::<span class="built_in">FloorToInt</span>(CurrentScrollOffset), <span class="number">0</span>, ItemsSource-&gt;<span class="built_in">Num</span>() - <span class="number">1</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªç”Ÿæˆé¡¹çš„é•¿åº¦ã€‚æ­¤é¡¹ä½äºç”¨æˆ·éœ€è¦æˆ‘ä»¬æ»šåŠ¨åˆ°çš„åœ°æ–¹</span></span><br><span class="line">        <span class="keyword">float</span> FirstItemLength = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»“æŸæ ‡å¿—</span></span><br><span class="line">        <span class="keyword">bool</span> bHasFilledAvailableArea = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">bool</span> bAtEndOfList = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¸ƒå±€ç¼©æ”¾ä¿®æ”¹å™¨</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">float</span> LayoutScaleMultiplier = MyGeometry.<span class="built_in">GetAccumulatedLayoutTransform</span>().<span class="built_in">GetScale</span>();</span><br><span class="line">        <span class="comment">// è¡¨çš„ç»´åº¦ä¿¡æ¯(æ˜¯å¦ç«–ç›´è¡¨ï¼Œè¡¨çš„é•¿å’Œå®½)</span></span><br><span class="line">        <span class="function">FTableViewDimensions <span class="title">MyDimensions</span><span class="params">(<span class="keyword">this</span>-&gt;Orientation, MyGeometry.GetLocalSize())</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†æ‰€æœ‰ Item ç›´è‡³å…¨éƒ¨éå†å®Œï¼Œæˆ–å·²å¡«æ»¡æ•´ä¸ªå¯å¡«å……åŒºåŸŸ</span></span><br><span class="line">        <span class="keyword">for</span>( int32 ItemIndex = StartIndex; !bHasFilledAvailableArea &amp;&amp; ItemIndex &lt; ItemsSource-&gt;<span class="built_in">Num</span>(); ++ItemIndex )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">const</span> ItemType&amp; CurItem = (*ItemsSource)[ItemIndex];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!TListTypeTraits&lt;ItemType&gt;::<span class="built_in">IsPtrValid</span>(CurItem))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// è·³è¿‡æ— æ•ˆé¡¹</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¸ºå½“å‰é¡¹ç”Ÿæˆ Widgetï¼Œé‡è¦å‡½æ•°ï¼Œä¸‹æ–‡åˆ†æ</span></span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">float</span> ItemLength = <span class="built_in">GenerateWidgetForItem</span>(CurItem, ItemIndex, StartIndex, LayoutScaleMultiplier);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ä¸ªé¡¹éœ€è¦ç‰¹æ®Šå¤„ç†</span></span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">bool</span> bIsFirstItem = ItemIndex == StartIndex;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (bIsFirstItem)</span><br><span class="line">            &#123;</span><br><span class="line">                FirstItemLength = ItemLength;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·Ÿè¸ªè§†å›¾ä¸­é¡¹çš„æ•°é‡ï¼ŒåŒ…æ‹¬å°æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (bIsFirstItem)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// ç¬¬ä¸€é¡¹å¯èƒ½ä¸èƒ½å®Œå…¨æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line">                <span class="comment">// &quot;FirstItemFractionScrolledIntoView&quot; æ˜¯ç¬¬ä¸€ä¸ªé¡¹å¯æ˜¾ç¤ºçš„ç™¾åˆ†æ¯”</span></span><br><span class="line">                <span class="comment">// &quot;CurrentScrollOffset&quot; è¡¨ç¤ºå½“å‰çš„æ»šåŠ¨åç§»é‡ï¼Œæ•°å­—è¡¨ç¤ºå…¶å®æ˜¯ å½“å‰é¡¹ + å½“å‰é¡¹å·²æ»‘è¿‡çš„ç™¾åˆ†æ¯”</span></span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">float</span> FirstItemFractionScrolledIntoView = <span class="number">1.0f</span> - FMath::<span class="built_in">Max</span>(FMath::<span class="built_in">Fractional</span>(CurrentScrollOffset), <span class="number">0.0f</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// FirstItemLengthScrolledIntoView æ˜¯ç¬¬ä¸€é¡¹åœ¨å½“å‰æ»šåŠ¨å®šä½ä¸‹å¯æ˜¾ç¤ºçš„æœ€å¤§é•¿åº¦</span></span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">float</span> FirstItemLengthScrolledIntoView = ItemLength * FirstItemFractionScrolledIntoView;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// FirstItemVisibleFraction æ˜¯ ç¬¬ä¸€é¡¹åœ¨å½“å‰çª—å£å¯æ˜¾ç¤ºçš„ç™¾åˆ†æ¯”</span></span><br><span class="line">                <span class="comment">// Min è¿ç®—ä¸­ï¼Œå‰è€…ç”¨äºç¬¬ä¸€é¡¹é•¿åº¦å·²å¤§äºæ•´ä¸ªåˆ—è¡¨æ—¶åªæ˜¾ç¤º ScrollAxis/Length ç™¾åˆ†æ¯”çš„é¡¹</span></span><br><span class="line">                <span class="comment">// åè€…ç”¨äºé¡¹éœ€æ˜¾ç¤ºçš„é•¿åº¦å¯å®Œå…¨æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­æ—¶ï¼Œè¡¨ç¤ºæ‰€éœ€æ˜¾ç¤ºçš„ç™¾åˆ†æ¯”</span></span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">float</span> FirstItemVisibleFraction = FMath::<span class="built_in">Min</span>(MyDimensions.ScrollAxis / FirstItemLengthScrolledIntoView, FirstItemFractionScrolledIntoView);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å°†å¯æ˜¾ç¤ºçš„åˆ†æ•°æ·»åŠ åˆ° ItemInView ä¸­</span></span><br><span class="line">                ItemsInView += FirstItemVisibleFraction;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (ViewLengthUsedSoFar + ItemLength &gt; MyDimensions.ScrollAxis)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// æœ€åä¸€é¡¹ä¹Ÿå¯èƒ½ä¸å®Œå…¨å¯è§</span></span><br><span class="line">                ItemsInView += (MyDimensions.ScrollAxis - ViewLengthUsedSoFar) / ItemLength;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                ItemsInView += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°å½“å‰æ‰€æœ‰ç”Ÿæˆçš„Itemçš„é•¿åº¦å’Œ</span></span><br><span class="line">            LengthGeneratedSoFar += ItemLength;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°å½“å‰å·²ä½¿ç”¨çš„è§†å›¾é•¿åº¦</span></span><br><span class="line">            ViewLengthUsedSoFar += (bIsFirstItem)</span><br><span class="line">                ? ItemLength * ItemsInView	<span class="comment">// For the first item, ItemsInView &lt;= 1.0f</span></span><br><span class="line">                : ItemLength;</span><br><span class="line"></span><br><span class="line">            bAtEndOfList = ItemIndex &gt;= ItemsSource-&gt;<span class="built_in">Num</span>() - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (bIsFirstItem &amp;&amp; ViewLengthUsedSoFar &gt;= MyDimensions.ScrollAxis)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœå½“å‰å·²ä½¿ç”¨çª—å£æ›´æ–°æ˜¯å¦å·²å¡«æ»¡æ‰€æœ‰å¯å¡«å……åŒºåŸŸ</span></span><br><span class="line">                bHasFilledAvailableArea = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// æ³¨æ„: å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™éœ€è¦è·Ÿä¸Šä¸€ä¸ªå…ƒç´ ä¿æŒä¸€å®šè·ç¦»</span></span><br><span class="line">                <span class="comment">// ä¸ºäº†é¿å…ç´¯ç§¯è¯¯å·®ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Š FloatPrecisionOffset</span></span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">float</span> FloatPrecisionOffset = <span class="number">0.001f</span>;</span><br><span class="line">                bHasFilledAvailableArea = ViewLengthUsedSoFar &gt;= MyDimensions.ScrollAxis + FloatPrecisionOffset;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰æ»šåŠ¨ä½ç½®ä¸‹å·²æ˜¾ç¤ºæœ€åä¸€ä¸ªé¡¹ï¼Œä½†è¿˜æœ‰é¢å¤–ç©ºé—´</span></span><br><span class="line">        <span class="comment">// è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ä¸å½±å“å½“å‰é¡¹çš„æ˜¾ç¤ºçš„æƒ…å†µä¸‹ï¼Œå›é€€ä»¥æ˜¾ç¤ºæ›´å¤šçš„é¡¹</span></span><br><span class="line">        <span class="keyword">if</span> (bAtEndOfList &amp;&amp; !bHasFilledAvailableArea)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è®¡ç®—å›é€€åˆ°çš„æ»šåŠ¨åç§»é‡</span></span><br><span class="line">            <span class="keyword">double</span> NewScrollOffsetForBackfill = <span class="keyword">static_cast</span>&lt;<span class="keyword">double</span>&gt;(StartIndex) + (LengthGeneratedSoFar - MyDimensions.ScrollAxis) / FirstItemLength;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä»å½“å‰ç¬¬ä¸€é¡¹å¼€å§‹å‘å‰éå†ï¼Œç›´è‡³éå†å®Œæ‰€æœ‰å‰é¢çš„å…ƒç´ ï¼Œæˆ–å®¹å™¨å¡«æ»¡</span></span><br><span class="line">            <span class="comment">// è®¡ç®— &quot;LengthGeneratedSoFar&quot;ï¼Œç”¨æ¥åœ¨åé¢è°ƒç”¨ &quot;FReGenerateResults&quot;</span></span><br><span class="line">            <span class="keyword">for</span> (int32 ItemIndex = StartIndex - <span class="number">1</span>; LengthGeneratedSoFar &lt; MyDimensions.ScrollAxis &amp;&amp; ItemIndex &gt;= <span class="number">0</span>; --ItemIndex)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">const</span> ItemType&amp; CurItem = (*ItemsSource)[ItemIndex];</span><br><span class="line">                <span class="keyword">if</span> (TListTypeTraits&lt;ItemType&gt;::<span class="built_in">IsPtrValid</span>(CurItem))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">const</span> <span class="keyword">float</span> ItemLength = <span class="built_in">GenerateWidgetForItem</span>(CurItem, ItemIndex, StartIndex, LayoutScaleMultiplier);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (LengthGeneratedSoFar + ItemLength &gt; MyDimensions.ScrollAxis &amp;&amp; ItemLength &gt; <span class="number">0.f</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">// ç”Ÿæˆæ”¾åœ¨é¡¶éƒ¨çš„Itemï¼Œè®¡ç®—æ­¤é¡¹è¶…å‡ºåˆ—è¡¨çš„éƒ¨åˆ†</span></span><br><span class="line">                        NewScrollOffsetForBackfill = <span class="keyword">static_cast</span>&lt;<span class="keyword">double</span>&gt;(ItemIndex) + (LengthGeneratedSoFar + ItemLength - MyDimensions.ScrollAxis) / ItemLength;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// æ›´æ–°å½“å‰å·²ä½¿ç”¨çš„ç©ºé—´é•¿åº¦</span></span><br><span class="line">                    LengthGeneratedSoFar += ItemLength;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// é‡æ–°ç”Ÿæˆå›é€€åçš„åˆ—è¡¨</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">FReGenerateResults</span>(NewScrollOffsetForBackfill, LengthGeneratedSoFar, ItemsSource-&gt;<span class="built_in">Num</span>() - NewScrollOffsetForBackfill, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆä¸éœ€è¦å›é€€çš„åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">FReGenerateResults</span>(CurrentScrollOffset, LengthGeneratedSoFar, ItemsInView, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ— é¡¹åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">FReGenerateResults</span>(<span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="number">0.0f</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ä»ä¸Šé¢çš„ä»£ç åˆ†æä¸­å¯ä»¥çœ‹åˆ°ï¼Œ&quot;ReGenerateItems&quot; ä¸»è¦æ˜¯è´Ÿè´£ç”Ÿæˆ Item (GeneratedWidgetForItem)ï¼Œå¹¶æŠŠè¯¥ Item å¯æ˜¾ç¤ºçš„éƒ¨åˆ†æ˜¾ç¤ºå‡ºæ¥ã€‚å¦‚æœæ»‘åŠ¨è¿‡åº¦ï¼Œåˆ™éœ€è¦é¢å¤–è¿›è¡Œå›é€€å¤„ç†ã€‚å…¶ä»–çš„ç»†èŠ‚å¤„ç†éƒ½å†™åœ¨æ³¨é‡Šä¸­äº†ï¼Œä¸å†èµ˜è¿°ã€‚</p><p>çœ‹ä¼¼å·²ç»å…¨éƒ¨ç”Ÿæˆå¥½äº†ï¼Œä½†å…¶å®æˆ‘ä»¬è¿˜æ˜¯ä¸çŸ¥é“å¼•æ“åˆ°åº•æ—¶æ€ä¹ˆä¸ºæ¯ä¸ªé¡¹ç”Ÿæˆ Widget çš„ï¼Œæˆ‘ä»¬ç»§ç»­æ·±å…¥çœ‹çœ‹æ¯ä¸€é¡¹çš„ç”Ÿæˆæ˜¯æ€ä¹ˆåšçš„å§</p><h3 id="generatedwidgetforitem"><a class="anchor" href="#generatedwidgetforitem">#</a> GeneratedWidgetForItem</h3><p></p><figure class="highlight c++"><figcaption><span>GeneratedWidgetForItem</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SListView.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">GenerateWidgetForItem</span><span class="params">( <span class="keyword">const</span> ItemType&amp; CurItem, int32 ItemIndex, int32 StartIndex, <span class="keyword">float</span> LayoutScaleMultiplier )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">ensure</span>(TListTypeTraits&lt;ItemType&gt;::<span class="built_in">IsPtrValid</span>(CurItem));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸ºæ­¤é¡¹å¯»æ‰¾ä¸€ä¸ªé¢„å­˜çš„ Widget (å¦‚æœæœ‰)</span></span><br><span class="line">    TSharedPtr&lt;ITableRow&gt; WidgetForItem = WidgetGenerator.<span class="built_in">GetWidgetForItem</span>( CurItem );</span><br><span class="line">    <span class="keyword">if</span> ( !WidgetForItem.<span class="built_in">IsValid</span>() )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æˆ‘ä»¬å¦‚æœæ²¡æœ‰æ‰¾åˆ°å­˜åœ¨çš„é¢„å­˜Widgetï¼Œæ„å‘³ç€è¿™ä¸ª Item ä¹‹å‰æ˜¯ä¸å¯è§çš„ï¼Œéœ€è¦ä¸ºå…¶ç”Ÿæˆä¸€ä¸ªæ–°çš„</span></span><br><span class="line">        WidgetForItem = <span class="keyword">this</span>-&gt;<span class="built_in">GenerateNewWidget</span>(CurItem);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºè¯¥ Item è®¾ç½®ä¸€ä¸ªç´¢å¼•ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬åˆ†æ¸…æ˜¯å“ªä¸ªé¡¹ç”Ÿæˆçš„æ­¤ Widget</span></span><br><span class="line">    <span class="comment">// è¿˜å¯ä»¥ç”¨äºå¥‡å¶æ•°çš„ç€è‰²</span></span><br><span class="line">    WidgetForItem-&gt;<span class="built_in">SetIndexInList</span>(ItemIndex);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®© WidgetGenerator å°†è¯¥ Widget å’Œ Item å…³è”å¹¶ç¼“å­˜èµ·æ¥ï¼Œ</span></span><br><span class="line">    <span class="comment">// ä»¥åˆ°è¾¾ä¸é‡å¤ç”Ÿæˆç›¸åŒçš„ Widget çš„ç›®çš„ï¼Œæé«˜ç”Ÿæˆæ•ˆç‡</span></span><br><span class="line">    WidgetGenerator.<span class="built_in">OnItemSeen</span>( CurItem, WidgetForItem.<span class="built_in">ToSharedRef</span>() );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ­¤ Widget çš„æ‰€æœ‰å­é¡¹çš„ DesiredSize é¢„åŠ è½½ä¸€éï¼Œå¹¶ç¼“å­˜èµ·æ¥</span></span><br><span class="line">    <span class="keyword">const</span> TSharedRef&lt;SWidget&gt; NewlyGeneratedWidget = WidgetForItem-&gt;<span class="built_in">AsWidget</span>();</span><br><span class="line">    NewlyGeneratedWidget-&gt;<span class="built_in">InvalidatePrepass</span>();</span><br><span class="line">    NewlyGeneratedWidget-&gt;<span class="built_in">SlatePrepass</span>(LayoutScaleMultiplier);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å·²ç»æœ‰è¿™ä¸ªé¡¹çš„ Widgetï¼Œå°†å…¶æ·»åŠ åˆ°é¢æ¿ä¸­ï¼Œä»¥ä¾¿æˆä¸º UI çš„ä¸€éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">if</span> (ItemIndex &gt;= StartIndex)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å‘ä¸‹æ·»åŠ  Widget</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">AppendWidget</span>( WidgetForItem.<span class="built_in">ToSharedRef</span>() );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å›é€€æ—¶å¾€ä¸Šæ’å…¥ Widget</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;<span class="built_in">InsertWidget</span>( WidgetForItem.<span class="built_in">ToSharedRef</span>() );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯è§åˆ™è¿”å› DesiredSize ï¼Œå¦åˆ™è¿”å› ZeroVector</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">bool</span> bIsVisible = NewlyGeneratedWidget-&gt;<span class="built_in">GetVisibility</span>().<span class="built_in">IsVisible</span>();</span><br><span class="line">    <span class="function">FTableViewDimensions <span class="title">GeneratedWidgetDimensions</span><span class="params">(<span class="keyword">this</span>-&gt;Orientation, bIsVisible ? NewlyGeneratedWidget-&gt;GetDesiredSize() : FVector2D::ZeroVector)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> GeneratedWidgetDimensions.ScrollAxis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;GenerateWidgetForItem&quot; å‡½æ•°ç†è§£èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ (æ³¨é‡Š yydsï¼)ï¼Œå…·ä½“æµç¨‹æ˜¯ï¼šå…ˆç”¨å½“å‰ Item ç”Ÿæˆä¸€ä¸ª Widget (é»˜è®¤ WidgetGenerator ä¸€å¼€å§‹æ²¡æœ‰ Widget)ï¼Œåˆå§‹åŒ– ItemIndex åï¼Œåœ¨ WidgetGenerator ä¸­å°†æ­¤ Widget å’Œå¯¹åº”çš„ Item å…³è”å¹¶ç¼“å­˜èµ·æ¥ï¼Œä»¥ä¾¿ä¸‹æ¬¡éœ€è¦ç”Ÿæˆè¯¥ Item çš„ Widget æ—¶å¯ä»¥ç›´æ¥å–ç”¨ã€‚ç„¶åæˆ‘ä»¬å°†æ­¤ Widget çš„æ‰€æœ‰å­é¡¹çš„ DesiredSize é¢„åŠ è½½ä¸€éï¼Œå¹¶ç¼“å­˜èµ·æ¥ã€‚å†ä¹‹åå°±æ˜¯å°†æ­¤ Widget æ·»åŠ åˆ° ItemPanel é‡Œé¢ï¼Œæœ€åå°†æ­¤ Widget çš„ DesiredSize è¿”å›å‡ºå»ã€‚</p><p>é‚£åˆ°è¿™é‡Œæˆ‘ä»¬å°±å‰©ä¸‹æœ€åä¸€æ­¥äº† â€”â€” GenerateNewWidget (çœŸæ­£ä¸ºè¯¥é¡¹ç”Ÿæˆ Widget çš„å‡½æ•°)</p><p></p><figure class="highlight c++"><figcaption><span>GenerateNewWidget</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SListView.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> TSharedRef&lt;ITableRow&gt; <span class="title">GenerateNewWidget</span><span class="params">(ItemType InItem)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( OnGenerateRow.<span class="built_in">IsBound</span>() )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœç”¨æˆ·æŒ‡å®šäº†ç”Ÿæˆè¯¥ Widget çš„å›è°ƒæ–¹æ³•ï¼Œæˆ‘ä»¬å°±ç›´æ¥è°ƒç”¨</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„ä¹‹æ‰€ä»¥å‘½åä¸º &quot;OnGenerateRow&quot;ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„ &quot;ITableRow&quot; å…¶å®æ˜¯åˆ—è¡¨çš„è¡Œç±»</span></span><br><span class="line">        <span class="keyword">return</span> OnGenerateRow.<span class="built_in">Execute</span>( InItem, <span class="built_in">SharedThis</span>(<span class="keyword">this</span>) );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šå›è°ƒï¼Œæˆ‘ä»¬å°±ç›´æ¥ç”Ÿæˆä¸€ä¸ª &quot;STableRow&quot;ï¼Œ</span></span><br><span class="line">        <span class="comment">// å¹¶åœ¨å…¶å†…éƒ¨ç”Ÿæˆä¸€ä¸ª &quot;STextBlock&quot; ç”¨ä»¥æç¤ºç”¨æˆ·æ²¡æœ‰ç»‘å®š &quot;OnGenerateWidget&quot; å›è°ƒ</span></span><br><span class="line">        TSharedRef&lt; STableRow&lt;ItemType&gt; &gt; NewListItemWidget = </span><br><span class="line">            <span class="built_in">SNew</span>( STableRow&lt;ItemType&gt;, <span class="built_in">SharedThis</span>(<span class="keyword">this</span>) )</span><br><span class="line">            .<span class="built_in">Content</span>()</span><br><span class="line">            [</span><br><span class="line">            <span class="built_in">SNew</span>(STextBlock) .<span class="built_in">Text</span>( <span class="built_in">NSLOCTEXT</span>(<span class="string">&quot;SListView&quot;</span>, <span class="string">&quot;BrokenUIMessage&quot;</span>, <span class="string">&quot;OnGenerateWidget() not assigned.&quot;</span>) )</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NewListItemWidget;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹åˆ° &quot;GenerateNewWidget&quot; å…¶å®å°±æ˜¯ç®€å•çš„é«˜è¾¾æ‹¼è£… (æ¯”æˆ‘ä»¬ä¹‹å‰åˆ†æçš„ Construct å‡½æ•°é‡Œé¢çš„ç®€å•)ï¼Œ&quot;OnGenerateRaw&quot; çš„å›è°ƒå‡½æ•° ä¸åŒ Slate ä¼šæœ‰ä¸åŒçš„ç­–ç•¥ã€‚æ—¢ç„¶æˆ‘ä»¬è¿™ç¯‡ä¸»è¦åˆ†æçš„æ˜¯ &quot;SDetailsView&quot;ï¼Œé‚£è‡ªç„¶æ˜¯è¦çœ‹çœ‹ &quot;OnGenerateRaw&quot; åœ¨ &quot;SDetailsView&quot; ä¸­çš„å®ç°çš„ã€‚</p><h3 id="ongenerateraw"><a class="anchor" href="#ongenerateraw">#</a> OnGenerateRaw</h3><p><img data-src="ConstructTreeView.png" alt="ConstructTreeView"></p><p></p><figure class="highlight c++"><figcaption><span>OnGenerateRaw</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SDetailsViewBase.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function">TSharedRef&lt;ITableRow&gt; <span class="title">SDetailsViewBase::OnGenerateRowForDetailTree</span><span class="params">(TSharedRef&lt;FDetailTreeNode&gt; InTreeNode, <span class="keyword">const</span> TSharedRef&lt;STableViewBase&gt;&amp; OwnerTable)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// &quot;FDetailTreeNode&quot; æ˜¯ æ‰€æœ‰ç»†èŠ‚æ ‘èŠ‚ç‚¹çš„åŸºç±»</span></span><br><span class="line">	<span class="keyword">return</span> InTreeNode-&gt;<span class="built_in">GenerateWidgetForTableView</span>(OwnerTable, ColumnSizeData, DetailsViewArgs.bAllowFavoriteSystem);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// DetailItemNode.cpp (åªæ˜¯ &quot;FDetailTreeNode&quot; çš„å…¶ä¸­ä¸€ä¸ªå­ç±»)</span></span><br><span class="line"></span><br><span class="line"><span class="function">TSharedRef&lt; ITableRow &gt; <span class="title">FDetailItemNode::GenerateWidgetForTableView</span><span class="params">( <span class="keyword">const</span> TSharedRef&lt;STableViewBase&gt;&amp; OwnerTable, <span class="keyword">const</span> FDetailColumnSizeData&amp; ColumnSizeData, <span class="keyword">bool</span> bAllowFavoriteSystem)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ è¯¥é¡¹çš„å…ƒæ•°æ®</span></span><br><span class="line">	<span class="function">FTagMetaData <span class="title">TagMeta</span><span class="params">(TEXT(<span class="string">&quot;DetailRowItem&quot;</span>))</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (ParentCategory.<span class="built_in">IsValid</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (Customization.<span class="built_in">IsValidCustomization</span>() &amp;&amp; Customization.<span class="built_in">GetPropertyNode</span>().<span class="built_in">IsValid</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			TagMeta.Tag = *FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;DetailRowItem.%s&quot;</span>), *Customization.<span class="built_in">GetPropertyNode</span>()-&gt;<span class="built_in">GetDisplayName</span>().<span class="built_in">ToString</span>());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (Customization.<span class="built_in">HasCustomWidget</span>() )</span><br><span class="line">		&#123;</span><br><span class="line">			TagMeta.Tag = Customization.<span class="built_in">GetWidgetRow</span>().RowTagName;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœæœ‰å±æ€§èŠ‚ç‚¹ï¼Œä¸”è¯¥å±æ€§èŠ‚ç‚¹æœ‰åˆ†ç±»åˆ™æ„é€ ä¸€ä¸ª &quot;SDetailCategoryTableRow&quot; </span></span><br><span class="line">    <span class="comment">// å¦åˆ™æ„é€ ä¸€ä¸ª &quot;SDetailSingleItemRow&quot; </span></span><br><span class="line">	<span class="keyword">if</span>( Customization.<span class="built_in">HasPropertyNode</span>() &amp;&amp; Customization.<span class="built_in">GetPropertyNode</span>()-&gt;<span class="built_in">AsCategoryNode</span>() )</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">			<span class="built_in">SNew</span>(SDetailCategoryTableRow, <span class="built_in">AsShared</span>(), OwnerTable)</span><br><span class="line">			.<span class="built_in">DisplayName</span>(Customization.<span class="built_in">GetPropertyNode</span>()-&gt;<span class="built_in">GetDisplayName</span>())</span><br><span class="line">			.AddMetaData&lt;FTagMetaData&gt;(TagMeta)</span><br><span class="line">			.<span class="built_in">ColumnSizeData</span>(&amp;ColumnSizeData)</span><br><span class="line">			.<span class="built_in">InnerCategory</span>( <span class="literal">true</span> );</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">			<span class="built_in">SNew</span>(SDetailSingleItemRow, &amp;Customization, <span class="built_in">HasMultiColumnWidget</span>(), <span class="built_in">AsShared</span>(), OwnerTable )</span><br><span class="line">			.AddMetaData&lt;FTagMetaData&gt;(TagMeta)</span><br><span class="line">			.<span class="built_in">ColumnSizeData</span>(ColumnSizeData)</span><br><span class="line">			.<span class="built_in">AllowFavoriteSystem</span>(bAllowFavoriteSystem);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;SDetailsView&quot; ç»‘å®šçš„ &quot;OnGeneratedRow&quot; å›è°ƒè¿˜ç®—ç®€å•ï¼Œåªæ˜¯ç”Ÿæˆå…ƒæ•°æ®å’Œä¸€ä¸ª &quot;SDetailSingleItemRow&quot; å¯¹è±¡ã€‚&quot;SDetailSingleItemRow&quot; å¯¹è±¡çš„æ„é€ å’±å°±ä¸å±•å¼€è¯´äº†ï¼Œä¸»è¦å°±æ˜¯ç”Ÿæˆä¸€ä¸ª &quot;NameWidget&quot; å’Œä¸€ä¸ª &quot;ValueWidget&quot;ï¼Œå¦‚æœ &quot;ValueWidget&quot; è¿˜æœ‰ &quot;ExtensionWidget&quot; ï¼Œåˆ™å†æŠŠ &quot;ExtensionWidget&quot; ç»™å¤„ç†ä¸€ä¸‹ (å¦‚ &quot;Transfrom&quot; å°±ä¼šæœ‰ &quot;Location&quot; è¿™ç§ &quot;ExtensionWidget&quot;)</p><p>&quot;SDetailsView&quot; ä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–å‡½æ•°ï¼Œä½†åŸºæœ¬ä¸Šéƒ½æ˜¯å¯¹å…¶å±æ€§åšä¸€äº›è¯»å†™æ“ä½œçš„ï¼Œæˆ‘ä»¬åˆ†æå®Œ &quot;Construct&quot; å’Œ &quot;Tick&quot; åŸºæœ¬å°±çŸ¥é“å…¶è¿è¡Œæœºåˆ¶å’Œåº•å±‚å®ç°åŸç†äº†ï¼Œä¸å†é€ä¸ªåˆ†æå†…éƒ¨å‡½æ•°ã€‚æœ‰å…´è¶£çš„æœ‹å‹è¯·è‡ªè¡Œç¿»é˜…æºç  )</p><p>åˆ°æ­¤ï¼Œå’±å¯¹ &quot;SDetailsView&quot; çš„æ¢ç©¶å°±å…ˆå‘Šä¸€æ®µè½äº†ï¼Œæ–‡ç« æœ«å°¾è¿˜ä¼šåšä¸€æ¬¡æ€»ç»“ï¼Œä»¥ä¾¿åŠ æ·±å°è±¡å’Œå¤ä¹ ä½¿ç”¨ã€‚</p><hr><h2 id="slate-çš„æ•´ä½“å®ç°æ€è·¯"><a class="anchor" href="#slate-çš„æ•´ä½“å®ç°æ€è·¯">#</a> Slate çš„æ•´ä½“å®ç°æ€è·¯</h2><p>é€šè¿‡ä¸Šé¢å¯¹ &quot;SDetailsView&quot; çš„åˆ†æï¼Œä¸çŸ¥é“æ˜¯å¦è®©è¯»è€…å¯¹ Slate çš„æ•´ä½“å®ç°æ€è·¯æœ‰æ‰€çœ‹æ³•äº†å‘¢ï¼Ÿæ²¡æœ‰ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥ä»å¤§æ–¹å‘ä¸Šçœ‹çœ‹ï¼Œå¦‚æœæˆ‘ä»¬è¦å†™ä¸€ä¸ªè‡ªå·±çš„ Slate è¦æ€ä¹ˆåšï¼Ÿ(è¿™å¯¹æˆ‘ä»¬å¼€å‘æ’ä»¶éå¸¸æœ‰å¸®åŠ©)</p><h3 id="å‰ç½®çŸ¥è¯†-å¸¸è¯†"><a class="anchor" href="#å‰ç½®çŸ¥è¯†-å¸¸è¯†">#</a> å‰ç½®çŸ¥è¯† (å¸¸è¯†)</h3><p>å¼€å§‹è®²å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä¸€äº› Slate ç›¸å…³ çš„å¸¸è¯†æ€§çŸ¥è¯†ã€‚</p><p><img data-src="%E7%BB%A7%E6%89%BF%E5%9B%BE.png" alt="ç»§æ‰¿å›¾"></p><p>çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>æ‰€æœ‰ Slate ç±»éƒ½æ˜¯ SWidget çš„å­ç±»</p></li><li><p>SWidget ä¸‹æœ‰ä¸‰ä¸ªå­ç±»ï¼Œåˆ†åˆ«æ˜¯ &quot;SLeafWidget&quot;ï¼Œ&quot;SCompoundWidget&quot;ï¼Œ&quot;SPanelWidget&quot;</p><table><thead><tr><th>SWidget</th><th>Child Slot ä¸ªæ•°</th><th>å¦‚ä½•å®ç° Child Slot</th></tr></thead><tbody><tr><td>SLeafWidget</td><td>0</td><td>ä¸éœ€è¦å®ç°</td></tr><tr><td>SCompoundWidget</td><td>1</td><td>å†…ç½®äº† ChildSlot å±æ€§ï¼Œä¸éœ€è¦å®ç°</td></tr><tr><td>SPanelWidget</td><td>n</td><td>éœ€è¦åœ¨å­ç±»å†…éƒ¨è‡ªå®šä¹‰ä¸€ä¸ªç»§æ‰¿äº &quot;TSlotBase&lt;FSlot&gt;&quot; çš„ &quot;FSlot&quot; ç»“æ„ä½“ï¼Œç„¶åå£°æ˜ä¸€ä¸ª &quot;TPanelChildren&lt;FSlot&gt;&quot; å˜é‡ï¼Œå®ç° &quot;AddSlot&quot; å‡½æ•°ç­‰</td></tr></tbody></table></li><li><p>å¤§éƒ¨åˆ†çš„ Slate ç±»éƒ½æ˜¯ç»§æ‰¿è‡ª &quot;SCompoundWidget&quot; çš„</p></li><li><p>æˆ‘ä»¬ä¸€èˆ¬ç”¨å…±äº«æŒ‡é’ˆ (SharedRefï¼ŒSharedPtr) æ¥åˆ›å»ºå¹¶ç®¡ç† Slate å¯¹è±¡ï¼ŒSWidget ä¸­å·²ç»ç»§æ‰¿äº† TSharedFromThis ç±»ï¼Œæˆ‘ä»¬å°½ç®¡ç”¨å…¶å…±äº«æŒ‡é’ˆå°±å¥½äº†</p></li><li><p>&quot;FArgument&quot; ä¸­çš„å±æ€§ä¸€èˆ¬åœ¨ &quot;SNew&quot;(å¦‚: Slot) æˆ– &quot;FArgument&quot; çš„æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ã€‚è€Œ Slate ç±»å†…éƒ¨çš„å±æ€§ï¼Œä¸€èˆ¬åœ¨ Slate çš„æ„é€ å‡½æ•° æˆ– å®šä¹‰ç‰¹å®šçš„å‡½æ•°æ¥è¿›è¡Œèµ‹å€¼ã€‚</p></li><li></li></ul><h3 id="å®ç°-slate-ç±»çš„æµç¨‹"><a class="anchor" href="#å®ç°-slate-ç±»çš„æµç¨‹">#</a> å®ç° Slate ç±»çš„æµç¨‹</h3><p>å†™è€…æƒ³äº†å¾ˆä¹…ï¼Œå®åœ¨æ˜¯ä¸çŸ¥é“å®ç°ä»€ä¹ˆ Slate å¥½ (UMG ä¸­çš„ Slate å®ç°çš„åŠŸèƒ½ä¸é€‚åˆå¤ªå¤æ‚ï¼Œè€Œç®€å•çš„ unreal éƒ½ç»™æˆ‘ä»¬é›†æˆå¥½äº†ï¼Œå†å®ç°ä¸€æ¬¡ä¹Ÿåªæœ‰æŠ„ä»£ç çš„ä»½... å¿ƒç´¯)ï¼Œæ‰€ä»¥å’±å°±ç›´æ¥æ‹¿ &quot;SButton&quot; çš„å®ç°æ¥æ€»ç»“ä¸€éå¥½äº†ã€‚</p><p>å¤§æ¦‚ç”±ä¸€ä¸‹å‡ ä¸ªæ­¥éª¤ç»„æˆï¼š</p><ol><li>æ˜ç¡®è¯¥ Slate æ˜¯å¦æœ‰ Child Slotï¼Œå¹¶ç»§æ‰¿å¯¹åº”çš„ SWidget</li><li>æ˜ç¡®è¯¥ Slate éœ€è¦å®ç°çš„åŠŸèƒ½ï¼Œå¹¶åˆ—å‡ºéœ€è¦æä¾›çš„å±æ€§å’Œéœ€è¦å®ç°çš„å›è°ƒå‡½æ•°</li><li>å®šä¹‰ &quot;FArgument&quot; ç»“æ„ä½“</li><li>å®ç° &quot;Construct&quot; å‡½æ•°</li><li>å®ç° &quot;OnPaint&quot; å‡½æ•° (å¦‚ä½•ç»˜åˆ¶è¯¥ Slate å¯¹è±¡)</li><li>å®ç° å›è°ƒæ–¹æ³• å’Œ ä¸€äº›å¯¹å±æ€§çš„è¯»å†™æ–¹æ³•</li></ol><p>å’±è·Ÿç€ä¸Šé¢çš„æ­¥éª¤èµ°ä¸€éã€‚</p><p>UE ä¸­ &quot;SButton&quot; æ˜¯ç›´æ¥ç»§æ‰¿è‡ª &quot;SBorder&quot; çš„ï¼Œå¯ä»¥è¯´ &quot;SButton&quot; åªæ˜¯ä¸€ä¸ªæ‹¥æœ‰ç‚¹å‡»äº‹ä»¶çš„ &quot;SBroder&quot;ï¼Œä½†å› ä¸ºç±»å†…ç»“æ„ä½“æ˜¯ä¸å’Œå­ç±»å…±äº«çš„ï¼Œæˆ‘ä»¬çš„ &quot;SButton&quot; éœ€è¦å®ç°è‡ªå·±çš„ &quot;FArgument&quot;ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><h4 id="å®šä¹‰-fargument-ç»“æ„ä½“"><a class="anchor" href="#å®šä¹‰-fargument-ç»“æ„ä½“">#</a> å®šä¹‰ FArgument ç»“æ„ä½“</h4><p></p><figure class="highlight c++"><figcaption><span>SButton</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SButton.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SLATE_API</span> <span class="title">SButton</span></span></span><br><span class="line"><span class="class">	:</span> <span class="keyword">public</span> SBorder</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">SLATE_BEGIN_ARGS</span>( SButton )</span><br><span class="line">		: _Content()</span><br><span class="line">		, _ButtonStyle( &amp;FCoreStyle::<span class="built_in">Get</span>().GetWidgetStyle&lt; FButtonStyle &gt;( <span class="string">&quot;Button&quot;</span> ) )</span><br><span class="line">		, _TextStyle( &amp;FCoreStyle::<span class="built_in">Get</span>().GetWidgetStyle&lt; FTextBlockStyle &gt;(<span class="string">&quot;NormalText&quot;</span>) )</span><br><span class="line">		, _HAlign( HAlign_Fill )</span><br><span class="line">		, _VAlign( VAlign_Fill )</span><br><span class="line">		, _ContentPadding(<span class="built_in">FMargin</span>(<span class="number">4.0</span>, <span class="number">2.0</span>))</span><br><span class="line">		, _Text()</span><br><span class="line">		, _ClickMethod( EButtonClickMethod::DownAndUp )</span><br><span class="line">		, _TouchMethod( EButtonTouchMethod::DownAndUp )</span><br><span class="line">		, _PressMethod( EButtonPressMethod::DownAndUp )</span><br><span class="line">		, _DesiredSizeScale( <span class="built_in">FVector2D</span>(<span class="number">1</span>,<span class="number">1</span>) )</span><br><span class="line">		, _ContentScale( <span class="built_in">FVector2D</span>(<span class="number">1</span>,<span class="number">1</span>) )</span><br><span class="line">		, _ButtonColorAndOpacity(FLinearColor::White)</span><br><span class="line">		, _ForegroundColor( FCoreStyle::<span class="built_in">Get</span>().<span class="built_in">GetSlateColor</span>( <span class="string">&quot;InvertedForeground&quot;</span> ) )</span><br><span class="line">		, _IsFocusable( <span class="literal">true</span> )</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">// FArgument çš„é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// FArgument çš„å±æ€§ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ SNew æ—¶å¯ä»¥ç›´æ¥åˆå§‹åŒ–çš„å±æ€§</span></span><br><span class="line">        </span><br><span class="line">		<span class="comment">/** button çš„å†…å®¹æ’æ§½ (å¯é€‰) */</span></span><br><span class="line">		<span class="built_in">SLATE_DEFAULT_SLOT</span>( FArguments, Content )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** button çš„è§†è§‰é£æ ¼ */</span></span><br><span class="line">		<span class="built_in">SLATE_STYLE_ARGUMENT</span>( FButtonStyle, ButtonStyle )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** button çš„å­—ä½“é£æ ¼(æç¤ºæ–‡æœ¬çš„å­—ä½“ï¼Œé»˜è®¤ Button æ˜¯ä¸æ”¯æŒå†…å®¹ç›´æ¥æ˜¾ç¤ºæ–‡å­—çš„)*/</span></span><br><span class="line">		<span class="built_in">SLATE_STYLE_ARGUMENT</span>( FTextBlockStyle, TextStyle )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** æ°´å¹³å¯¹é½ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( EHorizontalAlignment, HAlign )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** ç«–ç›´å¯¹é½ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( EVerticalAlignment, VAlign )</span><br><span class="line">	</span><br><span class="line">		<span class="comment">/** è¾¹ç•Œå’Œå†…å®¹çš„é—´éš”ç©ºé—´(Padding) */</span></span><br><span class="line">		<span class="built_in">SLATE_ATTRIBUTE</span>( FMargin, ContentPadding )</span><br><span class="line">	</span><br><span class="line">		<span class="comment">/** button å†…æ²¡æœ‰å†…å®¹æ—¶æ˜¾ç¤ºçš„ æç¤ºæ–‡æœ¬ */</span></span><br><span class="line">		<span class="built_in">SLATE_ATTRIBUTE</span>( FText, Text )</span><br><span class="line">	</span><br><span class="line">		<span class="comment">/** é¼ æ ‡ç‚¹å‡»äº‹ä»¶ä»£ç† */</span></span><br><span class="line">		<span class="built_in">SLATE_EVENT</span>( FOnClicked, OnClicked )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ä»£ç† */</span></span><br><span class="line">		<span class="built_in">SLATE_EVENT</span>( FSimpleDelegate, OnPressed )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** é¼ æ ‡æ¾å¼€äº‹ä»¶ä»£ç† */</span></span><br><span class="line">		<span class="built_in">SLATE_EVENT</span>( FSimpleDelegate, OnReleased )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** é¼ æ ‡åˆ’å…¥äº‹ä»¶ä»£ç† */</span></span><br><span class="line">		<span class="built_in">SLATE_EVENT</span>( FSimpleDelegate, OnHovered )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** é¼ æ ‡åˆ’å‡ºäº‹ä»¶ä»£ç† */</span></span><br><span class="line">		<span class="built_in">SLATE_EVENT</span>( FSimpleDelegate, OnUnhovered )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** ç‚¹å‡»è§„åˆ™ï¼Œå·¦é”®ç‚¹å‡»è¿˜æ˜¯å³é”®ç‚¹å‡»ï¼Œä¸€èˆ¬ä¸ç”¨è®¾ç½®ï¼Œé»˜è®¤å·¦é”® */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( EButtonClickMethod::Type, ClickMethod )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** touch äº‹ä»¶çš„è§„åˆ™ï¼Œä¸€èˆ¬ä¸ç”¨è®¾ç½® */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( EButtonTouchMethod::Type, TouchMethod )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** press äº‹ä»¶çš„è§„åˆ™ï¼Œä¸€èˆ¬ä¸ç”¨è®¾ç½® */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( EButtonPressMethod::Type, PressMethod )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** æŒ‰é’®çš„ç¼©æ”¾ (æ¨ªå‘å’Œçºµå‘) */</span></span><br><span class="line">		<span class="built_in">SLATE_ATTRIBUTE</span>( FVector2D, DesiredSizeScale )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** å†…å®¹çš„ç¼©æ”¾ (æ¨ªå‘å’Œçºµå‘) */</span></span><br><span class="line">		<span class="built_in">SLATE_ATTRIBUTE</span>( FVector2D, ContentScale )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** æŒ‰é’®çš„é¢œè‰²å’Œä¸é€æ˜åº¦ */</span></span><br><span class="line">		<span class="built_in">SLATE_ATTRIBUTE</span>( FSlateColor, ButtonColorAndOpacity )</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** å‰æ™¯é¢œè‰² */</span></span><br><span class="line">		<span class="built_in">SLATE_ATTRIBUTE</span>( FSlateColor, ForegroundColor )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** å½“å‰æ˜¯å¦è¢«èšç„¦ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( <span class="keyword">bool</span>, IsFocusable )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** ç‚¹å‡»å£°éŸ³ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( TOptional&lt;FSlateSound&gt;, PressedSoundOverride )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** é¼ æ ‡åˆ’å…¥å£°éŸ³ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( TOptional&lt;FSlateSound&gt;, HoveredSoundOverride )</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** æ–‡æœ¬å¡‘é€ æ–¹æ³•ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( TOptional&lt;ETextShapingMethod&gt;, TextShapingMethod )</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/** æ–‡æœ¬æµåå‘ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼ */</span></span><br><span class="line">		<span class="built_in">SLATE_ARGUMENT</span>( TOptional&lt;ETextFlowDirection&gt;, TextFlowDirection )</span><br><span class="line"></span><br><span class="line">	<span class="built_in">SLATE_END_ARGS</span>()</span><br><span class="line">            </span><br><span class="line">    <span class="comment">// .......</span></span><br><span class="line">            </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// ç”¨ä¸Šé¢çš„ FArgument åœ¨ Construct å‡½æ•°ä¸­åˆå§‹åŒ–ä»¥ä¸‹ä»¥ä¸‹å±æ€§</span></span><br><span class="line">        </span><br><span class="line">	<span class="keyword">const</span> FButtonStyle* Style;</span><br><span class="line">        </span><br><span class="line">	<span class="keyword">const</span> FSlateBrush* NormalImage;</span><br><span class="line">	<span class="keyword">const</span> FSlateBrush* HoverImage;</span><br><span class="line">	<span class="keyword">const</span> FSlateBrush* PressedImage;</span><br><span class="line">	<span class="keyword">const</span> FSlateBrush* DisabledImage;</span><br><span class="line"></span><br><span class="line">	FOnClicked OnClicked;</span><br><span class="line">	FSimpleDelegate OnPressed;</span><br><span class="line">	FSimpleDelegate OnReleased;</span><br><span class="line">	FSimpleDelegate OnHovered;</span><br><span class="line">	FSimpleDelegate OnUnhovered;</span><br><span class="line">        </span><br><span class="line">	FSlateSound HoveredSound;</span><br><span class="line">	FSlateSound PressedSound;</span><br><span class="line"></span><br><span class="line">	TEnumAsByte&lt;EButtonClickMethod::Type&gt; ClickMethod;</span><br><span class="line">	TEnumAsByte&lt;EButtonTouchMethod::Type&gt; TouchMethod;</span><br><span class="line">	TEnumAsByte&lt;EButtonPressMethod::Type&gt; PressMethod;</span><br><span class="line"></span><br><span class="line">	uint8 bIsFocusable:<span class="number">1</span>;</span><br><span class="line">	uint8 bIsPressed:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ— å¥–é—®ç­”ï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p><p>å› ä¸ºæˆ‘ä»¬çš„ FArgument å¯ä»¥åœ¨ SNew çš„åé¢ç›´æ¥åˆå§‹åŒ–ï¼Œå¹¶è°ƒç”¨è¯¥ SButton çš„ Construct å‡½æ•°ã€‚è®²å‚æ•°é›†æˆåˆ°ä¸€ä¸ªç»“æ„ä½“ä¸­å¯ä»¥ä½¿ä»£ç çš„å¯è¯»æ€§æ›´é«˜ï¼Œä¸”æ–¹ä¾¿ä½¿ç”¨ã€‚</p><h4 id="å®šä¹‰-construct-å‡½æ•°"><a class="anchor" href="#å®šä¹‰-construct-å‡½æ•°">#</a> å®šä¹‰ Construct å‡½æ•°</h4><p></p><figure class="highlight c++"><figcaption><span>Construct</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SButton.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SButton::Construct</span><span class="params">( <span class="keyword">const</span> FArguments&amp; InArgs )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	bIsPressed = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç”¨äºè¿”å›å½“å‰ button çš„å†…å®¹</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">	&#123;</span></span><br><span class="line">		<span class="function">TSharedRef&lt;SWidget&gt; <span class="title">operator</span><span class="params">()</span><span class="params">( <span class="keyword">const</span> FArguments&amp; InOpArgs )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">		</span>&#123;</span><br><span class="line">			<span class="keyword">if</span> ((InOpArgs._Content.Widget == SNullWidget::NullWidget) &amp;&amp; (InOpArgs._Text.<span class="built_in">IsBound</span>() || !InOpArgs._Text.<span class="built_in">Get</span>().<span class="built_in">IsEmpty</span>()) )</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// SNew ä¸€ä¸ªæç¤ºæ–‡æœ¬ Slate</span></span><br><span class="line">				<span class="keyword">return</span> <span class="built_in">SNew</span>(STextBlock)</span><br><span class="line">					.<span class="built_in">Visibility</span>(EVisibility::HitTestInvisible)</span><br><span class="line">					.<span class="built_in">Text</span>( InOpArgs._Text )</span><br><span class="line">					.<span class="built_in">TextStyle</span>( InOpArgs._TextStyle )</span><br><span class="line">					.<span class="built_in">TextShapingMethod</span>( InOpArgs._TextShapingMethod )</span><br><span class="line">					.<span class="built_in">TextFlowDirection</span>( InOpArgs._TextFlowDirection );</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// è¿”å›ä¸€ä¸ªæ„é€ å¥½çš„ Button Slate</span></span><br><span class="line">				<span class="keyword">return</span> InOpArgs._Content.Widget;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; DetermineContent; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½® çˆ¶ç±»ä¸­çš„å±æ€§(åŒ…æ‹¬ Button å†…å®¹)</span></span><br><span class="line">	SBorder::<span class="built_in">Construct</span>( SBorder::<span class="built_in">FArguments</span>()</span><br><span class="line">		.<span class="built_in">ContentScale</span>(InArgs._ContentScale)</span><br><span class="line">		.<span class="built_in">DesiredSizeScale</span>(InArgs._DesiredSizeScale)</span><br><span class="line">		.<span class="built_in">BorderBackgroundColor</span>(InArgs._ButtonColorAndOpacity)</span><br><span class="line">		.<span class="built_in">ForegroundColor</span>(InArgs._ForegroundColor)</span><br><span class="line">		.<span class="built_in">BorderImage</span>( <span class="keyword">this</span>, &amp;SButton::GetBorder )</span><br><span class="line">		.<span class="built_in">HAlign</span>( InArgs._HAlign )</span><br><span class="line">		.<span class="built_in">VAlign</span>( InArgs._VAlign )</span><br><span class="line">		.<span class="built_in">Padding</span>( TAttribute&lt;FMargin&gt;(<span class="keyword">this</span>, &amp;SButton::GetCombinedPadding) )</span><br><span class="line">		.<span class="built_in">ShowEffectWhenDisabled</span>( TAttribute&lt;<span class="keyword">bool</span>&gt;(<span class="keyword">this</span>, &amp;SButton::GetShowDisabledEffect) )</span><br><span class="line">		[</span><br><span class="line">			<span class="built_in">DetermineContent</span>(InArgs)</span><br><span class="line">		]</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åªæœ‰åœ¨æˆ‘ä»¬ç¡®å®æ˜¯ä¸€ä¸ª Button çš„æ—¶å€™å…è®¸ Tick</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">GetType</span>() == SButtonTypeName)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">SetCanTick</span>(<span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–è‡ªèº«çš„å±æ€§</span></span><br><span class="line">	ContentPadding = InArgs._ContentPadding;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">SetButtonStyle</span>(InArgs._ButtonStyle);</span><br><span class="line"></span><br><span class="line">	bIsFocusable = InArgs._IsFocusable;</span><br><span class="line"></span><br><span class="line">	OnClicked = InArgs._OnClicked;</span><br><span class="line">	OnPressed = InArgs._OnPressed;</span><br><span class="line">	OnReleased = InArgs._OnReleased;</span><br><span class="line">	OnHovered = InArgs._OnHovered;</span><br><span class="line">	OnUnhovered = InArgs._OnUnhovered;</span><br><span class="line"></span><br><span class="line">	ClickMethod = InArgs._ClickMethod;</span><br><span class="line">	TouchMethod = InArgs._TouchMethod;</span><br><span class="line">	PressMethod = InArgs._PressMethod;</span><br><span class="line"></span><br><span class="line">	HoveredSound = InArgs._HoveredSoundOverride.<span class="built_in">Get</span>(Style-&gt;HoveredSlateSound);</span><br><span class="line">	PressedSound = InArgs._PressedSoundOverride.<span class="built_in">Get</span>(Style-&gt;PressedSlateSound);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>Construct å‡½æ•°å…¶å®å°±æ˜¯åœ¨åˆå§‹åŒ–æˆ‘ä»¬åˆšåˆšå®šä¹‰å‡ºæ¥çš„å±æ€§ (å˜é‡ï¼Œä»£ç†ç­‰)ï¼Œä»¥åŠåˆå§‹åŒ– ChildSlot çš„å¸ƒå±€ (ç”¨ SNew æ¥å®Œæˆè®¾ç½®)</p><p>ç´§æ¥ç€ æˆ‘ä»¬è¦å†™ &quot;OnPaint&quot; å‡½æ•°ï¼Œè®¾ç½®å’±çš„ &quot;Slate&quot; å¯¹è±¡çš„ç»˜åˆ¶æ–¹æ³•</p><h4 id="onpaint"><a class="anchor" href="#onpaint">#</a> OnPaint</h4><p></p><figure class="highlight c++"><figcaption><span>OnPaint</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SButton.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function">int32 <span class="title">SButton::OnPaint</span><span class="params">(<span class="keyword">const</span> FPaintArgs&amp; Args, <span class="keyword">const</span> FGeometry&amp; AllottedGeometry, <span class="keyword">const</span> FSlateRect&amp; MyCullingRect, FSlateWindowElementList&amp; OutDrawElements, int32 LayerId, <span class="keyword">const</span> FWidgetStyle&amp; InWidgetStyle, <span class="keyword">bool</span> bParentEnabled)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è·å–ç»˜åˆ¶èµ„æºåˆ—è¡¨</span></span><br><span class="line">	<span class="keyword">bool</span> bEnabled = <span class="built_in">ShouldBeEnabled</span>(bParentEnabled);</span><br><span class="line">	<span class="keyword">bool</span> bShowDisabledEffect = <span class="built_in">GetShowDisabledEffect</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> FSlateBrush* BrushResource = !bShowDisabledEffect &amp;&amp; !bEnabled ? DisabledImage : <span class="built_in">GetBorder</span>();</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// è·å–ç»˜åˆ¶æ•ˆæœ</span></span><br><span class="line">	ESlateDrawEffect DrawEffects = bShowDisabledEffect &amp;&amp; !bEnabled ? ESlateDrawEffect::DisabledEffect : ESlateDrawEffect::None;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (BrushResource &amp;&amp; BrushResource-&gt;DrawAs != ESlateBrushDrawType::NoDrawType)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// çœŸæ­£çš„ç»˜åˆ¶å‡½æ•°ï¼Œä»¥çŸ©å½¢çš„å½¢å¼ç»˜åˆ¶ä¸€å¼  FSlateBrush (è¿˜æœ‰å…¶ä»–ç»˜åˆ¶å‡½æ•°)</span></span><br><span class="line">		FSlateDrawElement::<span class="built_in">MakeBox</span>(</span><br><span class="line">			OutDrawElements,	<span class="comment">// ç”¨æ¥æ·»åŠ å…ƒç´ çš„åˆ—è¡¨</span></span><br><span class="line">			LayerId,		<span class="comment">// ç»˜åˆ¶å…ƒç´ çš„å›¾å±‚</span></span><br><span class="line">			AllottedGeometry.<span class="built_in">ToPaintGeometry</span>(),	<span class="comment">// éœ€è¦ç»˜åˆ¶çš„ç©ºé—´</span></span><br><span class="line">			BrushResource,	<span class="comment">// ç”¨äºç»˜åˆ¶çš„èµ„æºåˆ—è¡¨</span></span><br><span class="line">			DrawEffects,	<span class="comment">// ç»˜åˆ¶æ•ˆæœ</span></span><br><span class="line">			BrushResource-&gt;<span class="built_in">GetTint</span>(InWidgetStyle) * InWidgetStyle.<span class="built_in">GetColorAndOpacityTint</span>() * BorderBackgroundColor.<span class="built_in">Get</span>().<span class="built_in">GetColor</span>(InWidgetStyle)	<span class="comment">// 	ä¸ºå…ƒç´ ç€è‰²çš„é¢œè‰²</span></span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»˜åˆ¶åŸºç±»</span></span><br><span class="line">	<span class="keyword">return</span> SCompoundWidget::<span class="built_in">OnPaint</span>(Args, AllottedGeometry, MyCullingRect, OutDrawElements, LayerId, InWidgetStyle, bEnabled);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>è¿™æ˜¯ SWidget çš„æ¥å£å‡½æ•°ï¼Œæˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒåœ¨å“ªé‡Œè°ƒç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨ä¼ è¿›æ¥çš„å‚æ•°æ¥ç»˜åˆ¶å‡ºæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœå°±å¯ä»¥äº†ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šç”¨ &quot;MakeBox&quot; æ¥è¿›è¡ŒçŸ©å½¢ç»˜åˆ¶ï¼Œå‰é¢ä¸»è¦æ˜¯å¯¹ &quot;MakeBox&quot; çš„å‚æ•°çš„å¤„ç†ï¼Œå¦‚ &quot;PaintGeometry&quot;ï¼Œ&quot;BrushResource&quot;ï¼Œ&quot;DrawEffects&quot;ã€‚ä¹Ÿå¯ä»¥ç”¨å¾ªç¯è¯­å¥æ¥ç»˜åˆ¶å¤šå¼ å›¾ç‰‡ï¼Œæ€»ä¹‹å°±æ˜¯ç”»å‡ºæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœå³å¯</p><p>å‰©ä¸‹çš„å°±æ˜¯ä¸€äº›ç®€å•çš„ç»‘å®šï¼Œå¹¿æ’­ï¼Œè·å–ï¼Œè®¾ç½®ï¼Œè°ƒç”¨ç­‰å‡½æ•°çš„è®¾ç½®ã€‚å¦‚ä¸‹ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>OtherFunc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SButton.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">const</span> FSlateBrush* <span class="title">SButton::GetBorder</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!<span class="built_in">GetShowDisabledEffect</span>() &amp;&amp; !<span class="built_in">IsEnabled</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> DisabledImage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> ( <span class="built_in">IsPressed</span>() )</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> PressedImage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">IsHovered</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> HoverImage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> NormalImage;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SButton::OnFocusLost</span><span class="params">( <span class="keyword">const</span> FFocusEvent&amp; InFocusEvent )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	SBorder::<span class="built_in">OnFocusLost</span>(InFocusEvent);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Release</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">FReply <span class="title">SButton::OnKeyDown</span><span class="params">( <span class="keyword">const</span> FGeometry&amp; MyGeometry, <span class="keyword">const</span> FKeyEvent&amp; InKeyEvent )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FReply Reply = FReply::<span class="built_in">Unhandled</span>();</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">IsEnabled</span>() &amp;&amp; FSlateApplication::<span class="built_in">Get</span>().<span class="built_in">GetNavigationActionFromKey</span>(InKeyEvent) == EUINavigationAction::Accept)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">Press</span>();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (PressMethod == EButtonPressMethod::ButtonPress)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//execute our &quot;OnClicked&quot; delegate, and get the reply</span></span><br><span class="line">			Reply = <span class="built_in">ExecuteOnClick</span>();</span><br><span class="line"></span><br><span class="line">			<span class="comment">//You should ALWAYS handle the OnClicked event.</span></span><br><span class="line">			<span class="built_in">ensure</span>(Reply.<span class="built_in">IsEventHandled</span>() == <span class="literal">true</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			Reply = FReply::<span class="built_in">Handled</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		Reply = SBorder::<span class="built_in">OnKeyDown</span>(MyGeometry, InKeyEvent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//return the constructed reply</span></span><br><span class="line">	<span class="keyword">return</span> Reply;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">FReply <span class="title">SButton::OnMouseButtonDoubleClick</span><span class="params">( <span class="keyword">const</span> FGeometry&amp; InMyGeometry, <span class="keyword">const</span> FPointerEvent&amp; InMouseEvent )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">OnMouseButtonDown</span>( InMyGeometry, InMouseEvent );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// .........</span></span><br></pre></td></tr></table></figure><p></p><p>å‡½æ•°å®ç°éƒ½æ¯”è¾ƒç®€å•ï¼Œæ²¡ä»€ä¹ˆå¯ä»¥å±•å¼€çš„ã€‚</p><p>è¿™å°±èƒ½åœ¨è“å›¾çš„ UMG é‡Œé¢ç”¨äº†å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸è¡Œï¼æˆ‘ä»¬è¿˜éœ€è¦æŠŠ &quot;SButton&quot; åšæˆ &quot;UObject&quot; çš„å½¢å¼ (ä¹Ÿå°±æ˜¯ &quot;UButton&quot;)ï¼Œè®© GC æ›¿æˆ‘ä»¬ç®¡ç† Widget çš„é‡Šæ”¾ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ &quot;UWidget&quot; è¿™ä¸€å±‚å®ç°æ›´å¤šæœ‰è¶£çš„ &quot;é«˜è¾¾é›¶ä»¶&quot; æ¥æä¾›ç»™è“å›¾ç”¨ã€‚æˆ‘ä»¬ä¸‹é¢å°±æ¥å®ç°ä¸€ä¸ªæ”¯æŒçº¢ç‚¹æé†’çš„ &quot;UMyButton&quot; ğŸ˜ƒ</p><hr><h2 id="ä»-swidget-åˆ°-uwidget"><a class="anchor" href="#ä»-swidget-åˆ°-uwidget">#</a> ä» SWidget åˆ° UWidget</h2><p>UWidget ç±»æ¯” SWidget ç±»ç†è§£èµ·æ¥ä¼šç®€å•ä¸å°‘ã€‚æ‰€ä»¥å’±ç›´æ¥ä¸Šä»£ç äº†ã€‚</p><p></p><figure class="highlight c++"><figcaption><span>MyButton.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyButton.h</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HELLOSLATE_API</span> <span class="title">UMyButton</span> :</span> <span class="keyword">public</span> UButton</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_UCLASS_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ActiveRedPoint</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ToggleRedPoint</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">InActiveRedPoint</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">IsRedPointActive</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> HasNewNotify;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ReleaseSlateResources</span><span class="params">(<span class="keyword">bool</span> bReleaseChildren)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="comment">/** Handle the actual click event from slate and forward it on */</span></span><br><span class="line">	<span class="function">FReply <span class="title">SlateHandleClicked</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//~ Begin UWidget Interface</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> TSharedRef&lt;SWidget&gt; <span class="title">RebuildWidget</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">	<span class="keyword">bool</span> HasNewNotify;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = Appearance)</span><br><span class="line">	FSlateBrush RedPointImage;</span><br><span class="line"></span><br><span class="line">	TSharedPtr&lt;SOverlay&gt; MyOverlay;</span><br><span class="line"></span><br><span class="line">	TSharedPtr&lt;SImage&gt; RedPoint;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æˆ‘ä»¬ç›´æ¥ç»§æ‰¿ &quot;UButton&quot;ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯è¦åœ¨ä¿å­˜ UButton çš„æ‰€æœ‰åŠŸèƒ½ä¸‹ï¼Œæ‹“å±•çº¢ç‚¹æé†’åŠŸèƒ½ã€‚æ²¡æœ‰å¿…è¦æŠŠ â€œUButton&quot;é‡æ–°å®ç°ä¸€éã€‚è¦åŠ çº¢ç‚¹æé†’ï¼Œé‚£æˆ‘ä»¬å°±è¦ç»™ Button æ·»åŠ ä¸€ä¸ª Imageï¼Œç„¶åæŠŠåŸæ¥çš„ UButton å’Œ Image æ”¾åˆ°ä¸€èµ·ï¼Œç„¶åå†å®ç°ä¸€äº›æ–¹æ³•æ¥æ§åˆ¶æˆ‘ä»¬çš„çº¢ç‚¹æ˜¯å¦æ˜¾ç¤ºï¼Œæœ€åå†å®ç°åŸºç±»å¿…é¡»è¦æˆ‘ä»¬å®ç°çš„æ¥å£ç±»ï¼Œæ¯”å¦‚&quot;ReleaseSlateResources&quot;(é‡Šæ”¾ Slate èµ„æºï¼Œæˆ‘ä»¬å¦å¤–åŠ äº†&quot;MyOverlay&quot;å’Œ&quot;RedPoint&quot;ï¼Œè¿™äº›éƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±åŠ åˆ°è¿™ä¸ªæ–¹æ³•é‡Œé¢æ¥é‡Šæ”¾æ‰)</p><p>ä¸‹é¢æ˜¯æºæ–‡ä»¶çš„å®ç°ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>UMyButton.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyButton.cpp</span></span><br><span class="line"></span><br><span class="line">UMyButton::<span class="built_in">UMyButton</span>(<span class="keyword">const</span> FObjectInitializer&amp; ObjectInitializer)</span><br><span class="line">	: <span class="built_in">Super</span>(ObjectInitializer)</span><br><span class="line">&#123;</span><br><span class="line">	HasNewNotify = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UMyButton::ActiveRedPoint</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HasNewNotify = <span class="literal">true</span>;</span><br><span class="line">	RedPoint-&gt;<span class="built_in">SetVisibility</span>(EVisibility::Visible);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UMyButton::ToggleRedPoint</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HasNewNotify = !HasNewNotify;</span><br><span class="line">	<span class="keyword">if</span> (HasNewNotify)</span><br><span class="line">	&#123;</span><br><span class="line">		RedPoint-&gt;<span class="built_in">SetVisibility</span>(EVisibility::Visible);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		RedPoint-&gt;<span class="built_in">SetVisibility</span>(EVisibility::Hidden);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UMyButton::InActiveRedPoint</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HasNewNotify = <span class="literal">false</span>;</span><br><span class="line">	RedPoint-&gt;<span class="built_in">SetVisibility</span>(EVisibility::Hidden);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">FReply <span class="title">UMyButton::SlateHandleClicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">InActiveRedPoint</span>();</span><br><span class="line"></span><br><span class="line">	OnClicked.<span class="built_in">Broadcast</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> FReply::<span class="built_in">Handled</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UMyButton::ReleaseSlateResources</span><span class="params">(<span class="keyword">bool</span> bReleaseChildren)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Super::<span class="built_in">ReleaseSlateResources</span>(bReleaseChildren);</span><br><span class="line"></span><br><span class="line">	MyOverlay.<span class="built_in">Reset</span>();</span><br><span class="line">	RedPoint.<span class="built_in">Reset</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">TSharedRef&lt;SWidget&gt; <span class="title">UMyButton::RebuildWidget</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Super::<span class="built_in">RebuildWidget</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">SAssignNew</span>(RedPoint, SImage)</span><br><span class="line">		.<span class="built_in">Image</span>(&amp;RedPointImage);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	MyOverlay = <span class="built_in">SNew</span>(SOverlay)</span><br><span class="line">		+ SOverlay::<span class="built_in">Slot</span>()</span><br><span class="line">		[</span><br><span class="line">			MyButton.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">		]</span><br><span class="line">		+SOverlay::<span class="built_in">Slot</span>()</span><br><span class="line">		.<span class="built_in">HAlign</span>(HAlign_Right)</span><br><span class="line">		.<span class="built_in">VAlign</span>(VAlign_Top)</span><br><span class="line">		[</span><br><span class="line">			RedPoint.<span class="built_in">ToSharedRef</span>()</span><br><span class="line">		];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> MyOverlay.<span class="built_in">ToSharedRef</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><code>RebuildWidget</code> æ˜¯æˆ‘ä»¬æ„é€  UWidget çš„æ–¹æ³•ï¼Œè·Ÿ SWidget çš„ <code>Construct</code> æ–¹æ³•ç±»ä¼¼ã€‚æˆ‘ä»¬éœ€è¦å…ˆæŠŠ &quot;MyButton&quot;(UButton åŸºç±»é‡Œé¢çš„) ç»™æ„é€ å¥½ï¼Œç„¶åå†è‡ªå·±æ„é€ ä¸€ä¸ª &quot;SImage&quot; æ¥å­˜æ”¾çº¢ç‚¹ã€‚æœ€åæŠŠè¿™ä¸¤ä¸ªç»™ SWidget æ·»åŠ åˆ° MyOverlay é‡Œé¢ï¼Œå¹¶è¿”å›å»å³å¯ã€‚&quot;ReleaseSlateResources&quot; æ–¹æ³•åˆ™éœ€è¦æŠŠæˆ‘ä»¬å¦å¤–åŠ çš„ä¸¤ä¸ª SWidget ç»™åŠ è¿›å»å°±å®Œæˆäº†ã€‚</p><p>ä»¥ä¸Šä»£ç ä¸­åˆ›å»ºçš„çº¢ç‚¹æŒ‰é’®è™½ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†å…¶å®è¿˜åªæ˜¯é›å½¢ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ›´å¤šåŸºç±»çš„æ¥å£å‡½æ•°ä»¥è·å¾—æ›´ç»†è‡´çš„å¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬å°±ä¸å†å±•å¼€äº†ã€‚é‚£ä¹ˆ..... æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œå‡†å¤‡ç»“æŸæœ¬æ¬¡æ—…ç¨‹å•¦ï½ï½ï½</p><p>æœ¬ç¯‡æ€»ç»“ï¼š</p><ul><li>ä»‹ç»äº† &quot;Widget Reflector&quot; (Widget åå°„å™¨) çš„ç”¨æ³•ï¼Œå¹¶ç”¨å…¶è¿½è¸ªäº† &quot;SDetailsView&quot; çš„ç»„æˆ</li><li>é€šè¿‡ç ”ç©¶ &quot;SDetailsView&quot; çš„æºç ï¼Œæˆ‘ä»¬åˆ†æäº†å®šä¹‰ &quot;FArgument&quot; ç»“æ„ä½“çš„å‡ ä¸ªå®ä»£ç </li><li>åˆ†æäº† &quot;SDetailsView&quot; çš„ &quot;Construct&quot; å‡½æ•°ï¼Œä¸»è¦å°±æ˜¯ç”¨ &quot;FArgument&quot; åˆå§‹åŒ–å¯¹è±¡å±æ€§ï¼Œç”¨ &quot;SNew&quot; æ‹¼é«˜è¾¾ã€‚</li><li>åˆ†æäº† &quot;SNew&quot; å®ï¼Œ'+'ï¼Œ'[]' è¿ç®—ç¬¦é‡è½½çš„æºç ä»¥åŠä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšçš„åŸå› </li><li>åˆ†æäº† &quot;SDetailsView&quot; ä¸­ç»†èŠ‚æ ‘ (è£…è½½å±æ€§é¡¹çš„å®¹å™¨) æ„å»ºçš„è¿‡ç¨‹</li><li>ä¸ºäº†å¼„æ˜ç™½ç»†èŠ‚æ ‘ä¸­æ¯ä¸€ä¸ªå±æ€§é¡¹çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œæˆ‘ä»¬è¯¦ç»†åˆ†æäº† &quot;STreeView&quot; çš„ &quot;Tick&quot; å‡½æ•°ï¼Œ&quot;ReGenerateItems&quot; å‡½æ•°ï¼Œ&quot;GeneratedWidgetForItem&quot; å‡½æ•°ï¼Œä½œç”¨åˆ†åˆ«å¦‚ä¸‹ï¼š<ul><li>&quot;Tick&quot; è®¡ç®—æ»šåŠ¨åç§»ï¼Œç¡®å®šå¼€å§‹ç”Ÿæˆçš„ç¬¬ä¸€é¡¹çš„ä½ç½®ï¼Œå¹¶è°ƒç”¨ &quot;ReGenerateItems&quot; æ¥é‡æ–°ç”Ÿæˆæ¯ä¸€é¡¹ (è¿˜æœ‰æ»šåŠ¨æ¡çš„æ›´æ–°ç­‰ç­‰)</li><li>&quot;ReGenerateItems&quot; è°ƒç”¨ &quot;GenerateWidgetForItem&quot; æ¥ç”Ÿæˆ Widgetï¼Œå¹¶æŠŠæ¯ä¸ª Widget å¯æ˜¾ç¤ºçš„éƒ¨åˆ†æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿˜åšäº†è¿‡åº¦æ»‘åŠ¨çš„å›é€€å¤„ç†</li><li>&quot;GeneratedWidgetForItem&quot; ç”¨å…·ä½“çš„ Item æ¥ç”Ÿæˆä¸€ä¸ª Widgetï¼Œå¹¶ç¼“å­˜ä¸€èµ·æ¥ï¼Œå¦‚æœä¸‹æ¬¡éœ€è¦ç”Ÿæˆç›¸åŒçš„ Widgetï¼Œåˆ™ç›´æ¥è¿”å›å³å¯</li></ul></li><li>ç»§ç»­æ·±å…¥åˆ†æäº†æ¯ä¸€é¡¹çš„å…·ä½“ç”Ÿæˆä»£ç  &quot;OnGenerateRaw&quot;ï¼Œä¸»è¦å°±æ˜¯ç”Ÿæˆä¸€ä¸ª åå­— Widget å’Œ å€¼ Widgetï¼Œå¦‚æœå€¼ Widget å¯ä»¥å±•å¼€ï¼Œè¿™è¿˜éœ€è¦åŠ è½½å±•å¼€çš„éƒ¨åˆ† (å¦‚ï¼šTransform)</li><li>ä»‹ç»äº† &quot;Slate&quot; ç³»ç»Ÿçš„åŸºæœ¬æ¡†æ¶ï¼Œåˆ†æäº† &quot;SButton&quot; çš„åŸºæœ¬å®ç°æ€è·¯</li><li>åˆ†æäº† &quot;SWidget&quot; çš„ &quot;Construct&quot; , &quot;OnPaint&quot; ç­‰å‡½æ•°çš„å®ç°</li><li>æœ€åæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ”¯æŒçº¢ç‚¹æé†’çš„ &quot;UMyButton&quot;ï¼Œåˆ†åˆ«è¯´æ˜äº† &quot;SWidget&quot; å’Œ &quot;UWidget&quot; çš„ä½œç”¨ï¼Œæ¯”è¾ƒäº† &quot;SWidget&quot; å’Œ &quot;UWidget&quot; åœ¨å®ç°ä¸Šçš„åŒºåˆ«ã€‚</li></ul><p>ç»“è¯­ï¼šu1s1ï¼Œæœ¬ç¯‡åšå®¢å…¶å®åªæ˜¯åˆ†æäº† Slate æºç ä¸­éå¸¸åŸºç¡€çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¹Ÿéƒ½çŸ¥é“ï¼Œè™šå¹»ç¼–è¾‘å™¨çš„æ•´ä¸ªç•Œé¢åŒ…æ‹¬æ‰€æœ‰å·¥å…·åŒ–çš„çª—å£ï¼Œå…¶å®éƒ½æ˜¯ç”¨ &quot;UMG&quot; ç³»ç»Ÿæ­å»ºå‡ºæ¥çš„ã€‚&quot;UMG&quot; çš„å‘ï¼Œæ·±ä¸è§åº•ã€‚æˆ‘ä»¬ä¸å¯èƒ½ä¹Ÿæ²¡æœ‰å¿…è¦æŠŠæ‰€æœ‰ Slate ç±»éƒ½å¼„æ˜ç™½ï¼Œä½†æ˜¯æˆ‘èµ·ç å¾—ææ¸…æ¥š Slate è¯­æ³•çš„åº•å±‚å®ç°ï¼Œä¹Ÿè¦å…·å¤‡è‡ªå·±å®ç° Slate ç±»çš„èƒ½åŠ›ï¼Œä¹Ÿç®—æ˜¯ç»™æ’ä»¶å¼€å‘æ‰“ä¸‹ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åŸºç¡€å§ã€‚</p><p>é‚£ä¹ˆï¼Œæœ¬æ¬¡æ—…ç¨‹åˆ°æ­¤ç»“æŸã€‚å’±ä»¬æ’ä»¶å¼€å‘ç¯‡è§ã€‚</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-12-01 09:20:47" itemprop="dateModified" datetime="2021-12-01T09:20:47+08:00">2021-12-01</time> </span><span id="2021/11/26/UE4/UE4CPP/Unreal Slate/" class="item leancloud_visitors" data-flag-title="Unreal Slate" title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>-YIFEI- <i class="ic i-at"><em>@</em></i>ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹</li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://kotori_suki.github.io/2021/11/26/UE4/UE4CPP/Unreal%20Slate/" title="Unreal Slate">https://kotori_suki.github.io/2021/11/26/UE4/UE4CPP/Unreal Slate/</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/11/22/UE4/UE4CPP/Unreal%20%E5%A4%9A%E7%A7%8D%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeyvx1d4j20zk0m8hdt.jpg" title="Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> UE4_C++</span><h3>Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†</h3></a></div><div class="item right"><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20%E6%80%BB%E8%A7%88%20&%20UEngine%20&%20UGameInstance/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipex2cdtbj20zk0m8x6p.jpg" title="Gameplay â€”â€” æ€»è§ˆ &amp; UEngine &amp; UGameInstance"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> Gameplay</span><h3>Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#unreal-slate"><span class="toc-number">1.</span> <span class="toc-text">Unreal Slate</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E-widget-reflector-%E5%BC%80%E5%A7%8B"><span class="toc-number">1.1.</span> <span class="toc-text">ä» Widget Reflector å¼€å§‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#details-view-%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.</span> <span class="toc-text">Details View çš„å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">1.2.1.</span> <span class="toc-text">è¿ç®—ç¬¦é‡è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#snew"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">SNew</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#operator"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">operator +</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#operator-2"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">operator []</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#soverlayslot"><span class="toc-number">1.2.1.3.1.</span> <span class="toc-text">SOverlay::Slot()</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E5%B0%8F%E7%BB%93"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">è¿ç®—ç¬¦å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82%E6%A0%91%E7%9A%84%E6%9E%84%E5%BB%BAa-id-%E7%BB%86%E8%8A%82%E6%A0%91%E7%9A%84%E6%9E%84%E5%BB%BA-a"><span class="toc-number">1.2.2.</span> <span class="toc-text">ç»†èŠ‚æ ‘çš„æ„å»º &lt;a id &#x3D; &quot;ç»†èŠ‚æ ‘çš„æ„å»º&quot;&gt; &lt;&#x2F;a&gt;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#constructtreeview"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">ConstructTreeView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sdetailtreeconstruct"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">SDetailTree::Construct</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tick-%E5%88%B7%E6%96%B0%E8%8A%82%E7%82%B9"><span class="toc-number">1.2.3.</span> <span class="toc-text">Tick åˆ·æ–°èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%B1%9E%E6%80%A7%E9%A1%B9"><span class="toc-number">1.2.4.</span> <span class="toc-text">ç”Ÿæˆå±æ€§é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#regenerateitems"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">ReGenerateItems</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#generatedwidgetforitem"><span class="toc-number">1.2.5.</span> <span class="toc-text">GeneratedWidgetForItem</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ongenerateraw"><span class="toc-number">1.2.6.</span> <span class="toc-text">OnGenerateRaw</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slate-%E7%9A%84%E6%95%B4%E4%BD%93%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-number">1.3.</span> <span class="toc-text">Slate çš„æ•´ä½“å®ç°æ€è·¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86-%E5%B8%B8%E8%AF%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">å‰ç½®çŸ¥è¯† (å¸¸è¯†)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-slate-%E7%B1%BB%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.2.</span> <span class="toc-text">å®ç° Slate ç±»çš„æµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-fargument-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">å®šä¹‰ FArgument ç»“æ„ä½“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-construct-%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">å®šä¹‰ Construct å‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onpaint"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">OnPaint</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E-swidget-%E5%88%B0-uwidget"><span class="toc-number">1.4.</span> <span class="toc-text">ä» SWidget åˆ° UWidget</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/2021/10/25/UE4/UE4CPP/API%E4%B8%8D%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C-%E4%B9%8B-GetGameMode/" rel="bookmark" title="APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetGameMode">APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetGameMode</a></li><li><a href="/2021/10/25/UE4/UE4CPP/API%E4%B8%8D%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C-%E4%B9%8B-GetPlayerController/" rel="bookmark" title="APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetPlayerController">APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetPlayerController</a></li><li><a href="/2021/10/25/UE4/UE4CPP/unreal%20%E5%BC%95%E6%93%8E%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" rel="bookmark" title="unrealå¼•æ“å¯åŠ¨æµç¨‹">unrealå¼•æ“å¯åŠ¨æµç¨‹</a></li><li><a href="/2021/10/26/UE4/UE4CPP/%E4%BB%8ESVG%E6%96%87%E4%BB%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%97%85%E7%A8%8B/" rel="bookmark" title="ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~">ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~</a></li><li><a href="/2021/10/29/UE4/UE4CPP/%E5%8F%8D%E5%B0%84%E7%B3%BB%E7%BB%9F%20API/" rel="bookmark" title="åå°„ç³»ç»ŸAPI  è§£æå’Œä½¿ç”¨">åå°„ç³»ç»ŸAPI è§£æå’Œä½¿ç”¨</a></li><li><a href="/2021/10/31/UE4/UE4CPP/Session%E7%9A%84%E4%BD%BF%E7%94%A8%20C++%E7%AF%87/" rel="bookmark" title="Sessionçš„ä½¿ç”¨ C++ç¯‡">Sessionçš„ä½¿ç”¨ C++ç¯‡</a></li><li><a href="/2021/11/02/UE4/UE4CPP/Unreal%20%E5%BA%8F%E5%88%97%E5%8C%96/" rel="bookmark" title="Unreal åºåˆ—åŒ–~~~">Unreal åºåˆ—åŒ–~~~</a></li><li><a href="/2021/11/06/UE4/UE4CPP/Unreal%20GC%E8%BF%87%E7%A8%8B/" rel="bookmark" title="Unreal GCè¿‡ç¨‹">Unreal GCè¿‡ç¨‹</a></li><li><a href="/2021/11/08/UE4/UE4CPP/UClass%E7%9A%84%E8%AF%9E%E7%94%9F%E4%B8%8E%E6%88%90%E9%95%BF/" rel="bookmark" title="UClassçš„è¯ç”Ÿä¸æˆé•¿">UClassçš„è¯ç”Ÿä¸æˆé•¿</a></li><li><a href="/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" rel="bookmark" title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•">UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•</a></li><li><a href="/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/" rel="bookmark" title="FPropertyçš„åˆ†æä¸æ€»ç»“">FPropertyçš„åˆ†æä¸æ€»ç»“</a></li><li><a href="/2021/11/22/UE4/UE4CPP/Unreal%20%E5%A4%9A%E7%A7%8D%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" rel="bookmark" title="Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†">Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†</a></li><li class="active"><a href="/2021/11/26/UE4/UE4CPP/Unreal%20Slate/" rel="bookmark" title="Unreal Slate">Unreal Slate</a></li><li><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20%E6%80%BB%E8%A7%88%20&%20UEngine%20&%20UGameInstance/" rel="bookmark" title="Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance">Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance</a></li><li><a href="/2021/12/03/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20FWorldContext%20&%20UWorld%20&%20ULevel/" rel="bookmark" title="Gameplay â€”â€” FWorldContext & UWorld & ULevel">Gameplay â€”â€” FWorldContext & UWorld & ULevel</a></li><li><a href="/2021/12/06/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AActor%20&%20UActorComponent/" rel="bookmark" title="Gameplay â€”â€” AActor & UActorComponent">Gameplay â€”â€” AActor & UActorComponent</a></li><li><a href="/2021/12/09/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20APawn%20&%20AController%20&%20APlayerController/" rel="bookmark" title="Gameplay â€”â€” APawn & AController & APlayerController">Gameplay â€”â€” APawn & AController & APlayerController</a></li><li><a href="/2021/12/12/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AGameMode%20&%20AGameState%20&%20APlayerState/" rel="bookmark" title="Gameplay â€”â€” AGameMode & AGameState & APlayerState">Gameplay â€”â€” AGameMode & AGameState & APlayerState</a></li><li><a href="/2021/12/15/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20USavegame%20&%20UPlayer/" rel="bookmark" title="Gameplay â€”â€” USavegame & UPlayer">Gameplay â€”â€” USavegame & UPlayer</a></li><li><a href="/2021/12/17/UE4/UE4CPP/Unreal%20GAS%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" rel="bookmark" title="Unreal GAS æºç è§£æ">Unreal GAS æºç è§£æ</a></li><li><a href="/2021/12/28/UE4/UE4CPP/CustomItemModule/" rel="bookmark" title="Custom Item Module">Custom Item Module</a></li><li><a href="/2021/12/30/UE4/UE4CPP/Unreal%20%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/" rel="bookmark" title="Unreal å¼‚æ­¥ä¸å¹¶è¡Œç¼–ç¨‹">Unreal å¼‚æ­¥ä¸å¹¶è¡Œç¼–ç¨‹</a></li><li><a href="/2022/01/03/UE4/UE4CPP/Unreal%20MovementComponent%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" rel="bookmark" title="Unreal MovementComponent æºç è§£æ">Unreal MovementComponent æºç è§£æ</a></li><li><a href="/2022/01/08/UE4/UE4CPP/Unreal%20%E8%93%9D%E5%9B%BE%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/" rel="bookmark" title="Unreal è“å›¾åº•å±‚å®ç°æœºåˆ¶">Unreal è“å›¾åº•å±‚å®ç°æœºåˆ¶</a></li><li><a href="/2022/03/15/UE4/UE4CPP/Unreal%20%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%20%E4%B9%8B%E4%B8%80/" rel="bookmark" title="Unreal å¸¸ç”¨æ¥å£æºç åˆ†æ ä¹‹ä¸€">Unreal å¸¸ç”¨æ¥å£æºç åˆ†æ ä¹‹ä¸€</a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="-YIFEI-" data-src="/images/avatar.jpg"><p class="name" itemprop="name">-YIFEI-</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">56</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">15</span> <span class="name">åˆ†ç±»</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0tvdG9yaS1TdWtp" title="https:&#x2F;&#x2F;github.com&#x2F;Kotori-Suki"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS90dnQtNjA=" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;tvt-60"><i class="ic i-zhihu"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li></ul></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/11/22/UE4/UE4CPP/Unreal%20%E5%A4%9A%E7%A7%8D%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20%E6%80%BB%E8%A7%88%20&%20UEngine%20&%20UGameInstance/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/Gameplay/" title="åˆ†ç±»äº Gameplay">Gameplay</a></div><span><a href="/2021/12/03/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20FWorldContext%20&%20UWorld%20&%20ULevel/" title="Gameplay â€”â€” FWorldContext &amp; UWorld &amp; ULevel">Gameplay â€”â€” FWorldContext & UWorld & ULevel</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ComputerBase/" title="åˆ†ç±»äº è®¡ç®—æœºåŸºç¡€">è®¡ç®—æœºåŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/ComputerBase/%E7%AE%97%E6%B3%95/" title="åˆ†ç±»äº ç®—æ³•">ç®—æ³•</a></div><span><a href="/2021/08/16/ComputerBase/Algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%A6%99%E7%94%A8_%E5%93%88%E5%B8%8C%E8%A1%A8/" title="å“ˆå¸Œè¡¨">å“ˆå¸Œè¡¨</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2021/11/02/UE4/UE4CPP/Unreal%20%E5%BA%8F%E5%88%97%E5%8C%96/" title="Unreal åºåˆ—åŒ–~~~">Unreal åºåˆ—åŒ–~~~</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/17/CPPBase/DesignPattern/AbstractFactory/" title="æŠ½è±¡å·¥å‚æ¨¡å¼">æŠ½è±¡å·¥å‚æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2022/03/15/UE4/UE4CPP/Unreal%20%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%20%E4%B9%8B%E4%B8%80/" title="Unreal å¸¸ç”¨æ¥å£æºç åˆ†æ ä¹‹ä¸€">Unreal å¸¸ç”¨æ¥å£æºç åˆ†æ ä¹‹ä¸€</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a></div><span><a href="/2021/08/20/CPPBase/%E5%85%B3%E9%94%AE%E8%AF%8D%E8%A7%A3%E6%9E%90/" title="C++å…³é”®è¯è§£æ">C++å…³é”®è¯è§£æ</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº ç»“æ„å‹æ¨¡å¼">ç»“æ„å‹æ¨¡å¼</a></div><span><a href="/2021/08/19/CPPBase/DesignPattern/Bridge/" title="æ¡¥æ¥æ¨¡å¼">æ¡¥æ¥æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a></div><span><a href="/2021/11/20/CPPBase/C++%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%20%E5%A4%8D%E5%88%BB/" title="C++æ™ºèƒ½æŒ‡é’ˆ å¤åˆ»">C++æ™ºèƒ½æŒ‡é’ˆ å¤åˆ»</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/21/CPPBase/DesignPattern/Decorater/" title="è£…é¥°å™¨æ¨¡å¼">è£…é¥°å™¨æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/Gameplay/" title="åˆ†ç±»äº Gameplay">Gameplay</a></div><span><a href="/2021/12/09/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20APawn%20&%20AController%20&%20APlayerController/" title="Gameplay â€”â€” APawn &amp; AController &amp; APlayerController">Gameplay â€”â€” APawn & AController & APlayerController</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 â€“ <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">-YIFEI- @ Afei's Blog</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/11/26/UE4/UE4CPP/Unreal Slate/",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",hide:"(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>