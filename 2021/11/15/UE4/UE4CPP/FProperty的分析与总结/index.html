<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/atom.xml"><link rel="alternate" type="application/json" title="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹" href="https://kotori_suki.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://kotori_suki.github.io/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/"><title>FPropertyçš„åˆ†æä¸æ€»ç»“ - UE4_C++ - UE4 | Afei's Blog = ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹ = Welcome to my blog !</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">FPropertyçš„åˆ†æä¸æ€»ç»“</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2021-11-15 19:43:53"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2021-11-15T19:43:53+08:00">2021-11-15</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Afei's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipeybxm1pj20zk0m8niv.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipew28b65j20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipetlbztpj20zk0m84qp.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giciusoyjnj219g0u0x56.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicit4jrvuj20zk0m8785.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipex2cdtbj20zk0m8x6p.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/UE4/" itemprop="item" rel="index" title="åˆ†ç±»äº UE4"><span itemprop="name">UE4</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/UE4/UE4CPP/" itemprop="item" rel="index" title="åˆ†ç±»äº UE4_C++"><span itemprop="name">UE4_C++</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://kotori_suki.github.io/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="-YIFEI-"><meta itemprop="description" content="Welcome to my blog !, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹"></span><div class="body md" itemprop="articleBody"><h1 id="fpropertyçš„åˆ†æä¸æ€»ç»“"><a class="anchor" href="#fpropertyçš„åˆ†æä¸æ€»ç»“">#</a> FProperty çš„åˆ†æä¸æ€»ç»“</h1><p>ç®€ä»‹ï¼šæœ¬ç¯‡å°†å¯¹ &quot;FProperty&quot; è¿›è¡Œåˆ†æï¼Œæ—¨åœ¨äº†è§£å…¶å†…éƒ¨çš„å±æ€§åŠå‡½æ•°çš„å®ç°åŸç†ã€‚é€‚å½“åœ°æ‹“å±•åˆ†æ &quot;FProperty&quot; çš„å­ç±»ã€‚</p><h3 id="å‰è¨€"><a class="anchor" href="#å‰è¨€">#</a> å‰è¨€</h3><p>ç›¸ä¿¡å„ä½ä¹Ÿéƒ½çŸ¥é“ï¼Œ&quot;FProperty&quot; å…¶å®æ˜¯ä» &quot;UProperty&quot; ä¸­ &quot;è¿›åŒ–&quot; å‡ºæ¥çš„ã€‚ä¸ºä»€ä¹ˆè¯´æ˜¯è¿›åŒ–å‘¢ï¼Ÿå› ä¸º &quot;FProperty&quot; ä¸å†ç»§æ‰¿ &quot;UObject&quot;ï¼Œä¸ºä»€ä¹ˆå¯ä»¥ä¸å†ç»§æ‰¿ &quot;UObject&quot; ? å› ä¸ºå¯¹è±¡å’Œå±æ€§çš„åŒºåˆ«æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæˆ‘ä»¬çš„å¯¹è±¡å¯ä»¥æœ‰å¾ˆå¤šå±æ€§ï¼Œè€Œä¸”å±æ€§ä¹Ÿæ˜¯ä¸éœ€è¦ç›´æ¥ &quot;GC&quot; çš„ï¼Œå¯ä»¥è·Ÿéšæ‰€å±çš„å¯¹è±¡ä¸€èµ· GCï¼Œæ‰€ä»¥å…¶å® &quot;UObject&quot; çš„å¾ˆå¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬çš„ &quot;UProperty&quot; æ˜¯ç”¨ä¸ä¸Šçš„ã€‚å†æœ‰å°±æ˜¯ï¼Œåªè¦æ”¯æŒåå°„çš„å±æ€§éƒ½éœ€è¦ä¸€ä¸ª &quot;UProperty&quot;ï¼Œè€Œå±æ€§åœ¨ç¨‹åºä¸­åˆæ˜¯éå¸¸ä¹‹å¤šçš„ï¼Œæ‰€ä»¥å¯¹ &quot;UProperty&quot; çš„ &quot;ç˜¦èº«&quot; å¿…ç„¶å¯ä»¥å‡å°‘ç¨‹åºè¿è¡Œæ—¶å†…å­˜çš„å¼€é”€ï¼Œæ˜¯ä¸€é¡¹ä¸é”™çš„ä¼˜åŒ–ã€‚</p><p>ä»¥ä¸‹æˆ‘ä»¬ä¼šå¯¹ &quot;FProperty&quot; å†…çš„å±æ€§è¿›è¡Œè¯´æ˜ï¼Œç„¶åå†åˆ†æ &quot;FProperty&quot; å†…çš„æ–¹æ³•ï¼ŒåŠå…¶å­ç±»çš„å®ç°ã€‚å½“ç„¶ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè®¤è¯†ä¸€ä¸‹è¿™ä½æœ‹å‹ï¼Œé¡ºä¾¿å¯¹å…¶ &quot;èº«ä¸–&quot; è¿›è¡Œä¸€éå…·ä½“çš„ä»‹ç»ã€‚é‚£æˆ‘ä»¬å¼€å§‹å§ ğŸ˜ƒ</p><h3 id="fpropertyçš„ä»‹ç»"><a class="anchor" href="#fpropertyçš„ä»‹ç»">#</a> FProperty çš„ä»‹ç»</h3><p>&quot;FProperty&quot; æ˜¯ä¸€ç§æ”¯æŒåå°„çš„å±æ€§ï¼Œä¸å…¶è¯´æ˜¯å±æ€§ï¼Œæˆ‘è§‰å¾—è¯´æ˜¯åå°„ç”¨çš„å¯¹è±¡å¯èƒ½æ›´ç›´è§‚ã€‚å› ä¸ºå°±ç®—æ˜¯ç®€å•çš„ &quot;int&quot; å‹å±æ€§ï¼Œå¦‚æœåŠ ä¸Š &quot;UPROPERTY ()&quot; å®ï¼Œå¼•æ“ä¹Ÿä¼šå¸®æˆ‘ä»¬åœ¨è¯¥ç±»çš„ &quot;UClass&quot; é‡Œé¢ç”Ÿæˆä¸€ä¸ª &quot;FIntProperty&quot; å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å­˜ç€æˆ‘ä»¬çš„ &quot;int&quot; å‹æ•°æ®çš„åŒæ—¶ï¼Œè¿˜ä¼šå­˜ä¸€äº›ç”¨äºåå°„çš„æ•°æ®ï¼Œä»¥åŠå®šä¹‰ä¸€äº›åŸºäºåå°„ã€ä½¿ç”¨æ–¹ä¾¿çš„å‡½æ•°ï¼Œ&quot;FProperty&quot; åœ¨å¼•æ“æºç ä¸­ä½¿ç”¨å¹¿æ³›ï¼Œåƒç½‘ç»œå¤åˆ¶ï¼ŒGC ç­‰é‡è¦åŠŸèƒ½éƒ½æ˜¯ç¦»ä¸å¼€å®ƒçš„ã€‚</p><h3 id="fpropertyçš„å±æ€§"><a class="anchor" href="#fpropertyçš„å±æ€§">#</a> FProperty çš„å±æ€§</h3><p><img data-src="FProperty%E5%B1%9E%E6%80%A7.png" alt="FPropertyå±æ€§"></p><p><img data-src="FField%E5%B1%9E%E6%80%A7.png" alt="FFieldå±æ€§"></p><p>ä»ä¸Šé¢çš„æºç ä¸­å¾—çŸ¥ï¼Œ&quot;FProperty&quot; çš„å±æ€§å…¶å®å¹¶ä¸å¤šã€‚åŒ…æ‹¬ï¼š</p><table><thead><tr><th>å±æ€§</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td>ArrayDim (Array Dimension)</td><td style="text-align:left">æ•°ç»„çš„å¤§å°ï¼Œæš‚æ—¶åªæœ‰ &quot;FArrayProperty&quot; å’Œ &quot;FMapProperty&quot; ä¸­ç”¨åˆ°äº†</td></tr><tr><td>ElementSize</td><td style="text-align:left">æ¯ä¸ªå…ƒç´ çš„å¤§å°ï¼Œä¾¿äº &quot;FArrayProperty&quot; ç­‰è¿”å›æŒ‡å®šç´¢å¼•çš„å€¼</td></tr><tr><td>PropertyFlags</td><td style="text-align:left">EPropertyFlagsï¼Œå±æ€§æ ‡è®°ã€‚æ¯”å¦‚æ˜¯å¦è“å›¾å¯è§ï¼Œæ˜¯å¦ RepNotify ç­‰</td></tr><tr><td>RepIndex</td><td style="text-align:left">ç”¨äºç½‘ç»œå¤åˆ¶ç›¸å…³çš„ &quot;Property&quot; çš„åˆå§‹åŒ–ï¼Œå¦‚ &quot;FLifetimeProperty&quot;</td></tr><tr><td>BlueprintReplication</td><td style="text-align:left">ç½‘ç»œå¤åˆ¶çš„ Conditionï¼Œè¯¦è§ï¼š&quot;ELifetimeCondition&quot;</td></tr><tr><td>Offset_Internal</td><td style="text-align:left">ç›¸å¯¹äº &quot;Container&quot; çš„åœ°å€åç§»é‡</td></tr><tr><td>RepNotifyFunc</td><td style="text-align:left">è¯¥å±æ€§çš„ &quot;RepNotify&quot; å‡½æ•°çš„åç§°</td></tr><tr><td>PropertyLinkNext</td><td style="text-align:left">æŒ‡å‘å±æ€§é“¾ä¸­è¯¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ (å±æ€§é“¾å°†è¯¥ç±»ç›´è‡³æœ€ä¸Šå±‚åŸºç±»çš„å±æ€§å…¨éƒ¨é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆå•å‘é“¾è¡¨ç»“æ„ã€‚åœ¨ &quot;UStruct&quot; ä¸­å­˜æœ‰å±æ€§é“¾çš„å¤´èŠ‚ç‚¹ &quot;PropertyLink&quot;ï¼Œä¹Ÿå³æ‰€æœ‰ &quot;UStruct&quot; çš„å­ç±»éƒ½æœ‰å±æ€§é“¾)</td></tr><tr><td>NextRef</td><td style="text-align:left">æŒ‡å‘å¯¹è±¡å¼•ç”¨ (UObject*) å±æ€§é“¾çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåªå­˜å¯¹è±¡å¼•ç”¨çš„å±æ€§é“¾ï¼Œæé«˜ GC æ•ˆç‡ï¼‰</td></tr><tr><td>DestructorLinkNext</td><td style="text-align:left">æŒ‡å‘ææ„é“¾çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå­˜éœ€è¦è°ƒç”¨ææ„å‡½æ•°çš„å±æ€§ï¼Œä¸åŒ…æ‹¬ int ç­‰åªéœ€è¦é‡Šæ”¾å†…å­˜çš„ç®€å•æ•°æ®ç±»å‹</td></tr><tr><td>PostConstructLinkNext</td><td style="text-align:left">æŒ‡å‘æ„é€ åå¤„ç†é“¾çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåå¤„ç†å±æ€§æŒ‡éœ€è¦åœ¨åºåˆ—åŒ–ååˆå§‹åŒ–å…¶å€¼çš„å±æ€§ï¼Œåˆå§‹å€¼å¯ä»¥åœ¨ &quot;CDO&quot; æˆ– &quot;config&quot; æ–‡ä»¶ä¸­è·å–</td></tr><tr><td>ClassPrivate</td><td style="text-align:left">æŒ‡å‘ç±»å¯¹è±¡ï¼Œè¡¨ç¤ºè¯¥ &quot;FField&quot; çš„ç±»å‹</td></tr><tr><td>Owner</td><td style="text-align:left">è¯¥å±æ€§çš„ &quot;Owner&quot;ï¼Œå¿…é¡»æ”¯æŒåå°„ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯ &quot;UObject&quot; æˆ–å…¶å­ç±»</td></tr><tr><td>Next</td><td style="text-align:left">å­—æ®µé“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå­—æ®µèŠ‚ç‚¹ï¼Œç”¨äºå­—æ®µè¿­ä»£å™¨ &quot;TFieldIterator&quot;</td></tr><tr><td>NamePrivate</td><td style="text-align:left">å­—æ®µå</td></tr><tr><td>FlagsPrivate</td><td style="text-align:left">å­—æ®µæ ‡è®°ï¼Œè¯¦è§ &quot;EObjectFlags&quot;</td></tr></tbody></table><p>ä»¥ä¸Šæ˜¯ &quot;FProperty&quot; çš„æ‰€æœ‰å±æ€§åŠå…¶è¯´æ˜ã€‚ä¸‹é¢æ˜¯ &quot;FProperty&quot; çš„ç±»å›¾ã€‚</p><p><img data-src="FProperty%E7%B1%BB%E5%9B%BE.png" alt="FPropertyç±»å›¾"></p><p>ä»ç±»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œunreal å‡ ä¹æ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹çš„åå°„ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºäº†å¯¹åº”çš„ &quot;FProperty&quot; çš„å­ç±»</p><p>ä¸‹æ–‡ä¸­æˆ‘ä»¬å°†é‡ç‚¹åˆ†æ &quot;FProperty&quot; , &quot;FObjectProperty&quot; , &quot;FSoftObjectProperty&quot; , &quot;FIntProperty&quot; , &quot;FNameProperty&quot; , &quot;FArrayProperty&quot; , &quot;FMapProperty&quot; , &quot;FDelegateProperty&quot; çš„ç›¸å…³æ¥å£å’Œå®ç°ã€‚å‰©ä¸‹çš„ç•™äºˆè¯»è€…è‡ªè¡Œæ¢ç©¶ã€‚</p><hr><h3 id="å±æ€§é“¾çš„åˆå§‹åŒ–"><a class="anchor" href="#å±æ€§é“¾çš„åˆå§‹åŒ–">#</a> å±æ€§é“¾çš„åˆå§‹åŒ–</h3><p>å’±çŸ¥é“äº† &quot;FProperty&quot; çš„å±æ€§ï¼Œä¹ŸçŸ¥é“æ¯ä¸ª &quot;UStruct&quot; ä¸­éƒ½ä¼šæœ‰ &quot;PropertyLink&quot; (å±æ€§é“¾)ï¼Œé‚£è‡ªç„¶å°±ä¼šæƒ³çŸ¥é“è¿™ä¸ªå±æ€§é“¾æ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„ï¼Œæ€ä¹ˆåˆå§‹åŒ–çš„ï¼Ÿç­”æ¡ˆå¯ä»¥åœ¨ &quot;UClass&quot; çš„æ„é€ ä¸­æ‰¾ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ &quot;UFunction&quot;ï¼‰ï¼Œå› ä¸º &quot;UClass&quot; æ˜¯ &quot;UStruct&quot; çš„å­ç±»ï¼Œå…¶åˆå§‹åŒ–å°±å…ä¸äº†è¦åˆå§‹åŒ–å±æ€§é“¾ï¼Œä»¥ä¸‹æˆ‘ä»¬å°†åªå¯¹ &quot;UClass&quot; å±æ€§é“¾çš„åˆå§‹åŒ–æµç¨‹åšåˆ†æã€‚å¦‚æœè¯»è€…æƒ³äº†è§£ &quot;UClass&quot; çš„æ•´ä¸ªæ„é€ è¿‡ç¨‹ï¼Œå¯ä»¥å‚è€ƒ<a href>è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h4 id="ä»-uclass-çš„æ„é€ å¼€å§‹"><a class="anchor" href="#ä»-uclass-çš„æ„é€ å¼€å§‹">#</a> ä» &quot;UClass&quot; çš„æ„é€ å¼€å§‹</h4><p>åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ”¯æŒåå°„çš„ç±»åï¼Œ&quot;UHT&quot; ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå¯¹åº”çš„ &quot;MyClassName.generate.h&quot; å’Œ &quot;MyClassName.gen.cpp&quot; æ–‡ä»¶ï¼Œæä¾›ä¸€ç³»åˆ—ç”¨äºç”Ÿæˆ &quot;UClass&quot; ç±»å¯¹è±¡çš„å‡½æ•°ï¼Œè€Œåˆå§‹åŒ–å±æ€§é“¾çš„å‡½æ•°å°±åœ¨ &quot;Z_Construct_UClass_UMyClassName ()&quot; å®ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>Z_Construct_UClass_UMyClassName</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClassName.gen.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function">UClass* <span class="title">Z_Construct_UClass_UMyClassName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ &quot;OuterClass&quot; å¹¶ä¸æ˜¯å¤–éƒ¨ç±»ï¼Œè€Œæ˜¯è¾“å‡ºç±»å¯¹è±¡çš„æ„æ€(æˆ‘å°±è¢«å‘è¿‡...)</span></span><br><span class="line">    <span class="keyword">static</span> UClass* OuterClass = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">if</span> (!OuterClass)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¼•æ“æ„é€  &quot;UClass&quot; çš„å‡½æ•°ï¼Œå®šä¹‰åœ¨ä¸‹é¢</span></span><br><span class="line">        UE4CodeGen_Private::<span class="built_in">ConstructUClass</span>(OuterClass, Z_Construct_UClass_UMyClassName_Statics::ClassParams);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> OuterClass;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><figure class="highlight c++"><figcaption><span>ConstructUClass</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UObjectGlobals.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ConstructUClass</span><span class="params">(UClass*&amp; OutClass, <span class="keyword">const</span> FClassParams&amp; Params)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...... å¯¹å…¶ä»–å±æ€§çš„åˆå§‹åŒ–åŠå¤„ç†</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// &quot;NewClass&quot; å…¶å®å°±æ˜¯å’±çš„ &quot;StaticClass&quot;</span></span><br><span class="line">	UClass* NewClass = Params.<span class="built_in">ClassNoRegisterFunc</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ­£ç‰‡å¼€å§‹ï¼Œæ„é€ å’±çš„ &quot;FProperty&quot;ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° &quot;ChildProperties&quot; ä¸­ï¼Œ&quot;Params&quot; ä¸­çš„æ•°æ®æ˜¯ &quot;UHT&quot; åœ¨ç¼–è¯‘ &quot;.gen.cpp&quot; æ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„</span></span><br><span class="line">    <span class="built_in">ConstructFProperties</span>(NewClass, Params.PropertyArray, Params.NumProperties);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...... å¯¹å…¶ä»–å±æ€§çš„åˆå§‹åŒ–åŠå¤„ç†</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é™æ€é“¾æ¥ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’å‡½æ•°</span></span><br><span class="line">    NewClass-&gt;<span class="built_in">StaticLink</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p></p><figure class="highlight c++"><figcaption><span>ConstructFProperty</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UObjectGlobals.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ConstructFProperties</span><span class="params">(UObject* Outer, <span class="keyword">const</span> FPropertyParamsBase* <span class="keyword">const</span>* PropertyArray, int32 NumProperties)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// å°†æŒ‡é’ˆç§»è‡³æœ«ç«¯ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä»æœ«å°¾å¼€å§‹å‘å‰éå†</span></span><br><span class="line">    PropertyArray += NumProperties;</span><br><span class="line">    <span class="keyword">while</span> (NumProperties)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// çœŸæ­£æ„é€ æ¯ä¸ª &quot;FProperty&quot; çš„æ–¹æ³•ï¼ŒOuteræ˜¯ &quot;StaticClass&quot;ï¼Œä¹Ÿå°±æ˜¯å’±çš„ &quot;UClass&quot; å¯¹è±¡</span></span><br><span class="line">        <span class="built_in">ConstructFProperty</span>(Outer, PropertyArray, NumProperties);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>åœ¨åˆ†æ &quot;ConstructFProperty&quot; ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä¸€ä¸‹ææ¸…æ¥š å‚æ•°ä¸­çš„ &quot;const FPropertyParamsBase* const*&quot; æ˜¯ä»€ä¹ˆç±»å‹ã€‚å…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡å‘ &quot;FPropertyParamsBase&quot; å¸¸é‡çš„å¸¸é‡æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆè€Œå·²ã€‚é‡ç‚¹æ˜¯ &quot;FRropertyParamsBase&quot; ç»“æ„ä½“é‡Œé¢æ˜¯ä»€ä¹ˆã€‚</p><h4 id="fpropertyparamsbase"><a class="anchor" href="#fpropertyparamsbase">#</a> FPropertyParamsBase</h4><p></p><figure class="highlight c++"><figcaption><span>FPropertyParamsBase</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UObjectGlobals.h</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FPropertyParamsBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="comment">// Property åç§°</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>*    NameUTF8;</span><br><span class="line">    <span class="comment">// Property çš„RepNotifyå‡½æ•°åç§°ï¼ŒRPCç›¸å…³</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>*       RepNotifyFuncUTF8;</span><br><span class="line">    <span class="comment">// Property æ ‡è®°ï¼Œå¦‚: CPF_Transient ç­‰</span></span><br><span class="line">    EPropertyFlags    PropertyFlags;</span><br><span class="line">    <span class="comment">// Property ç±»å‹æ ‡è®°ï¼Œå¦‚: Float ç­‰</span></span><br><span class="line">    EPropertyGenFlags Flags;</span><br><span class="line">    <span class="comment">// å¯¹è±¡å®ä¾‹æ ‡è®°ï¼Œå¦‚ï¼šRF_NeedLoad ç­‰</span></span><br><span class="line">    EObjectFlags   ObjectFlags;</span><br><span class="line">    <span class="comment">// æ•°ç»„çš„å¤§å°ï¼Œéƒ¨åˆ† Property ä¸­ç”¨åˆ°</span></span><br><span class="line">    int32          ArrayDim;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>è¿™äº›å‚æ•°éƒ½ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™ç”± &quot;UHT&quot; å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆå¹¶å­˜åœ¨ &quot;.gen.cpp&quot; æ–‡ä»¶ä¸­çš„ &quot;Z_Construct_UClass_UMyClassName_Statics::ClassParams&quot; ä¸­ï¼Œä½†åªä¼šç”Ÿæˆæ ‡è®°äº† &quot;UPROPERTY ()&quot; å®çš„å±æ€§ï¼ˆä¹Ÿå°±æ˜¯æ”¯æŒåå°„çš„å±æ€§ï¼‰</p><p>å¥½çš„ï¼Œå’±ç»§ç»­è¯´ &quot;ConstructFProperty&quot; æ˜¯æ€ä¹ˆæ„é€  &quot;FProperty&quot; çš„ã€‚</p><h4 id="constructfproperty"><a class="anchor" href="#constructfproperty">#</a> ConstructFProperty</h4><p></p><figure class="highlight c++"><figcaption><span>ConstructFProperty</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UObjectGlobals.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;FFieldVariant&quot; æ˜¯ä¸€ä¸ªå®¹çº³ &quot;UObject&quot; æˆ– &quot;FField&quot; çš„å®¹å™¨(union)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ConstructFProperty</span><span class="params">(FFieldVariant Outer, <span class="keyword">const</span> FPropertyParamsBase* <span class="keyword">const</span>*&amp; PropertyArray, int32&amp; NumProperties)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å– &quot;PropertyArray&quot; çš„å‰ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="keyword">const</span> FPropertyParamsBase* PropBase = *--PropertyArray;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ§åˆ¶è¿­ä»£å¤„ç†çš„å±‚æ•°ï¼ŒArrayä¸€å±‚ï¼ŒMapä¸¤å±‚</span></span><br><span class="line">    uint32 ReadMore = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> WITH_METADATA</span></span><br><span class="line">    <span class="keyword">const</span> FMetaDataPairParam* MetaDataArray = <span class="literal">nullptr</span>;</span><br><span class="line">    int32                     NumMetaData   = <span class="number">0</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    FProperty* NewProp = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (PropBase-&gt;Flags &amp; PropertyTypeMask) </span><br><span class="line">    &#123;</span><br><span class="line">            <span class="keyword">case</span> EPropertyGenFlags::Int:</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// ç”¨ &quot;PropBase&quot; æ„é€  &quot;FIntProperty&quot;ï¼Œå¹¶å°†æ„é€ å¥½çš„ &quot;NewProp&quot; æ·»åŠ åˆ° &quot;ChildProperties&quot; é“¾è¡¨çš„å¤´èŠ‚ç‚¹ä¸­</span></span><br><span class="line">				<span class="keyword">const</span> FIntPropertyParams* Prop = (<span class="keyword">const</span> FIntPropertyParams*)PropBase;</span><br><span class="line">				NewProp = <span class="keyword">new</span> <span class="built_in">FIntProperty</span>(Outer, <span class="built_in">UTF8_TO_TCHAR</span>(Prop-&gt;NameUTF8), Prop-&gt;ObjectFlags, Prop-&gt;Offset, Prop-&gt;PropertyFlags);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> WITH_METADATA</span></span><br><span class="line">                <span class="comment">// è·å–å…ƒæ•°æ®</span></span><br><span class="line">				MetaDataArray = Prop-&gt;MetaDataArray;</span><br><span class="line">				NumMetaData   = Prop-&gt;NumMetaData;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">			&#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">case</span> EPropertyGenFlags::SoftObject:</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// ç”¨ &quot;PropBase&quot; æ„é€  &quot;FSoftObjectProperty&quot;ï¼Œå¹¶å°†æ„é€ å¥½çš„ &quot;NewProp&quot; æ·»åŠ åˆ° &quot;ChildProperties&quot; é“¾è¡¨çš„å¤´èŠ‚ç‚¹ä¸­</span></span><br><span class="line">				<span class="keyword">const</span> FSoftObjectPropertyParams* Prop = (<span class="keyword">const</span> FSoftObjectPropertyParams*)PropBase;</span><br><span class="line">				NewProp = <span class="keyword">new</span> <span class="built_in">FSoftObjectProperty</span>(Outer, <span class="built_in">UTF8_TO_TCHAR</span>(Prop-&gt;NameUTF8), Prop-&gt;ObjectFlags, Prop-&gt;Offset, Prop-&gt;PropertyFlags, Prop-&gt;ClassFunc ? Prop-&gt;<span class="built_in">ClassFunc</span>() : <span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> WITH_METADATA</span></span><br><span class="line">                <span class="comment">// è·å–å…ƒæ•°æ®</span></span><br><span class="line">				MetaDataArray = Prop-&gt;MetaDataArray;</span><br><span class="line">				NumMetaData   = Prop-&gt;NumMetaData;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">			&#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">case</span> EPropertyGenFlags::Array:</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// ç”¨ &quot;PropBase&quot; æ„é€  &quot;FArrayProperty&quot;ï¼Œå¦‚æœæ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ</span></span><br><span class="line">                <span class="comment">// åˆ™å¹¶å°†æ„é€ å¥½çš„ &quot;NewProp&quot; æ·»åŠ åˆ° &quot;ChildProperties&quot; é“¾è¡¨çš„å¤´èŠ‚ç‚¹ä¸­ï¼›</span></span><br><span class="line">                <span class="comment">// å¦‚æœä¸æ˜¯ï¼Œåˆ™æ·»åŠ åˆ° &quot;Inner&quot; é‡Œé¢ï¼Œ&quot;Inner&quot; æ˜¯ &quot;FArrayProperty&quot; ç­‰ç‰¹æœ‰çš„å±æ€§ï¼Œ</span></span><br><span class="line">                <span class="comment">// ç”¨äºè®°å½•å½“å‰ç´¢å¼•çš„å€¼ï¼Œä½†åœ¨è¿™é‡Œä½œä¸º &quot;Outer&quot; æ˜¯ä¼šè®°å½•ä¸‹ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œ</span></span><br><span class="line">				<span class="keyword">const</span> FArrayPropertyParams* Prop = (<span class="keyword">const</span> FArrayPropertyParams*)PropBase;</span><br><span class="line">				NewProp = <span class="keyword">new</span> <span class="built_in">FArrayProperty</span>(Outer, <span class="built_in">UTF8_TO_TCHAR</span>(Prop-&gt;NameUTF8), Prop-&gt;ObjectFlags, Prop-&gt;Offset, Prop-&gt;PropertyFlags, Prop-&gt;ArrayFlags);</span><br><span class="line"></span><br><span class="line">				<span class="comment">// è®©åé¢çš„è¿­ä»£å¯ä»¥å¤„ç†æ•°ç»„å†…éƒ¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">				ReadMore = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> WITH_METADATA</span></span><br><span class="line">                <span class="comment">// è·å–å…ƒæ•°æ®</span></span><br><span class="line">				MetaDataArray = Prop-&gt;MetaDataArray;</span><br><span class="line">				NumMetaData   = Prop-&gt;NumMetaData;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">			&#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ...... å„ç§ &quot;FProperty&quot; ç±»å‹ï¼Œä¸ä¸€ä¸€åˆ—ä¸¾ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> WITH_METADATA</span></span><br><span class="line">    <span class="comment">// å¤„ç†å…ƒæ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (NumMetaData)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// éå†å¤„ç†æ¯ä¸€ä¸ªå…ƒæ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> FMetaDataPairParam* MetaDataData = MetaDataArray, *MetaDataEnd = MetaDataData + NumMetaData; MetaDataData != MetaDataEnd; ++MetaDataData)</span><br><span class="line">        &#123;</span><br><span class="line">            NewProp-&gt;<span class="built_in">SetMetaData</span>(<span class="built_in">UTF8_TO_TCHAR</span>(MetaDataData-&gt;NameUTF8), <span class="built_in">UTF8_TO_TCHAR</span>(MetaDataData-&gt;ValueUTF8));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† &quot;ArrayDim&quot; å’Œ &quot;RepNotifyFunc&quot;</span></span><br><span class="line">    NewProp-&gt;ArrayDim = PropBase-&gt;ArrayDim;</span><br><span class="line">    <span class="keyword">if</span> (PropBase-&gt;RepNotifyFuncUTF8)</span><br><span class="line">    &#123;</span><br><span class="line">        NewProp-&gt;RepNotifyFunc = <span class="built_in">FName</span>(<span class="built_in">UTF8_TO_TCHAR</span>(PropBase-&gt;RepNotifyFuncUTF8));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    --NumProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿­ä»£å¤„ç† Arrayï¼ŒSetï¼ŒMap</span></span><br><span class="line">    <span class="keyword">for</span> (; ReadMore; --ReadMore)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œæ˜¯ä»¥ &quot;NewProp&quot; ä½œä¸º &quot;Outer&quot; çš„ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªArrayå…ƒç´ å°†æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ çš„ &quot;Outer&quot;</span></span><br><span class="line">        <span class="built_in">ConstructFProperty</span>(NewProp, PropertyArray, NumProperties);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ &quot;PropBase&quot; æ¥æ„é€ ä¸€ä¸ª &quot;NewProp&quot;ï¼Œåˆå§‹åŒ–å…¶å±æ€§ï¼Œå¹¶å°†å…¶é“¾æ¥åˆ° &quot;UStruct::ChildProperties&quot; ä¸­ã€‚æ¥ä¸‹æ¥è§£æ &quot;StaticLink&quot; å‡½æ•°ã€‚</p><h4 id="ustructstaticlink"><a class="anchor" href="#ustructstaticlink">#</a> UStruct::StaticLink</h4><p></p><figure class="highlight c++"><figcaption><span>UStruct::StaticLink</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Class.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UStruct::StaticLink</span><span class="params">(<span class="keyword">bool</span> bRelinkExistingProperties <span class="comment">/* = false */</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	FArchive ArDummy;</span><br><span class="line">	<span class="built_in">Link</span>(ArDummy, bRelinkExistingProperties);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UStruct::Link</span><span class="params">(FArchive&amp; Ar, <span class="keyword">bool</span> bRelinkExistingProperties)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// æ˜¯å¦éœ€è¦é‡æ–°é“¾æ¥å·²å­˜åœ¨çš„å±æ€§ï¼Œä¸€èˆ¬åœ¨å±æ€§æœªå®Œå…¨åˆå§‹åŒ–å®Œçš„æ—¶å€™ä¼šä¼ å…¥true</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬ä¼ è¿›æ¥çš„æ˜¯é»˜è®¤å€¼ &quot;false&quot;ï¼Œå’±å…ˆè·³è¿‡ &quot;true&quot; çš„æƒ…å†µ</span></span><br><span class="line">	<span class="keyword">if</span> (bRelinkExistingProperties)</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// ä»£ç è¿‡é•¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹è¯·è‡ªè¡ŒæŸ¥æ‰¾æºç </span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (FField* Field = ChildProperties; (Field != <span class="literal">NULL</span>) &amp;&amp; (Field-&gt;GetOwner&lt;UObject&gt;() == <span class="keyword">this</span>); Field = Field-&gt;Next)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (FProperty* Property = CastField&lt;FProperty&gt;(Field))</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// è°ƒç”¨&quot;FProperty&quot; çš„è™šå‡½æ•° &quot;LinkInternal&quot;</span></span><br><span class="line">                <span class="comment">// &quot;LinkInternal&quot; åœ¨ä¸åŒçš„å­ç±»ä¸­ä¼šæœ‰ä¸åŒçš„å®ç°ã€‚</span></span><br><span class="line">                <span class="comment">// ä¸»è¦æ˜¯æ¥åˆå§‹åŒ– &quot;ElementSize&quot; å’Œ &quot;PropertyFlags&quot; çš„</span></span><br><span class="line">				Property-&gt;<span class="built_in">LinkWithoutChangingOffset</span>(Ar);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çœç•¥ &quot;cheak&quot; ä»£ç  ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†æ¯ç§å±æ€§é“¾ï¼Œä»¥ä¼˜åŒ–æ¸…é™¤æ€§èƒ½</span></span><br><span class="line">    <span class="comment">// å¯ä»¥é€šè¿‡æ·»åŠ  &quot;FProperty::NeedsDynamicRefCleanup&quot; å‡½æ•°æ¥è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</span></span><br><span class="line">	FProperty** PropertyLinkPtr = &amp;PropertyLink;</span><br><span class="line">	FProperty** DestructorLinkPtr = &amp;DestructorLink;</span><br><span class="line">	FProperty** RefLinkPtr = (FProperty**)&amp;RefLink;</span><br><span class="line">	FProperty** PostConstructLinkPtr = &amp;PostConstructLink;</span><br><span class="line"></span><br><span class="line">	TArray&lt;<span class="keyword">const</span> FStructProperty*&gt; EncounteredStructProps;</span><br><span class="line">    <span class="comment">// éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&quot;TFieldIterator&quot; çš„æ„é€ é»˜è®¤ä¹Ÿä¼šè¿­ä»£ &quot;this&quot; çš„æ¥å£å’ŒåŸºç±»çš„ &quot;ChildProperties&quot;</span></span><br><span class="line">	<span class="keyword">for</span> (TFieldIterator&lt;FProperty&gt; <span class="built_in">It</span>(<span class="keyword">this</span>); It; ++It)</span><br><span class="line">	&#123;</span><br><span class="line">		FProperty* Property = *It;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœè¯¥å±æ€§æœ‰å¼•ç”¨ &quot;UObject&quot; æˆ–è€…æœ‰ &quot;UObject&quot; çš„å¼±å¼•ç”¨ï¼Œåˆ™å°†å…¶é“¾æ¥åˆ° &quot;RefLinkPtr&quot; ä¸­</span></span><br><span class="line">		<span class="keyword">if</span> (Property-&gt;<span class="built_in">ContainsObjectReference</span>(EncounteredStructProps) || Property-&gt;<span class="built_in">ContainsWeakObjectReference</span>())</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">// å°† &quot;Property&quot; æ·»åŠ åˆ° &quot;RefLink&quot; ä¸­ï¼Œå¹¶å°† &quot;RefLinkPtr&quot; å¾€åç§»ï¼Œä»¥ä¸‹å±æ€§é“¾ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸åšèµ˜è¿°</span></span><br><span class="line">			*RefLinkPtr = Property;</span><br><span class="line">			RefLinkPtr = &amp;(*RefLinkPtr)-&gt;NextRef;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &quot;OwnerClass&quot; æ˜¯å¦ä¸º æœ¬åœ°ç±»æˆ–åŸç”ŸCppç±»</span></span><br><span class="line">		<span class="keyword">const</span> UClass* OwnerClass = Property-&gt;<span class="built_in">GetOwnerClass</span>();</span><br><span class="line">		<span class="keyword">bool</span> bOwnedByNativeClass = OwnerClass &amp;&amp; OwnerClass-&gt;<span class="built_in">HasAnyClassFlags</span>(CLASS_Native | CLASS_Intrinsic);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœè¯¥å±æ€§ä¸æ˜¯ç®€å•æ•°æ®ç±»å‹æˆ–è€…æ²¡æœ‰ææ„å‡½æ•°ï¼Œåˆ™å°†å…¶é“¾æ¥åˆ° &quot;DestructorLink&quot; ä¸­ï¼Œå› ä¸ºéœ€è¦è°ƒç”¨å…¶ææ„å‡½æ•°æ¥é”€æ¯</span></span><br><span class="line">		<span class="keyword">if</span> (!Property-&gt;<span class="built_in">HasAnyPropertyFlags</span>(CPF_IsPlainOldData | CPF_NoDestructor) &amp;&amp;</span><br><span class="line">			!bOwnedByNativeClass) <span class="comment">// these would be covered by the native destructor</span></span><br><span class="line">		&#123;	</span><br><span class="line">			*DestructorLinkPtr = Property;</span><br><span class="line">			DestructorLinkPtr = &amp;(*DestructorLinkPtr)-&gt;DestructorLinkNext;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å°†éœ€è¦åœ¨CDOçš„åæœŸæ„é€ ä¸­åˆå§‹åŒ–å…¶å€¼çš„å±æ€§æ·»åŠ åˆ° &quot;PostConstructLink&quot; ä¸­ï¼Œæ³¨æ„è¿™åŒ…æ‹¬æ‰€æœ‰çš„éæœ¬åœ°ç±»æ‹¥æœ‰çš„å±æ€§</span></span><br><span class="line">		<span class="keyword">if</span> (OwnerClass &amp;&amp; (!bOwnedByNativeClass || (Property-&gt;<span class="built_in">HasAnyPropertyFlags</span>(CPF_Config) &amp;&amp; !OwnerClass-&gt;<span class="built_in">HasAnyClassFlags</span>(CLASS_PerObjectConfig))))</span><br><span class="line">		&#123;</span><br><span class="line">			*PostConstructLinkPtr = Property;</span><br><span class="line">			PostConstructLinkPtr = &amp;(*PostConstructLinkPtr)-&gt;PostConstructLinkNext;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ— è®ºä»€ä¹ˆå±æ€§ï¼Œéƒ½è¦æ·»åŠ åˆ° &quot;PropertyLink&quot; ä¸­ã€‚</span></span><br><span class="line">		*PropertyLinkPtr = Property;</span><br><span class="line">		PropertyLinkPtr = &amp;(*PropertyLinkPtr)-&gt;PropertyLinkNext;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	*PropertyLinkPtr = <span class="literal">nullptr</span>;</span><br><span class="line">	*DestructorLinkPtr = <span class="literal">nullptr</span>;</span><br><span class="line">	*RefLinkPtr = <span class="literal">nullptr</span>;</span><br><span class="line">	*PostConstructLinkPtr = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// æ”¶é›†ä»FPropertyåˆ°UObjectçš„æ‰€æœ‰å¼•ç”¨ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨GCå…¬å¼€çš„æ•°ç»„ä¸­ï¼Œä»¥ä¾¿å¿«é€Ÿè®¿é—®</span></span><br><span class="line">		<span class="built_in">CollectPropertyReferencedObjects</span>(ScriptAndPropertyObjectReferences);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ•´ä¸ªæ„é€ è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå†æ€»ç»“ä¸€ä¸‹ï¼š</p><ol><li><strong>åœ¨ &quot;UClass&quot; çš„æ³¨å†Œåå¤„ç†é˜¶æ®µï¼Œæˆ‘ä»¬ä¼šè¿›è¡Œå±æ€§é“¾çš„åˆå§‹åŒ–</strong></li><li><strong>å±æ€§é“¾åˆå§‹åŒ–çš„ä¾æ®æ˜¯ &quot;UHT&quot; ç”Ÿæˆçš„ &quot;FClassParams.PropertyArray&quot;</strong></li><li><strong>åˆå§‹åŒ–å…ˆè¿›è¡Œ &quot;FProperty&quot; çš„æ„é€ ï¼Œå¹¶å°†æ„é€ å¥½çš„ &quot;FProperty&quot; æ·»åŠ åˆ° &quot;UStruct&quot; çš„ &quot;ChildProperties&quot; é“¾è¡¨ä¸­</strong></li><li><strong>æœ€åç”¨ &quot;ChildProperties&quot; é“¾è¡¨å°†æ‰€æœ‰çš„ å±æ€§é“¾èŠ‚ç‚¹ å’Œ &quot;UStruct&quot; ä¸­çš„å¤´èŠ‚ç‚¹ åˆå§‹åŒ–å¥½</strong></li></ol><p>åˆ°è¿™é‡Œï¼Œå’± &quot;FProperty&quot; å’Œ å±æ€§é“¾ çš„æ„é€ å·²ç»å®Œæˆã€‚æ¥ä¸‹æ¥æŒ‘ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„ &quot;FProperty&quot; çš„ &quot;API&quot; æ¥åˆ†æ ğŸ˜ƒ</p><hr><h3 id="fpropertyå¸¸ç”¨api"><a class="anchor" href="#fpropertyå¸¸ç”¨api">#</a> FProperty å¸¸ç”¨ API</h3><p>é¦–å½“å…¶å†²çš„å½“ç„¶æ˜¯åºåˆ—åŒ–ç”¨çš„ &quot;Serialize&quot;ï¼Œç„¶åæ˜¯ &quot;PostDuplicate&quot;ï¼Œ&quot;ImportSingleProperty&quot;..... å…ˆåˆ—ä¸ªè¡¨ï¼ŒæŠŠæˆ‘ä»¬è¦åˆ†æçš„å‡½æ•°åå’Œä½œç”¨æ€»ç»“ä¸€ä¸‹ï¼Œç„¶åå†åˆ†æå¯¹åº” API çš„å®ç°ä»£ç </p><table><thead><tr><th>API</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Serialize</td><td>åºåˆ—åŒ– &quot;FProperty&quot;</td></tr><tr><td>PostDuplicate</td><td>å°†ä¼ å…¥çš„ &quot;FProperty&quot; çš„å±æ€§å¤åˆ¶ç»™å½“å‰ &quot;FProperty&quot;</td></tr><tr><td>ImportSingleProperty</td><td>è§£æå¯¼å…¥çš„ &quot;FString&quot; å‚æ•°ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™å½“å‰ &quot;FProperty&quot;</td></tr><tr><td>ConvertFromType</td><td>å°†æŒ‡å®šç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå½“å‰ &quot;FProperty&quot; ç±»å‹çš„æ•°æ®ï¼Œå¹¶èµ‹å€¼</td></tr><tr><td>Identical</td><td>åˆ¤æ–­ä¸¤ä¸ªä¼ è¿›æ¥çš„ &quot;void*&quot; å‹ å±æ€§æ•°æ®æ˜¯å¦ç›¸ç­‰ï¼ˆå·²è®¡ç®—åç§»</td></tr><tr><td>Identical_InContainer</td><td>åˆ¤æ–­ä¸¤ä¸ªä¼ è¿›æ¥çš„ &quot;void*&quot; å‹ å±æ€§å®¹å™¨æ˜¯å¦ç›¸ç­‰ï¼ˆæœªè®¡ç®—åç§»</td></tr><tr><td>SerializeBinProperty</td><td>åºåˆ—åŒ–æ•°ç»„ç­‰ç»“æ„ä¸­çš„æ‰€æœ‰å…ƒç´ çš„å±æ€§å€¼ï¼Œç®€å•ç±»å‹ä¹Ÿå¯ä»¥</td></tr><tr><td>SerializeNonMarchingBinProperty</td><td>åŒä¸Šï¼Œä½†åªåºåˆ—åŒ–å’Œé»˜è®¤å€¼ä¸åŒçš„å…ƒç´ </td></tr><tr><td>SerializeItem</td><td>è™šå‡½æ•°ï¼Œæ¯ä¸ªå­ç±»éƒ½éœ€è¦å®ç°ï¼Œç”¨äºåºåˆ—åŒ– &quot;FProperty&quot; çš„çœŸå®å€¼</td></tr><tr><td>ExportTextItem</td><td>è§£æå¹¶å°†è¯¥å±æ€§çš„å€¼å¯¼å‡ºä¸º &quot;FString&quot; ç±»å‹ï¼Œå¹¶è¿”å›</td></tr><tr><td>ImportText</td><td>è§£æå¯¼å…¥çš„ &quot;FString&quot; ç±»å‹æ•°æ®ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™å½“å‰å±æ€§</td></tr><tr><td>ContainerPtrToValuePtr (å¤šé‡è½½)</td><td>è¿”å›è¯¥å±æ€§åœ¨æŸå®¹å™¨ (å¦‚: UObject*) ä¸­çš„æŒ‡é’ˆ</td></tr><tr><td>IsInContainer</td><td>è¯¥å±æ€§æ˜¯å¦åœ¨æŸå®¹å™¨ä¸­</td></tr><tr><td>CopySingleValue</td><td>å°†ä¸€å—å†…å­˜çš„å€¼æ‹·è´åˆ°å¦ä¸€å—å†…å­˜ï¼Œæµ…æ‹·è´ï¼Œæ•°ç»„ç­‰ç±»å‹ä¸­è°ƒç”¨åªæ‹·è´ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>CopyCompleteValue</td><td>å°†ä¸€å—å†…å­˜çš„å€¼æ‹·è´åˆ°å¦ä¸€å—å†…å­˜ï¼Œæµ…æ‹·è´ï¼Œæ•°ç»„ç­‰ç±»å‹åªæ‹·è´å…¨éƒ¨å…ƒç´ </td></tr><tr><td>ClearValue</td><td>æ¸…é™¤æŒ‡å®šå†…å­˜åœ°å€ï¼Œæœ‰æ„é€ å‡½æ•°çš„å¯¹è±¡ä¼šè°ƒç”¨å…¶æ„é€ å‡½æ•°é‡æ–°åˆå§‹åŒ–è¯¥å†…å­˜</td></tr><tr><td>DestroyValue</td><td>è°ƒç”¨é POD ç±»å‹å…¶æœ‰ææ„å‡½æ•°çš„å¯¹è±¡çš„ææ„å‡½æ•°ï¼ˆPOD ç±»å‹ä¼šåœ¨ Clear ä¸­è°ƒç”¨ Memzero æ¸…é™¤å†…å­˜æ•°æ®</td></tr><tr><td>InitializeValue</td><td>åˆå§‹åŒ–ä¸€å—å†…å­˜åœ°å€ï¼Œæ— æ„é€ å‡½æ•°çš„å±æ€§ç”¨ Memzero ç”³è¯·å†…å­˜ï¼Œå¦åˆ™ä¼šè°ƒç”¨è¯¥å±æ€§çš„æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸€ä¸ª Cpp å¯¹è±¡</td></tr><tr><td>GetPropertyFlags (Set / Clear)</td><td>è·å–ï¼Œè®¾ç½®ï¼Œæ¸…ç©ºè¯¥å±æ€§çš„ &quot;PropertyFlags&quot;</td></tr><tr><td>GetOwner (FField ä¸­çš„)</td><td>è·å–æ‰€å±çš„ UObject* æˆ– FProperty* (å¦‚æœæ˜¯æ•°ç»„å…ƒç´ çš„è¯)</td></tr></tbody></table><h3 id="å¸¸ç”¨apiè§£æ"><a class="anchor" href="#å¸¸ç”¨apiè§£æ">#</a> å¸¸ç”¨ API è§£æ</h3><h4 id="serialize"><a class="anchor" href="#serialize">#</a> Serialize</h4><p></p><figure class="highlight c++"><figcaption><span>Serialize</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Property.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FProperty::Serialize</span><span class="params">( FArchive&amp; Ar )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// ç¡®ä¿ä¸è¦å°†ä¸åº”åºåˆ—åŒ–çš„å±æ€§ä¿å­˜åˆ°åŒ…ä¸­</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> WITH_EDITORONLY_DATA</span></span><br><span class="line">	<span class="built_in">check</span>(!Ar.<span class="built_in">IsFilterEditorOnly</span>() || !<span class="built_in">IsEditorOnlyProperty</span>());</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// WITH_EDITORONLY_DATA</span></span></span><br><span class="line"></span><br><span class="line">	Super::<span class="built_in">Serialize</span>(Ar);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åºåˆ—åŒ–ä¸¤ä¸ªå±æ€§</span></span><br><span class="line">	Ar &lt;&lt; ArrayDim;</span><br><span class="line">	Ar &lt;&lt; ElementSize;</span><br><span class="line"></span><br><span class="line">	EPropertyFlags SaveFlags = PropertyFlags &amp; ~CPF_ComputedFlags;</span><br><span class="line">	<span class="comment">// å­˜æ¡£åŸºç¡€ä¿¡æ¯</span></span><br><span class="line">	Ar &lt;&lt; (uint64&amp;)SaveFlags;</span><br><span class="line">	<span class="keyword">if</span> (Ar.<span class="built_in">IsLoading</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		PropertyFlags = (SaveFlags &amp; ~CPF_ComputedFlags) | (PropertyFlags &amp; CPF_ComputedFlags);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (FPlatformProperties::<span class="built_in">HasEditorOnlyData</span>() == <span class="literal">false</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// ç¡®ä¿ä¸è¦å°†ä¸åº”åºåˆ—åŒ–çš„å±æ€§ä¿å­˜åˆ°åŒ…ä¸­</span></span><br><span class="line">		<span class="built_in">check</span>( !<span class="built_in">IsEditorOnlyProperty</span>() );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Ar &lt;&lt; RepIndex;</span><br><span class="line">	Ar &lt;&lt; RepNotifyFunc;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (Ar.<span class="built_in">IsLoading</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		Offset_Internal = <span class="number">0</span>;</span><br><span class="line">		DestructorLinkNext = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åºåˆ—åŒ–è“å›¾å¤åˆ¶çŠ¶æ€</span></span><br><span class="line">	Ar &lt;&lt; BlueprintReplicationCondition;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå°±æ˜¯åºåˆ—åŒ–äº† &quot;FProperty&quot; çš„ä¸€äº›å±æ€§ï¼Œè¿™äº›å±æ€§æˆ‘ä»¬ä¹Ÿåœ¨å‰é¢ä»‹ç»è¿‡äº†ã€‚ä¸æ‡‚åºåˆ—åŒ–çš„æœ‹å‹è¯·å»çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ã€‚</p><h4 id="postduplicate"><a class="anchor" href="#postduplicate">#</a> PostDuplicate</h4><p></p><figure class="highlight c++"><figcaption><span>PostDuplicate</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Property.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FProperty::PostDuplicate</span><span class="params">(<span class="keyword">const</span> FField&amp; InField)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">const</span> FProperty&amp; Source = <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> FProperty&amp;&gt;(InField);</span><br><span class="line">	ArrayDim = Source.ArrayDim;</span><br><span class="line">	ElementSize = Source.ElementSize;</span><br><span class="line">	PropertyFlags = Source.PropertyFlags;</span><br><span class="line">	RepIndex = Source.RepIndex;</span><br><span class="line">	Offset_Internal = Source.Offset_Internal;</span><br><span class="line">	RepNotifyFunc = Source.RepNotifyFunc;</span><br><span class="line">	BlueprintReplicationCondition = Source.BlueprintReplicationCondition;</span><br><span class="line"></span><br><span class="line">	Super::<span class="built_in">PostDuplicate</span>(InField);	<span class="comment">// ç©ºå‡½æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ²¡é”™ï¼Œå°±æ˜¯ç®€å•åœ°æŠŠä¼ è¿›æ¥çš„ &quot;FProperty&quot; ç»™å¤åˆ¶äº†ä¸€é</p><h4 id="importsingleproperty"><a class="anchor" href="#importsingleproperty">#</a> ImportSingleProperty</h4><p>ä»£ç æœ‰ç‚¹é•¿ï¼Œä¸»è¦å°±æ˜¯å¯¹ä¼ è¿›æ¥çš„å­—ç¬¦ä¸²åšè¯­æ³•åˆ†æ (ç¼–è¯‘åŸç† yyds)ï¼Œåˆ†åˆ«å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ã€‚ä¸‹é¢ä¸»è¦æ˜¯å¯¹è¯­æ³•åˆ†æçš„ä»£ç åšè§£æï¼Œä¸æ„Ÿå…´è¶£çš„è¯»è€…è¯·è‡ªè¡Œè·³è¿‡ï¼š</p><p></p><figure class="highlight c++"><figcaption><span>ImportSingleProperty</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">const</span> TCHAR* <span class="title">FProperty::ImportSingleProperty</span><span class="params">( <span class="keyword">const</span> TCHAR* Str, <span class="keyword">void</span>* DestData, UStruct* ObjectStruct, UObject* SubobjectOuter, int32 PortFlags,</span></span></span><br><span class="line"><span class="params"><span class="function">											FOutputDevice* Warn, TArray&lt;FDefinedProperty&gt;&amp; DefinedProperties )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">check</span>(ObjectStruct);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">constexpr</span> FAsciiSet <span class="title">Whitespaces</span><span class="params">(<span class="string">&quot; \t&quot;</span>)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">constexpr</span> FAsciiSet <span class="title">Delimiters</span><span class="params">(<span class="string">&quot;=([.&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å»æ‰å‰é¢çš„ç©ºå­—ç¬¦(åˆ¶è¡¨ç¬¦ \t)</span></span><br><span class="line">	<span class="keyword">const</span> TCHAR* Start = FAsciiSet::<span class="built_in">Skip</span>(Str, Whitespaces);</span><br><span class="line">	<span class="comment">// æ‰¾ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦ï¼Œåˆ†å‰²ç¬¦åœ¨å‰é¢çš„ &quot;Delimiters&quot; ä¸­ï¼Œå³ &quot;=([.&quot; </span></span><br><span class="line">	Str = FAsciiSet::<span class="built_in">FindFirstOrEnd</span>(Start, Delimiters);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(*Str)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨ç¬¬ä¸€ä¸ªåˆ†å‰²ç¬¦çš„é•¿åº¦å‰ªæ‰ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦çš„é•¿åº¦</span></span><br><span class="line">        int32 Len = Str - Start;</span><br><span class="line">        <span class="comment">// æŠŠåˆ†éš”ç¬¦å‰é¢çš„ç©ºå­—ç¬¦ä¹Ÿå»æ‰</span></span><br><span class="line">		<span class="keyword">while</span> (Len &gt; <span class="number">0</span> &amp;&amp; Whitespaces.<span class="built_in">Contains</span>(Start[Len - <span class="number">1</span>]))</span><br><span class="line">		&#123;</span><br><span class="line">			--Len;</span><br><span class="line">		&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é€šè¿‡åˆšåˆšçš„ç­›é€‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° &quot;PropertyName&quot;ï¼Œç”¨æ¥åœ¨æˆ‘ä»¬ä¼ å…¥çš„ &quot;ObjectStruct&quot; ä¸­å¯»æ‰¾å¯¹åº”çš„ &quot;FProperty&quot; </span></span><br><span class="line">        <span class="function"><span class="keyword">const</span> FName <span class="title">PropertyName</span><span class="params">(Len, Start)</span></span>;</span><br><span class="line">        FProperty* Property = FindFProperty&lt;FProperty&gt;(ObjectStruct, PropertyName);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”åç§°çš„å±æ€§ï¼Œè·å–é‡å®šå‘çš„å¯¹è±¡åç§°ï¼Œå­˜åœ¨åˆ™ç”¨é‡å®šå‘åç§°æ¥æ‰¾ &quot;FProperty&quot;</span></span><br><span class="line">        <span class="keyword">if</span> (Property == <span class="literal">nullptr</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			FName NewPropertyName = <span class="built_in">FindRedirectedPropertyName</span>(ObjectStruct, PropertyName);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (NewPropertyName != NAME_None)</span><br><span class="line">			&#123;</span><br><span class="line">				Property = FindFProperty&lt;FProperty&gt;(ObjectStruct, NewPropertyName);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (!Property)</span><br><span class="line">			&#123;</span><br><span class="line">				Property = ObjectStruct-&gt;<span class="built_in">CustomFindProperty</span>(PropertyName);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æœªæ‰¾åˆ°è¯¥å±æ€§</span></span><br><span class="line">        <span class="keyword">if</span> (Property == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">UE_SUPPRESS</span>(LogExec, Verbose, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Unknown property in %s: %s &quot;</span>), *ObjectStruct-&gt;<span class="built_in">GetName</span>(), Start));</span><br><span class="line">			<span class="keyword">return</span> Str;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯¥å±æ€§ä¸æ”¯æŒæ–‡æœ¬æ ¼å¼çš„å¯¼å…¥</span></span><br><span class="line">		<span class="keyword">if</span> (!Property-&gt;<span class="built_in">ShouldPort</span>(PortFlags))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Cannot perform text import on property &#x27;%s&#x27; here: %s&quot;</span>), *Property-&gt;<span class="built_in">GetName</span>(), Start));</span><br><span class="line">			<span class="keyword">return</span> Str;</span><br><span class="line">		&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¦‚æœå­˜åœ¨æ•°ç»„æ“ä½œç¬¦ï¼Œåˆ™è¿›è¡Œè§£æ</span></span><br><span class="line">		<span class="class"><span class="keyword">enum</span> <span class="title">EArrayOp</span></span></span><br><span class="line"><span class="class">		&#123;</span></span><br><span class="line">			ADO_None,				<span class="comment">// ç©ºæ“ä½œç¬¦</span></span><br><span class="line">			ADO_Add,				<span class="comment">// æ·»åŠ æ“ä½œç¬¦</span></span><br><span class="line">			ADO_Remove,				<span class="comment">// ç§»é™¤æ“ä½œç¬¦</span></span><br><span class="line">			ADO_RemoveIndex,		<span class="comment">// ç§»é™¤ç´¢å¼•æ“ä½œç¬¦</span></span><br><span class="line">			ADO_Empty,				<span class="comment">// æ¸…ç©ºæ“ä½œç¬¦</span></span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		EArrayOp ArrayOp = ADO_None;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯&#x27;.&#x27;ï¼Œåˆ™è¯´æ˜å½“å‰è¦å¯¼å…¥çš„æ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">		<span class="keyword">if</span>(*Str == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Str++;</span><br><span class="line">            <span class="comment">// è¯»å– &quot;Str&quot; çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è®¾ç½® &quot;ArrayOp&quot; ç”¨äºåç»­æ•°ç»„æ“ä½œ</span></span><br><span class="line">			<span class="keyword">if</span>(FParse::<span class="built_in">Command</span>(&amp;Str,<span class="built_in">TEXT</span>(<span class="string">&quot;Empty&quot;</span>)))</span><br><span class="line">			&#123;</span><br><span class="line">				ArrayOp = ADO_Empty;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(FParse::<span class="built_in">Command</span>(&amp;Str,<span class="built_in">TEXT</span>(<span class="string">&quot;Add&quot;</span>)))</span><br><span class="line">			&#123;</span><br><span class="line">				ArrayOp = ADO_Add;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(FParse::<span class="built_in">Command</span>(&amp;Str,<span class="built_in">TEXT</span>(<span class="string">&quot;Remove&quot;</span>)))</span><br><span class="line">			&#123;</span><br><span class="line">				ArrayOp = ADO_Remove;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (FParse::<span class="built_in">Command</span>(&amp;Str,<span class="built_in">TEXT</span>(<span class="string">&quot;RemoveIndex&quot;</span>)))</span><br><span class="line">			&#123;</span><br><span class="line">				ArrayOp = ADO_RemoveIndex;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å°è¯•å°† &quot;Property&quot; è½¬æ¢ä¸º &quot;ArrayProperty&quot; å’Œ &quot;MulticastDelegateProperty&quot;ï¼Œç”¨äºåé¢çš„è¯­æ³•åˆ†æ</span></span><br><span class="line">        FArrayProperty* <span class="keyword">const</span> ArrayProperty = ExactCastField&lt;FArrayProperty&gt;(Property);</span><br><span class="line">		FMulticastDelegateProperty* <span class="keyword">const</span> MulticastDelegateProperty = CastField&lt;FMulticastDelegateProperty&gt;(Property);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¦‚æœè¯¥å±æ€§æ˜¯å¤šæ’­ä»£ç†å±æ€§ï¼Œä¸”å­˜åœ¨æ•°ç»„æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span>( MulticastDelegateProperty != <span class="literal">NULL</span> &amp;&amp; ArrayOp != ADO_None )</span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">// å¤šæ’­ä»£ç†å…è®¸ Add(), Remove() å’Œ Empty() æ“ä½œ</span></span><br><span class="line">			<span class="keyword">if</span>( ArrayOp == ADO_Add || ArrayOp == ADO_Remove || ArrayOp == ADO_Empty )</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// è¯»å–ä¸‹ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦ï¼Œä¸”ä¸€å®šä¸º &#x27;(&#x27;</span></span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">				<span class="keyword">if</span>(*Str++ != <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;(&#x27; in default properties multi-cast delegate operation: %s&quot;</span>), Start));</span><br><span class="line">					<span class="keyword">return</span> Str;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å¦‚æœå½“å‰æ˜¯æ¸…ç©ºæ“ä½œï¼Œåˆ™è°ƒç”¨ &quot;ClearDelegate&quot; æ¸…ç©ºè¯¥å¤šæ’­ä»£ç†å±æ€§çš„å…¨éƒ¨ä»£ç†</span></span><br><span class="line">				<span class="keyword">if</span>( ArrayOp == ADO_Empty )</span><br><span class="line">				&#123;</span><br><span class="line">					MulticastDelegateProperty-&gt;<span class="built_in">ClearDelegate</span>(SubobjectOuter, Property-&gt;ContainerPtrToValuePtr&lt;<span class="keyword">void</span>&gt;(DestData));</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					FStringOutputDevice ImportError;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">const</span> TCHAR* Result = <span class="literal">NULL</span>;</span><br><span class="line">					<span class="keyword">if</span>( ArrayOp == ADO_Add )</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="comment">// æ·»åŠ ä¸€æ¡ç»‘å®šå‡½æ•°åˆ°è¯¥å¤šæ’­ä»£ç†å±æ€§</span></span><br><span class="line">						Result = MulticastDelegateProperty-&gt;<span class="built_in">ImportText_Add</span>(Str, Property-&gt;ContainerPtrToValuePtr&lt;<span class="keyword">void</span>&gt;(DestData), PortFlags, SubobjectOuter, &amp;ImportError);</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span>( ArrayOp == ADO_Remove )</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="comment">// ä»è¯¥å¤šæ’­ä»£ç†å±æ€§é‡Œé¢ç§»é™¤ä¸€æ¡ç»‘å®šå‡½æ•°</span></span><br><span class="line">						Result = MulticastDelegateProperty-&gt;<span class="built_in">ImportText_Remove</span>(Str, Property-&gt;ContainerPtrToValuePtr&lt;<span class="keyword">void</span>&gt;(DestData), PortFlags, SubobjectOuter, &amp;ImportError);</span><br><span class="line">					&#125;</span><br><span class="line">				</span><br><span class="line">                    <span class="comment">// çœç•¥è¾“å‡ºé”™è¯¯ä»£ç </span></span><br><span class="line">                    </span><br><span class="line">					<span class="comment">// &quot;Result&quot; ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰æ·»åŠ /ç§»é™¤æˆåŠŸï¼Œä½†æˆ‘ä»¬ä¸ä¼šæ¸…ç©ºæ²¡æœ‰æ­£ç¡®è§£æçš„ä»£ç ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æŠŠæ²¡æœ‰æˆåŠŸè§£æçš„ &quot;Result&quot; ç»™è¿”å›å»</span></span><br><span class="line">					<span class="keyword">if</span> (Result != <span class="literal">NULL</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						Str = Result;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// ä»£ç†ä¸æ”¯æŒ &quot;RemoveIndex&quot; æ“ä½œ</span></span><br><span class="line">				<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Unsupported operation on multi-cast delegate variable: %s&quot;</span>), Start));</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">			<span class="keyword">if</span> (*Str != <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">                <span class="comment">// æœªè§£æåˆ°æ­£ç¡®çš„å­—ç¬¦ &#x27;)&#x27;</span></span><br><span class="line">				<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;)&#x27; in default properties multi-cast delegate operation: %s&quot;</span>), Start));</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line">			Str++;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">// å¯¹æ•°ç»„ç»“æ„è¿›è¡Œè¯­æ³•åˆ†æï¼Œä¸ä¸Šé¢çš„å¤šæ’­å§”æ‰˜ç±»ä¼¼</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ArrayOp != ADO_None)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (ArrayProperty == <span class="literal">NULL</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Array operation performed on non-array variable: %s&quot;</span>), Start));</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="function">FScriptArrayHelper_InContainer <span class="title">ArrayHelper</span><span class="params">(ArrayProperty, DestData)</span></span>;</span><br><span class="line">			<span class="keyword">if</span> (ArrayOp == ADO_Empty)</span><br><span class="line">			&#123;</span><br><span class="line">				ArrayHelper.<span class="built_in">EmptyValues</span>();</span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">				<span class="keyword">if</span> (*Str++ != <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;(&#x27; in default properties array operation: %s&quot;</span>), Start));</span><br><span class="line">					<span class="keyword">return</span> Str;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (ArrayOp == ADO_Add || ArrayOp == ADO_Remove)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">				<span class="keyword">if</span>(*Str++ != <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;(&#x27; in default properties array operation: %s&quot;</span>), Start));</span><br><span class="line">					<span class="keyword">return</span> Str;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span>(ArrayOp == ADO_Add)</span><br><span class="line">				&#123;</span><br><span class="line">                    <span class="comment">// è·å–å½“å‰è¦åŠ å…¥çš„ç´¢å¼•</span></span><br><span class="line">					int32	Index = ArrayHelper.<span class="built_in">AddValue</span>();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// å¾€ç´¢å¼•ä¸­åŠ å…¥ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">					<span class="keyword">const</span> TCHAR* Result = ArrayProperty-&gt;Inner-&gt;<span class="built_in">ImportText</span>(Str, ArrayHelper.<span class="built_in">GetRawPtr</span>(Index), PortFlags, SubobjectOuter, Warn);</span><br><span class="line">                    <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">					<span class="keyword">if</span> ( Result == <span class="literal">NULL</span> || Result == Str )</span><br><span class="line">					&#123;</span><br><span class="line">						Warn-&gt;<span class="built_in">Logf</span>(ELogVerbosity::Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Unable to parse parameter value &#x27;%s&#x27; in defaultproperties array operation: %s&quot;</span>), Str, Start);</span><br><span class="line">						<span class="keyword">return</span> Str;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						Str = Result;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">                    <span class="comment">// remove åˆ™ç”³è¯·ä¸€å—ç©ºå†…å­˜æ¥å¯¼å…¥</span></span><br><span class="line">					int32 Size = ArrayProperty-&gt;Inner-&gt;ElementSize;</span><br><span class="line"></span><br><span class="line">					uint8* Temp = (uint8*)<span class="built_in">FMemory_Alloca</span>(Size);</span><br><span class="line">					ArrayProperty-&gt;Inner-&gt;<span class="built_in">InitializeValue</span>(Temp);</span><br><span class="line">							</span><br><span class="line">					<span class="comment">// å°† &quot;Str&quot; å¯¼å‡ºåˆ°ç©ºå†…å­˜ä¸­</span></span><br><span class="line">					<span class="keyword">const</span> TCHAR* Result = ArrayProperty-&gt;Inner-&gt;<span class="built_in">ImportText</span>(Str, Temp, PortFlags, SubobjectOuter, Warn);</span><br><span class="line">					<span class="keyword">if</span> ( Result == <span class="literal">NULL</span> || Result == Str )</span><br><span class="line">					&#123;</span><br><span class="line">                    	<span class="comment">// å¯¼å…¥å¤±è´¥ï¼Œæ¸…ç†ä¹‹å‰ç”³è¯·çš„å†…å­˜</span></span><br><span class="line">						Warn-&gt;<span class="built_in">Logf</span>(ELogVerbosity::Error, <span class="built_in">TEXT</span>(<span class="string">&quot;Unable to parse parameter value &#x27;%s&#x27; in defaultproperties array operation: %s&quot;</span>), Str, Start);</span><br><span class="line">						ArrayProperty-&gt;Inner-&gt;<span class="built_in">DestroyValue</span>(Temp);</span><br><span class="line">						<span class="keyword">return</span> Str;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						<span class="comment">// éå†æ•´ä¸ªæ•°ç»„æ¥æ¸…é™¤ç›¸åŒå€¼çš„å…ƒç´ </span></span><br><span class="line">						<span class="keyword">bool</span> bFound = <span class="literal">false</span>;</span><br><span class="line">						<span class="keyword">for</span>(uint32 Index = <span class="number">0</span>;Index &lt; (uint32)ArrayHelper.<span class="built_in">Num</span>();Index++)</span><br><span class="line">						&#123;</span><br><span class="line">							<span class="keyword">const</span> <span class="keyword">void</span>* ElementDestData = ArrayHelper.<span class="built_in">GetRawPtr</span>(Index);</span><br><span class="line">							<span class="keyword">if</span>(ArrayProperty-&gt;Inner-&gt;<span class="built_in">Identical</span>(Temp,ElementDestData))</span><br><span class="line">							&#123;</span><br><span class="line">								ArrayHelper.<span class="built_in">RemoveValues</span>(Index--);</span><br><span class="line">								bFound = <span class="literal">true</span>;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">                        <span class="comment">// æœªæ‰¾åˆ°ç›¸åŒå€¼</span></span><br><span class="line">						<span class="keyword">if</span> (!bFound)</span><br><span class="line">						&#123;</span><br><span class="line">							Warn-&gt;<span class="built_in">Logf</span>(ELogVerbosity::Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;%s.Remove(): Value not found in array&quot;</span>), *ArrayProperty-&gt;<span class="built_in">GetName</span>());</span><br><span class="line">						&#125;</span><br><span class="line">                        <span class="comment">// æ¸…ç†ä¹‹å‰ç”³è¯·çš„å†…å­˜</span></span><br><span class="line">						ArrayProperty-&gt;Inner-&gt;<span class="built_in">DestroyValue</span>(Temp);</span><br><span class="line">						Str = Result;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">            <span class="comment">// ç§»é™¤æŒ‡å®š Index çš„å…ƒç´ </span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (ArrayOp == ADO_RemoveIndex) <span class="comment">//-V547</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">				<span class="keyword">if</span>(*Str++ != <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;(&#x27; in default properties array operation:: %s&quot;</span>), Start ));</span><br><span class="line">					<span class="keyword">return</span> Str;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line"></span><br><span class="line">				FString strIdx;</span><br><span class="line">				<span class="keyword">while</span> (*Str != <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">                    <span class="comment">// è¿™é‡Œæ˜¯çš„ 0 æ˜¯ Asciiç ï¼ä¸æ˜¯ &#x27;0&#x27;</span></span><br><span class="line">					<span class="keyword">if</span> (*Str == <span class="number">0</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;)&#x27; in default properties array operation: %s&quot;</span>), Start));</span><br><span class="line">						<span class="keyword">return</span> Str;</span><br><span class="line">					&#125;</span><br><span class="line">					strIdx += *Str;</span><br><span class="line">					Str++;</span><br><span class="line">				&#125;</span><br><span class="line">                <span class="comment">// æŠŠåˆšåˆšè·å–åˆ°çš„ String å‹çš„æ•°å­—è½¬æˆ in32 å‹</span></span><br><span class="line">				int32 removeIdx = FCString::<span class="built_in">Atoi</span>(*strIdx);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ç§»é™¤è¯¥ç´¢å¼•çš„å…ƒç´ </span></span><br><span class="line">				ArrayHelper.<span class="built_in">RemoveValues</span>(removeIdx);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">			<span class="keyword">if</span> (*Str != <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">UE_SUPPRESS</span>(LogExec, Warning, Warn-&gt;<span class="built_in">Logf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;)&#x27; in default properties array operation: %s&quot;</span>), Start));</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line">			Str++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">            <span class="comment">// å°è¯•è·å–æ•°ç»„ç´¢å¼•ï¼Œè¿™é‡Œä¼šå¤„ç† &#x27;(&#x27; å’Œ &#x27;[&#x27; åˆ†å‰²ç¬¦ï¼Œå¹¶è¿”å›ä¸€ä¸ªIndexå’Œå¤„ç†å®Œ &#x27;]&#x27; åçš„ &quot;Str&quot;</span></span><br><span class="line">			int32 Index = <span class="built_in">ReadArrayIndex</span>(ObjectStruct, Str, Warn);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// æ£€æŸ¥æ•°ç»„æ˜¯å¦è¶…å‡ºèŒƒå›´</span></span><br><span class="line">			<span class="keyword">if</span> (ArrayProperty == <span class="literal">NULL</span> &amp;&amp; Index &gt;= Property-&gt;ArrayDim)</span><br><span class="line">			&#123;</span><br><span class="line">				Warn-&gt;<span class="built_in">Logf</span>(ELogVerbosity::Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Out of bound array default property (%i/%i): %s&quot;</span>), Index, Property-&gt;ArrayDim, Start);</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// æ£€æŸ¥è¿™ä¸ªå±æ€§æ˜¯å¦å·²ç»è¢«å¯¼å…¥</span></span><br><span class="line">			FDefinedProperty D;</span><br><span class="line">			D.Property = Property;</span><br><span class="line">			D.Index = Index;</span><br><span class="line">			<span class="keyword">if</span> (DefinedProperties.<span class="built_in">Find</span>(D) != INDEX_NONE)</span><br><span class="line">			&#123;</span><br><span class="line">				Warn-&gt;<span class="built_in">Logf</span>(ELogVerbosity::Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;redundant data: %s&quot;</span>), Start);</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line">			DefinedProperties.<span class="built_in">Add</span>(D);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// æ¸…é™¤ &quot;=&quot; å‰çš„ç©ºå­—ç¬¦</span></span><br><span class="line">			<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line">			<span class="keyword">if</span> (*Str++ != <span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				Warn-&gt;<span class="built_in">Logf</span>(ELogVerbosity::Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Missing &#x27;=&#x27; in default properties assignment: %s&quot;</span>), Start );</span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// æ¸…é™¤ &quot;=&quot; åçš„ç©ºå­—ç¬¦</span></span><br><span class="line">			<span class="built_in">SkipWhitespace</span>(Str);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (!<span class="built_in">IsPropertyValueSpecified</span>(Str) &amp;&amp; ArrayProperty == <span class="literal">nullptr</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¼å…¥ç±»çš„é»˜è®¤å±æ€§ï¼ˆå³ï¼Œæˆ‘ä»¬æ­£åœ¨ç¼–è¾‘å™¨ä¸­ç²˜è´´æŸäº›å†…å®¹ï¼‰ï¼Œ</span></span><br><span class="line">                <span class="comment">// å¹¶ä¸”æ­¤å…ƒç´ æ²¡æœ‰å±æ€§å€¼ï¼Œè¯·è·³è¿‡å®ƒï¼Œ</span></span><br><span class="line">                <span class="comment">// å› ä¸ºè¿™æ„å‘³ç€æ­¤å…ƒç´ çš„å€¼ä¸å±æ€§ç±»å‹çš„å›ºæœ‰ç©ºå€¼åŒ¹é…ï¼Œæˆ‘ä»¬å¸Œæœ›è·³è¿‡å¯¼å…¥å®ƒ</span></span><br><span class="line">				<span class="keyword">return</span> Str;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// ä»æ­¤å¤„å¯¼å…¥å¯¹è±¡çš„åç§°ä¸Šé¢è¦ä½¿ç”¨ ShouldPort() æ£€æŸ¥å®Œæˆï¼Œ</span></span><br><span class="line">            <span class="comment">// å› ä¸ºè¿™æ˜¯æœ‰æ„å¯¼å‡ºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¸Œæœ›å®ƒåœ¨å¯¼å…¥æ—¶å¯¼è‡´é”™è¯¯</span></span><br><span class="line">			<span class="keyword">if</span> (Property-&gt;<span class="built_in">GetFName</span>() != NAME_Name || !Property-&gt;<span class="built_in">GetOwnerVariant</span>().<span class="built_in">IsUObject</span>() || Property-&gt;GetOwner&lt;UObject&gt;()-&gt;<span class="built_in">GetFName</span>() != NAME_Object)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (Index &gt; <span class="number">-1</span> &amp;&amp; ArrayProperty != <span class="literal">NULL</span>) <span class="comment">//è®¾ç½®å•ä¸ªåŠ¨æ€æ•°ç»„å…ƒç´ </span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="function">FScriptArrayHelper_InContainer <span class="title">ArrayHelper</span><span class="params">(ArrayProperty, DestData)</span></span>;</span><br><span class="line"></span><br><span class="line">					ArrayHelper.<span class="built_in">ExpandForIndex</span>(Index);</span><br><span class="line"></span><br><span class="line">					FStringOutputDevice ImportError;</span><br><span class="line">					<span class="keyword">const</span> TCHAR* Result = ArrayProperty-&gt;Inner-&gt;<span class="built_in">ImportText</span>(Str, ArrayHelper.<span class="built_in">GetRawPtr</span>(Index), PortFlags, SubobjectOuter, &amp;ImportError);</span><br><span class="line">					</span><br><span class="line">                    <span class="comment">// çœç•¥è¾“å‡ºé”™è¯¯çš„ä»£ç </span></span><br><span class="line">                    </span><br><span class="line">					<span class="keyword">if</span> (Result != <span class="literal">NULL</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						Str = Result;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">                <span class="comment">// å¯¼å…¥ç®€å•ç±»å‹æ•°æ®ï¼Œå¦‚: int</span></span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span> (Index == INDEX_NONE)</span><br><span class="line">					&#123;</span><br><span class="line">						Index = <span class="number">0</span>;</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">					FStringOutputDevice ImportError;</span><br><span class="line"></span><br><span class="line">					<span class="keyword">const</span> TCHAR* Result = Property-&gt;<span class="built_in">ImportText</span>(Str, Property-&gt;ContainerPtrToValuePtr&lt;<span class="keyword">void</span>&gt;(DestData, Index), PortFlags, SubobjectOuter, &amp;ImportError);</span><br><span class="line">					</span><br><span class="line">					<span class="comment">// çœç•¥è¾“å‡ºé”™è¯¯çš„ä»£ç </span></span><br><span class="line">                    </span><br><span class="line">					<span class="keyword">if</span> (Result != <span class="literal">NULL</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						Str = Result;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æˆåŠŸåˆ™è¿”å›ç©ºï¼Œå¤±è´¥åˆ™è¿”å›æœªè§£æçš„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ²¡åˆ«çš„ï¼Œå°±æ˜¯ä¸€é¡¿è¯­æ³•åˆ†ææ“ä½œï¼Œè¿˜å¥½å†™è€…å­¦è¿‡ç¼–è¯‘åŸç†ï¼ˆåº†å¹¸ ğŸ˜ƒ</p><p>ä¸Šé¢çš„ä»£ç é‡Œé¢çœŸæ­£å¤„ç†å¯¼å…¥çš„å‡½æ•°æ˜¯ï¼šFProperty::ImportTextï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸‹ä¸€ä¸ªè§£æçš„å‡½æ•°</p><h4 id="importtext"><a class="anchor" href="#importtext">#</a> ImportText</h4><p></p><figure class="highlight c++"><figcaption><span>ImportText</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">const</span> TCHAR* <span class="title">ImportText</span><span class="params">( <span class="keyword">const</span> TCHAR* Buffer, <span class="keyword">void</span>* Data, int32 PortFlags, UObject* OwnerObject, FOutputDevice* ErrorText = (FOutputDevice*)GWarn )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( !<span class="built_in">ValidateImportFlags</span>(PortFlags,ErrorText) || Buffer == <span class="literal">NULL</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Imports should always process deprecated properties</span></span><br><span class="line">    PortFlags |= EPropertyPortFlags::PPF_UseDeprecatedProperties; </span><br><span class="line">    <span class="comment">// çœŸæ­£å¤„ç†å¯¼å…¥çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">ImportText_Internal</span>( Buffer, Data, PortFlags, OwnerObject, ErrorText );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™šå‡½æ•°ï¼Œä¸åŒå­ç±»ä¸åŒå®ç°ï¼Œå…·ä½“å®ç°æ˜¯ç®—åç§»ï¼Œå°† &quot;FStringç±»å‹&quot; è§£æä¸ºå¯¹åº”ç±»å‹,</span></span><br><span class="line"><span class="comment">// ç„¶åèµ‹å€¼ç»™ Data æŒ‡é’ˆï¼Œè¿™ä¸€å—ä¸å±•å¼€ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…è¯·è‡ªè¡ŒæŸ¥çœ‹æºç </span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> TCHAR* <span class="title">ImportText_Internal</span><span class="params">( <span class="keyword">const</span> TCHAR* Buffer, <span class="keyword">void</span>* Data, int32 PortFlags, UObject* OwnerObject, FOutputDevice* ErrorText )</span> <span class="keyword">const</span> <span class="title">PURE_VIRTUAL</span><span class="params">(FProperty::ImportText,<span class="keyword">return</span> <span class="literal">NULL</span>;)</span></span>;</span><br></pre></td></tr></table></figure><p></p><p>è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼ŒåŸç†éƒ½å†™åœ¨æ³¨é‡Šé‡Œé¢äº†ã€‚å’±è§£æå®Œ &quot;Import&quot;ï¼Œè‡ªç„¶ä¸èƒ½å°‘äº† &quot;Export&quot; çš„ï¼Œå¼€å§‹å§ ï¼‰</p><h4 id="exporttextitem"><a class="anchor" href="#exporttextitem">#</a> ExportTextItem</h4><p></p><figure class="highlight c++"><figcaption><span>ExportTextItem</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ExportTextItem</span><span class="params">( FString&amp; ValueStr, <span class="keyword">const</span> <span class="keyword">void</span>* PropertyValue, <span class="keyword">const</span> <span class="keyword">void</span>* DefaultValue, UObject* Parent, int32 PortFlags, UObject* ExportRootScope )</span> <span class="keyword">const</span> <span class="keyword">override</span></span>;</span><br></pre></td></tr></table></figure><p></p><p>æ˜¯çš„ï¼Œè·Ÿ &quot;ImportText_Internal&quot; ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸€æ¡åœ¨ &quot;FProperty&quot; å­ç±»ä¸­å„è‡ªå®ç°çš„è™šå‡½æ•°ï¼Œå…·ä½“æµç¨‹ä¹Ÿæ˜¯å…ˆç®—åç§»ï¼Œè·å¾—ä¸€ä¸ªéœ€è¦å¯¼å‡ºçš„å€¼ï¼Œç„¶åå°†å…¶è§£æä¸º &quot;FString&quot; ç±»å‹çš„å€¼å¯¼å‡ºã€‚å…¶å®ä¹Ÿå°±æ˜¯ &quot;ImportText_Internal&quot; çš„é€†æ“ä½œã€‚ä¸‹é¢æ‹¿ &quot;FBoolProperty&quot; çš„æ–‡æœ¬åŒ–åšä¸ªè§£æå§ï¼ˆä¸ç„¶è¿™ä¸ª API çš„è§£æä¹Ÿå¤ªæ°´äº†.....</p><p></p><figure class="highlight c++"><figcaption><span>FBoolProperty.ExportTextItem</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PropertyBool.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FBoolProperty::ExportTextItem</span><span class="params">( FString&amp; ValueStr, <span class="keyword">const</span> <span class="keyword">void</span>* PropertyValue, <span class="keyword">const</span> <span class="keyword">void</span>* DefaultValue, UObject* Parent, int32 PortFlags, UObject* ExportRootScope )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">check</span>(FieldSize != <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// è·å–æŒ‡å‘ çœŸæ­£å­˜ç€boolå€¼ çš„æŒ‡é’ˆ</span></span><br><span class="line">	<span class="keyword">const</span> uint8* ByteValue = (uint8*)PropertyValue + ByteOffset;</span><br><span class="line">    <span class="comment">// &quot;FieldMask&quot; = 255ï¼Œè¿™ä¸€æ­¥ç®—å‡ºæ¥çš„å°±æ˜¯å’±è¦å¯¼å‡ºçš„å€¼</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">bool</span> bValue = <span class="number">0</span> != ((*ByteValue) &amp; FieldMask);</span><br><span class="line">	<span class="keyword">const</span> TCHAR* Temp = <span class="literal">nullptr</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="number">0</span> != (PortFlags &amp; PPF_ExportCpp))</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// ç»™ Temp èµ‹å€¼ï¼Œç”¨ä»¥è¿”å›</span></span><br><span class="line">		Temp = (bValue ? <span class="built_in">TEXT</span>(<span class="string">&quot;true&quot;</span>) : <span class="built_in">TEXT</span>(<span class="string">&quot;false&quot;</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		Temp = (bValue ? <span class="built_in">TEXT</span>(<span class="string">&quot;True&quot;</span>) : <span class="built_in">TEXT</span>(<span class="string">&quot;False&quot;</span>));</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// è¿”å› Temp</span></span><br><span class="line">	ValueStr += FString::<span class="built_in">Printf</span>( <span class="built_in">TEXT</span>(<span class="string">&quot;%s&quot;</span>), Temp );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿé‚£æ˜¯å› ä¸ºè¿™åªæ˜¯ bool ç±»å‹ï¼Œå…¶ä»–ç±»å‹çš„æ–‡æœ¬è§£æå¹¶æ²¡é‚£ä¹ˆç®€å•ï¼Œä½†åŸç†éƒ½æ˜¯å·®ä¸å¤šçš„ã€‚æœ‰å…´è¶£çš„æœ‹å‹è¯·è‡ªè¡Œç ”ç©¶ï¼Œè¿™é‡Œä¸å†å±•å¼€äº†ã€‚</p><h4 id="containerptrtovalueptr"><a class="anchor" href="#containerptrtovalueptr">#</a> ContainerPtrToValuePtr</h4><p><img data-src="D:%5Cblog%5Csource_posts%5CUE4%5CUE4CPP%5CFProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93%5CContainerPtrToValuePtr.png" alt="ContainerPtrToValuePtr"></p><p>å¯ä»¥çœ‹å‡º &quot;ContainerPtrToValuePtr&quot; æ˜¯æœ‰å¤šç§é‡è½½å‡½æ•°çš„ï¼Œå…¶ä½œç”¨æ˜¯è·å–æŸä¸ª &quot;UObject*&quot; æˆ–è€…å…¶ä»–å®¹å™¨ä¸­çš„ æŒ‡å‘è¯¥å±æ€§çš„æŒ‡é’ˆã€‚ç›´æ¥è¿™ä¹ˆè¯´å¯èƒ½ç†è§£ä¸äº†ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹å‡½æ•°å®ç°ã€‚</p><p></p><figure class="highlight c++"><figcaption><span>ContainerUObjectPtrToValuePtrInternal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h</span></span><br><span class="line"></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span>* <span class="title">ContainerUObjectPtrToValuePtrInternal</span><span class="params">(UObject* ContainerPtr, int32 ArrayIndex)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...... çœç•¥ cheak ä»£ç </span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (uint8*)ContainerPtr + Offset_Internal + ElementSize * ArrayIndex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ²¡æœ‰çœ‹é”™ï¼Œé™¤äº† cheakï¼Œå°±åªæ˜¯è¿”å›ä¸€ä¸ªç®—å¥½å†…å­˜åç§»çš„æŒ‡é’ˆã€‚ä¸è¿‡è¿˜æ˜¯æé†’ä¸€ä¸‹ï¼Œè¿™ä¸ª &quot;ContainnerPtr&quot; æ˜¯å’±çš„ &quot;UObject&quot; æŒ‡é’ˆï¼Œé‡Œé¢å¿…é¡»æœ‰è¿™ä¸ª &quot;FProperty&quot;ï¼Œå¦åˆ™ä¼šè¢«å‰é¢çš„ cheak ä»£ç æ‹¦ä½ï¼Œç„¶åæŠ¥é”™ã€‚å…¶æ¬¡ï¼Œ&quot;Offset_Internal&quot; æ˜¯ç”± &quot;UHT&quot; ç”Ÿæˆçš„ï¼Œ&quot;ElementSize&quot; æ˜¯åœ¨ &quot;Fproperty&quot; æ„é€ çš„æ—¶å€™ç”Ÿæˆçš„ï¼Œéƒ½ä¸éœ€è¦æˆ‘ä»¬æ“å¿ƒ.</p><h4 id="copysinglevalue"><a class="anchor" href="#copysinglevalue">#</a> CopySingleValue</h4><p></p><figure class="highlight c++"><figcaption><span>CopySingleVlaue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h</span></span><br><span class="line"></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">CopySingleValue</span><span class="params">( <span class="keyword">void</span>* Dest, <span class="keyword">void</span> <span class="keyword">const</span>* Src )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(Dest != Src)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (PropertyFlags &amp; CPF_IsPlainOldData)</span><br><span class="line">        &#123;</span><br><span class="line">            FMemory::<span class="built_in">Memcpy</span>( Dest, Src, ElementSize );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">CopyValuesInternal</span>(Dest, Src, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;POD&quot; ç±»å‹ç›´æ¥è°ƒç”¨ &quot;Memcpy&quot; å°†ä¸€å—å†…å­˜å¤åˆ¶åˆ°å¦ä¸€å—ä¸­ï¼Œé‚£è‡ªç„¶æ˜¯æµ…æ‹·è´ã€‚é &quot;POD&quot; ç±»å‹ä¼šè°ƒç”¨ &quot;CopyValuesInternal&quot; å‡½æ•°æ¥è¿›è¡Œå¤åˆ¶ã€‚ä¸‹é¢æ˜¯ &quot;CopyValuesInternal&quot; çš„ä»£ç å®ç°</p><blockquote><p>æ³¨:</p><p>Plain Old Data (POD)<br>POD æŒ‡çš„æ˜¯è¿™æ ·ä¸€äº›æ•°æ®ç±»å‹ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€æŒ‡é’ˆã€unionã€æ•°ç»„ã€æ„é€ å‡½æ•°æ˜¯ trivial çš„ struct æˆ–è€… classã€‚<br>POD ç”¨æ¥è¡¨æ˜ C++ ä¸­ä¸ C ç›¸å…¼å®¹çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æŒ‰ç…§ C çš„æ–¹å¼æ¥å¤„ç†ï¼ˆè¿ç®—ã€æ‹·è´ç­‰ï¼‰ã€‚é POD æ•°æ®ç±»å‹ä¸ C ä¸å…¼å®¹ï¼Œåªèƒ½æŒ‰ç…§ C++ ç‰¹æœ‰çš„æ–¹å¼è¿›è¡Œä½¿ç”¨ã€‚</p></blockquote><p></p><figure class="highlight c++"><figcaption><span>CopyValuesInternal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TProperty ä¸­çš„å‡½æ•°ã€‚é &quot;POD&quot; éƒ½ä¼šç»§æ‰¿ &quot;TProperty&quot;ï¼Œ&quot;TProperty&quot; ä¹Ÿç»§æ‰¿äº &quot;FProperty&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">CopyValuesInternal</span><span class="params">( <span class="keyword">void</span>* Dest, <span class="keyword">void</span> <span class="keyword">const</span>* Src, int32 Count )</span> <span class="keyword">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (int32 Index = <span class="number">0</span>; Index &lt; Count; Index++)</span><br><span class="line">    &#123;</span><br><span class="line">        TTypeFundamentals::<span class="built_in">GetPropertyValuePtr</span>(Dest)[Index] = TTypeFundamentals::<span class="built_in">GetPropertyValuePtr</span>(Src)[Index];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> FORCEINLINE TCppType* <span class="title">GetPropertyValuePtr</span><span class="params">(<span class="keyword">void</span>* A)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (TCppType*)A;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å…¶å®å°±æ˜¯åšä¸ªå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯æµ…æ‹·è´ã€‚&quot;FArrayProperty&quot; çš„ &quot;CopyValuesInternal&quot; ä¼šæŠŠæ‰€æœ‰çš„å…ƒç´ éƒ½æ‹·è´ä¸€éï¼Œä½†åœ¨ &quot;FArrayProperty&quot; è°ƒç”¨ &quot;CopySingleValue&quot; åªä¼šå¯¹å…¶ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ‹·è´ã€‚è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰ç›´æ¥å…³è”çš„ï¼Œä¸ç†è§£å¯ä»¥è‡ªå·±ç¿»ç¿»æºç ã€‚&quot;CopyCompleteValue&quot; è·Ÿ &quot;CopySingleValue&quot; çš„å®ç°ä¸€æ ·ï¼Œåªæ˜¯ä¼šæŠŠæ‰€æœ‰å…ƒç´ éƒ½æ‹·è´ä¸€éã€‚æ‰€ä»¥ &quot;CopyCompleteValue&quot; ä¸€èˆ¬ç”¨äº &quot;FArrayProperty&quot; æˆ– &quot;FMapProperty&quot; è¿™ä¸€ç±»å±æ€§ä¸­æ‹·è´æ‰€æœ‰å…ƒç´ ã€‚</p><h4 id="clearvalue"><a class="anchor" href="#clearvalue">#</a> ClearValue</h4><p></p><figure class="highlight c++"><figcaption><span>ClearValue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h</span></span><br><span class="line"></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">ClearValue</span><span class="params">( <span class="keyword">void</span>* Data )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">HasAllPropertyFlags</span>(CPF_NoDestructor | CPF_ZeroConstructor))</span><br><span class="line">    &#123;</span><br><span class="line">        FMemory::<span class="built_in">Memzero</span>( Data, ElementSize );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ClearValueInternal</span>((uint8*)Data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„ç±»å‹ç›´æ¥æ¸…é™¤æ‰€æœ‰å…ƒç´ ï¼Œä¼šè°ƒç”¨ææ„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FArrayProperty::ClearValueInternal</span><span class="params">( <span class="keyword">void</span>* Data )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">FScriptArrayHelper <span class="title">ArrayHelper</span><span class="params">(<span class="keyword">this</span>, Data)</span></span>;</span><br><span class="line">	ArrayHelper.<span class="built_in">EmptyValues</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶ä»–ç±»å‹ç›´æ¥é‡æ–°è°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–è¿™å—å†…å­˜(åœ¨ &quot;DestroyValue&quot; ä¸­è°ƒç”¨ææ„å‡½æ•°)</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ClearValueInternal</span><span class="params">( <span class="keyword">void</span>* Data )</span> <span class="keyword">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TTypeFundamentals::<span class="built_in">SetPropertyValue</span>(Data, TTypeFundamentals::<span class="built_in">GetDefaultPropertyValue</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> FORCEINLINE <span class="keyword">void</span> <span class="title">SetPropertyValue</span><span class="params">(<span class="keyword">void</span>* A, TCppType <span class="keyword">const</span>&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    *<span class="built_in">GetPropertyValuePtr</span>(A) = Value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> FORCEINLINE TCppType <span class="title">GetDefaultPropertyValue</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">TCppType</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>&quot;ClearValue&quot; å¯¹äºæ²¡æœ‰ææ„å‡½æ•°çš„å¯¹è±¡ï¼Œæˆ–è€…ç®€å•æ•°æ®ç±»å‹ä¼šç›´æ¥è°ƒç”¨ &quot;Memzero&quot; æ¥æ¸…ç©ºå†…å­˜ï¼Œæ•°ç»„ç±»å‹ä¼šè°ƒç”¨æ¯ä¸ªå…ƒç´ çš„ææ„å‡½æ•°æ¥æ¸…é™¤å…ƒç´  (å¦‚æœæœ‰ææ„å‡½æ•°)ï¼Œå…¶ä»–ç±»å‹ä¼šè°ƒç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–è¿™å—å†…å­˜ï¼Œç­‰å¾… &quot;DestroyValue&quot; æ¥è°ƒç”¨å…¶ææ„å‡½æ•°ã€‚</p><h4 id="destroyvalue"><a class="anchor" href="#destroyvalue">#</a> DestroyValue</h4><p></p><figure class="highlight c++"><figcaption><span>DestroyValue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UnrealType.h	</span></span><br><span class="line"><span class="function">FORCEINLINE <span class="keyword">void</span> <span class="title">DestroyValue</span><span class="params">( <span class="keyword">void</span>* Dest )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(PropertyFlags &amp; CPF_NoDestructor))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">DestroyValueInternal</span>(Dest);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†è°ƒç”¨æ‰€æœ‰å±æ€§çš„ææ„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">DestroyValueInternal</span><span class="params">( <span class="keyword">void</span>* Dest )</span> <span class="keyword">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (int32 i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;ArrayDim; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        TTypeFundamentals::<span class="built_in">DestroyPropertyValue</span>((uint8*)Dest + i * <span class="keyword">this</span>-&gt;ElementSize);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> FORCEINLINE <span class="keyword">void</span> <span class="title">DestroyPropertyValue</span><span class="params">(<span class="keyword">void</span>* A)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">GetPropertyValuePtr</span>(A)-&gt;~<span class="built_in">TCppType</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;FArrayProperty&quot; ç›´æ¥é”€æ¯ Array å®¹å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FArrayProperty::DestroyValueInternal</span><span class="params">( <span class="keyword">void</span>* Dest )</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">FScriptArrayHelper <span class="title">ArrayHelper</span><span class="params">(<span class="keyword">this</span>, Dest)</span></span>;</span><br><span class="line">	ArrayHelper.<span class="built_in">EmptyValues</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é”€æ¯Arrayå®¹å™¨</span></span><br><span class="line">	ArrayHelper.<span class="built_in">DestroyContainer_Unsafe</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>æ¯”è¾ƒç®€å•ï¼Œåˆ†æåœ¨æ³¨é‡Šé‡Œ</p><h4 id="getowner"><a class="anchor" href="#getowner">#</a> GetOwner</h4><p>è¿™ä¸ªæ¯”è¾ƒæœ‰æ„æ€ï¼Œä¼šè¿”å›ä¸åŒç±»å‹çš„å€¼</p><p></p><figure class="highlight c++"><figcaption><span>GetOwner</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Field.h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// T = FProperty</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T* <span class="title">GetOwner</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(T) &gt; <span class="number">0</span>, <span class="string">&quot;T must not be an incomplete type&quot;</span>);</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ Owner æ˜¯ &quot;FFeildVariant&quot; ç±»å‹</span></span><br><span class="line">    <span class="keyword">return</span> Owner.Get&lt;T&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">typename</span> TEnableIf&lt;!TIsDerivedFrom&lt;T, UObject&gt;::IsDerived, T*&gt;::<span class="function">Type <span class="title">Get</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">static_assert</span></span>(<span class="built_in"><span class="keyword">sizeof</span></span>(T) &gt; <span class="number">0</span>, <span class="string">&quot;T must not be an incomplete type&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">IsA</span>(T::<span class="built_in">StaticClass</span>()))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;T*&gt;(Container.Field);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">COREUOBJECT_API</span> <span class="title">FFieldVariant</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="class"><span class="keyword">union</span> <span class="title">FFieldObjectUnion</span></span></span><br><span class="line"><span class="class">	&#123;</span></span><br><span class="line">		FField* Field;</span><br><span class="line">		UObject* Object;</span><br><span class="line">	&#125; Container;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">bool</span> bIsUObject;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>å¯ä»¥çœ‹å‡º &quot;FProperty&quot; çš„ &quot;Owner&quot; å…¶å®æ˜¯ç”±ä¸¤ç§çš„ï¼Œä¸€ç§æ˜¯ &quot;UObject&quot;ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ &quot;FProperty&quot;ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸åŒç±»å‹çš„å€¼ï¼Œä¹Ÿæ˜¯å¤šäºäº† &quot;FFieldObjectUnion&quot; è”åˆæ•°æ®ç±»å‹ã€‚</p><hr><p>ç»“è¯­ï¼š</p><p>ä¸çŸ¥ä¸è§‰ï¼Œå°±å†™äº†å¥½é•¿...... è¿™ç¯‡é€»è¾‘æ€§ä¸æ˜¯å¾ˆå¼ºï¼Œå°±æ˜¯å±æ€§å’Œæ¥å£çš„ä»‹ç»ï¼Œä»¥åŠ &quot;FProperty&quot; å’Œ &quot;UStruct&quot; å±æ€§é“¾çš„ç”Ÿæˆå’Œåˆå§‹åŒ–è¿‡ç¨‹ã€‚å·²ç»æŠŠæƒ³æ€»ç»“çš„éƒ½æ€»ç»“å®Œå•¦ï¼Œå®è·µç¯‡å†™åœ¨<span class="exturl" data-url="aHR0cHM6Ly93d3cud3lmbm90ZS5jb20vMjAyMS8xMC8yOS9VRTQvVUU0Q1BQLyVFNSU4RiU4RCVFNSVCMCU4NCVFNyVCMyVCQiVFNyVCQiU5RiUyMEFQSS8=">å¦ä¸€ç¯‡åšå®¢</span>äº†ï½ï½ï½</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-01-02 14:54:51" itemprop="dateModified" datetime="2022-01-02T14:54:51+08:00">2022-01-02</time> </span><span id="2021/11/15/UE4/UE4CPP/FPropertyçš„åˆ†æä¸æ€»ç»“/" class="item leancloud_visitors" data-flag-title="FPropertyçš„åˆ†æä¸æ€»ç»“" title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>-YIFEI- <i class="ic i-at"><em>@</em></i>ä¸€ä¸ªå¹´è½»äººå¥”å‘æ¢¦æƒ³çš„è¶³è¿¹</li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://kotori_suki.github.io/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/" title="FPropertyçš„åˆ†æä¸æ€»ç»“">https://kotori_suki.github.io/2021/11/15/UE4/UE4CPP/FPropertyçš„åˆ†æä¸æ€»ç»“/</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicitspjpbj20zk0m81ky.jpg" title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> UE4_C++</span><h3>UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•</h3></a></div><div class="item right"><a href="/2021/11/20/CPPBase/C++%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%20%E5%A4%8D%E5%88%BB/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipevarprfj20zk0m8npd.jpg" title="C++æ™ºèƒ½æŒ‡é’ˆ å¤åˆ»"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> C++åŸºç¡€</span><h3>C++æ™ºèƒ½æŒ‡é’ˆ å¤åˆ»</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#fproperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93"><span class="toc-number">1.</span> <span class="toc-text">FProperty çš„åˆ†æä¸æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.0.1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fproperty%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.0.2.</span> <span class="toc-text">FProperty çš„ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fproperty%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.0.3.</span> <span class="toc-text">FProperty çš„å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E9%93%BE%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.0.4.</span> <span class="toc-text">å±æ€§é“¾çš„åˆå§‹åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E-uclass-%E7%9A%84%E6%9E%84%E9%80%A0%E5%BC%80%E5%A7%8B"><span class="toc-number">1.0.4.1.</span> <span class="toc-text">ä» &quot;UClass&quot; çš„æ„é€ å¼€å§‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fpropertyparamsbase"><span class="toc-number">1.0.4.2.</span> <span class="toc-text">FPropertyParamsBase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#constructfproperty"><span class="toc-number">1.0.4.3.</span> <span class="toc-text">ConstructFProperty</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ustructstaticlink"><span class="toc-number">1.0.4.4.</span> <span class="toc-text">UStruct::StaticLink</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fproperty%E5%B8%B8%E7%94%A8api"><span class="toc-number">1.0.5.</span> <span class="toc-text">FProperty å¸¸ç”¨ API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8api%E8%A7%A3%E6%9E%90"><span class="toc-number">1.0.6.</span> <span class="toc-text">å¸¸ç”¨ API è§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#serialize"><span class="toc-number">1.0.6.1.</span> <span class="toc-text">Serialize</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#postduplicate"><span class="toc-number">1.0.6.2.</span> <span class="toc-text">PostDuplicate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#importsingleproperty"><span class="toc-number">1.0.6.3.</span> <span class="toc-text">ImportSingleProperty</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#importtext"><span class="toc-number">1.0.6.4.</span> <span class="toc-text">ImportText</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exporttextitem"><span class="toc-number">1.0.6.5.</span> <span class="toc-text">ExportTextItem</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#containerptrtovalueptr"><span class="toc-number">1.0.6.6.</span> <span class="toc-text">ContainerPtrToValuePtr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#copysinglevalue"><span class="toc-number">1.0.6.7.</span> <span class="toc-text">CopySingleValue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clearvalue"><span class="toc-number">1.0.6.8.</span> <span class="toc-text">ClearValue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#destroyvalue"><span class="toc-number">1.0.6.9.</span> <span class="toc-text">DestroyValue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getowner"><span class="toc-number">1.0.6.10.</span> <span class="toc-text">GetOwner</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/2021/10/25/UE4/UE4CPP/API%E4%B8%8D%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C-%E4%B9%8B-GetGameMode/" rel="bookmark" title="APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetGameMode">APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetGameMode</a></li><li><a href="/2021/10/25/UE4/UE4CPP/API%E4%B8%8D%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C-%E4%B9%8B-GetPlayerController/" rel="bookmark" title="APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetPlayerController">APIä¸æ­£å¸¸å·¥ä½œ ä¹‹ GetPlayerController</a></li><li><a href="/2021/10/25/UE4/UE4CPP/unreal%20%E5%BC%95%E6%93%8E%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" rel="bookmark" title="unrealå¼•æ“å¯åŠ¨æµç¨‹">unrealå¼•æ“å¯åŠ¨æµç¨‹</a></li><li><a href="/2021/10/26/UE4/UE4CPP/%E4%BB%8ESVG%E6%96%87%E4%BB%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E6%97%85%E7%A8%8B/" rel="bookmark" title="ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~">ä»SVGæ–‡ä»¶å¼€å§‹çš„æ—…ç¨‹~~~</a></li><li><a href="/2021/10/29/UE4/UE4CPP/%E5%8F%8D%E5%B0%84%E7%B3%BB%E7%BB%9F%20API/" rel="bookmark" title="åå°„ç³»ç»ŸAPI  è§£æå’Œä½¿ç”¨">åå°„ç³»ç»ŸAPI è§£æå’Œä½¿ç”¨</a></li><li><a href="/2021/10/31/UE4/UE4CPP/Session%E7%9A%84%E4%BD%BF%E7%94%A8%20C++%E7%AF%87/" rel="bookmark" title="Sessionçš„ä½¿ç”¨ C++ç¯‡">Sessionçš„ä½¿ç”¨ C++ç¯‡</a></li><li><a href="/2021/11/02/UE4/UE4CPP/Unreal%20%E5%BA%8F%E5%88%97%E5%8C%96/" rel="bookmark" title="Unreal åºåˆ—åŒ–~~~">Unreal åºåˆ—åŒ–~~~</a></li><li><a href="/2021/11/06/UE4/UE4CPP/Unreal%20GC%E8%BF%87%E7%A8%8B/" rel="bookmark" title="Unreal GCè¿‡ç¨‹">Unreal GCè¿‡ç¨‹</a></li><li><a href="/2021/11/08/UE4/UE4CPP/UClass%E7%9A%84%E8%AF%9E%E7%94%9F%E4%B8%8E%E6%88%90%E9%95%BF/" rel="bookmark" title="UClassçš„è¯ç”Ÿä¸æˆé•¿">UClassçš„è¯ç”Ÿä¸æˆé•¿</a></li><li><a href="/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" rel="bookmark" title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•">UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•</a></li><li class="active"><a href="/2021/11/15/UE4/UE4CPP/FProperty%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%80%BB%E7%BB%93/" rel="bookmark" title="FPropertyçš„åˆ†æä¸æ€»ç»“">FPropertyçš„åˆ†æä¸æ€»ç»“</a></li><li><a href="/2021/11/22/UE4/UE4CPP/Unreal%20%E5%A4%9A%E7%A7%8D%E6%8C%87%E9%92%88%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" rel="bookmark" title="Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†">Unreal å¤šç§æŒ‡é’ˆå®ç°åŸç†</a></li><li><a href="/2021/11/26/UE4/UE4CPP/Unreal%20Slate/" rel="bookmark" title="Unreal Slate">Unreal Slate</a></li><li><a href="/2021/12/01/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20%E6%80%BB%E8%A7%88%20&%20UEngine%20&%20UGameInstance/" rel="bookmark" title="Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance">Gameplay â€”â€” æ€»è§ˆ & UEngine & UGameInstance</a></li><li><a href="/2021/12/03/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20FWorldContext%20&%20UWorld%20&%20ULevel/" rel="bookmark" title="Gameplay â€”â€” FWorldContext & UWorld & ULevel">Gameplay â€”â€” FWorldContext & UWorld & ULevel</a></li><li><a href="/2021/12/06/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AActor%20&%20UActorComponent/" rel="bookmark" title="Gameplay â€”â€” AActor & UActorComponent">Gameplay â€”â€” AActor & UActorComponent</a></li><li><a href="/2021/12/09/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20APawn%20&%20AController%20&%20APlayerController/" rel="bookmark" title="Gameplay â€”â€” APawn & AController & APlayerController">Gameplay â€”â€” APawn & AController & APlayerController</a></li><li><a href="/2021/12/12/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20AGameMode%20&%20AGameState%20&%20APlayerState/" rel="bookmark" title="Gameplay â€”â€” AGameMode & AGameState & APlayerState">Gameplay â€”â€” AGameMode & AGameState & APlayerState</a></li><li><a href="/2021/12/15/UE4/UE4CPP/Gameplay%20%E2%80%94%E2%80%94%20USavegame%20&%20UPlayer/" rel="bookmark" title="Gameplay â€”â€” USavegame & UPlayer">Gameplay â€”â€” USavegame & UPlayer</a></li><li><a href="/2021/12/17/UE4/UE4CPP/Unreal%20GAS%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" rel="bookmark" title="Unreal GAS æºç è§£æ">Unreal GAS æºç è§£æ</a></li><li><a href="/2021/12/28/UE4/UE4CPP/CustomItemModule/" rel="bookmark" title="Custom Item Module">Custom Item Module</a></li><li><a href="/2021/12/30/UE4/UE4CPP/Unreal%20%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/" rel="bookmark" title="Unreal å¼‚æ­¥ä¸å¹¶è¡Œç¼–ç¨‹">Unreal å¼‚æ­¥ä¸å¹¶è¡Œç¼–ç¨‹</a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="-YIFEI-" data-src="/images/avatar.jpg"><p class="name" itemprop="name">-YIFEI-</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">53</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">15</span> <span class="name">åˆ†ç±»</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0tvdG9yaS1TdWtp" title="https:&#x2F;&#x2F;github.com&#x2F;Kotori-Suki"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS90dnQtNjA=" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;tvt-60"><i class="ic i-zhihu"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li></ul></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/11/20/CPPBase/C++%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%20%E5%A4%8D%E5%88%BB/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/ModuleDesign/" title="åˆ†ç±»äº ModuleDesign">ModuleDesign</a></div><span><a href="/2021/12/28/UE4/UE4CPP/CustomItemModule/" title="Custom Item Module">Custom Item Module</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº ç»“æ„å‹æ¨¡å¼">ç»“æ„å‹æ¨¡å¼</a></div><span><a href="/2021/08/19/CPPBase/DesignPattern/Bridge/" title="æ¡¥æ¥æ¨¡å¼">æ¡¥æ¥æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2021/11/11/UE4/UE4CPP/UE4%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%94%A8%E6%B3%95/" title="UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•">UE4ä»£ç†çš„å®ç°ä¸ç”¨æ³•</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è¡Œä¸ºå‹æ¨¡å¼">è¡Œä¸ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/19/CPPBase/DesignPattern/TemplateMethod/" title="æ¨¡æ¿æ¨¡å¼">æ¨¡æ¿æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº åˆ›å»ºå‹æ¨¡å¼">åˆ›å»ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/17/CPPBase/DesignPattern/Builder/" title="å»ºé€ è€…æ¨¡å¼">å»ºé€ è€…æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ComputerBase/" title="åˆ†ç±»äº è®¡ç®—æœºåŸºç¡€">è®¡ç®—æœºåŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/ComputerBase/%E7%AE%97%E6%B3%95/" title="åˆ†ç±»äº ç®—æ³•">ç®—æ³•</a></div><span><a href="/2021/08/16/ComputerBase/Algorithm/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è¡Œä¸ºå‹æ¨¡å¼">è¡Œä¸ºå‹æ¨¡å¼</a></div><span><a href="/2021/08/19/CPPBase/DesignPattern/Observe/" title="è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/UE4/" title="åˆ†ç±»äº UE4">UE4</a> <i class="ic i-angle-right"></i> <a href="/categories/UE4/UE4CPP/" title="åˆ†ç±»äº UE4_C++">UE4_C++</a></div><span><a href="/2021/11/02/UE4/UE4CPP/Unreal%20%E5%BA%8F%E5%88%97%E5%8C%96/" title="Unreal åºåˆ—åŒ–~~~">Unreal åºåˆ—åŒ–~~~</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a></div><span><a href="/2021/08/23/CPPBase/%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/" title="è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜">è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/CPPBase/" title="åˆ†ç±»äº C++åŸºç¡€">C++åŸºç¡€</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a> <i class="ic i-angle-right"></i> <a href="/categories/CPPBase/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="åˆ†ç±»äº ç»“æ„å‹æ¨¡å¼">ç»“æ„å‹æ¨¡å¼</a></div><span><a href="/2021/08/18/CPPBase/DesignPattern/Adapter/" title="é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 â€“ <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">-YIFEI- @ Afei's Blog</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/11/15/UE4/UE4CPP/FPropertyçš„åˆ†æä¸æ€»ç»“/",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",hide:"(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>